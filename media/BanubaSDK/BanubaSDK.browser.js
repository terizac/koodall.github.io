var Bb=Object.defineProperty,Nb=(je,et,Ye)=>et in je?Bb(je,et,{enumerable:!0,configurable:!0,writable:!0,value:Ye}):je[et]=Ye,fe=(je,et,Ye)=>(Nb(je,typeof et!="symbol"?et+"":et,Ye),Ye);(function(je,et){typeof exports=="object"&&typeof module<"u"?et(exports):typeof define=="function"&&define.amd?define(["exports"],et):(je=typeof globalThis<"u"?globalThis:je||self,et(je.BanubaSDK={}))})(this,function(je){var et,Ye;let cu=0;const jo=()=>cu++,No="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2FkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCh7ZGF0YTp0fSk9Pntjb25zdCBzPXtpZDp0LmlkfTtzZXRUaW1lb3V0KHBvc3RNZXNzYWdlLHQudGltZW91dCxzKX0pfSkoKTsK",Bo=typeof window<"u"&&window.Blob&&new Blob([atob(No)],{type:"text/javascript;charset=utf-8"});function fu(){let r;try{if(r=Bo&&(window.URL||window.webkitURL).createObjectURL(Bo),!r)throw"";return new Worker(r)}catch{return new Worker("data:application/javascript;base64,"+No)}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}let $r;const ii=new Map,Oo=(r,a)=>{const i=jo(),c={id:i,timeout:a};return ii.set(c.id,r),$r||($r=new fu,$r.onmessage=({data:y})=>{const v=ii.get(y.id);ii.delete(y.id),v()}),$r.postMessage(c),i},Uo=1e3/60,Yr=[];let Wo=0;const zo=r=>{const a=jo();if(Yr.length===0){const i=performance.now(),c=Uo-(i-Wo)%Uo;Oo(()=>{const y=Wo=performance.now(),v=[...Yr];Yr.length=0,v.forEach(w=>w(y))},c)}return Yr.push(r),a},du=Object.freeze(Object.defineProperty({__proto__:null,requestAnimationFrame:zo,setTimeout:Oo},Symbol.toStringTag,{value:"Module"})),hu=(...r)=>window.setTimeout(...r),Zr=new Map,pu=r=>{const a=window.requestAnimationFrame((...i)=>{Zr.delete(a),r(...i)});return Zr.set(a,r),a};typeof document<"u"&&document.addEventListener("visibilitychange",()=>{document.visibilityState!=="visible"&&Zr.forEach((r,a)=>{Zr.delete(a),cancelAnimationFrame(a),zo(r)})});const mu=Object.freeze(Object.defineProperty({__proto__:null,requestAnimationFrame:pu,setTimeout:hu},Symbol.toStringTag,{value:"Module"})),bu=typeof document<"u"?document:{visibilityState:"hidden"},Vo=()=>bu.visibilityState==="visible"?mu:du,xr=r=>Vo().requestAnimationFrame(r),Go=(r,a)=>Vo().setTimeout(r,a),Ko=r=>Promise.resolve().then(r),oi={requestAnimationFrame:xr,setTimeout:Go},gu=Object.freeze(Object.defineProperty({__proto__:null,nextTick:Ko,requestAnimationFrame:xr,setTimeout:Go,timers:oi},Symbol.toStringTag,{value:"Module"})),yu=()=>new Promise(r=>xr(r)),ai=(r=-1)=>function(a,i,c){const y=c,v=y.value;return{...y,value:async function*(...w){const _=v.apply(this,w);let D=0,I=0;for(;;){const O=1e3/r,ee=.1*O;for(;(I=performance.now())-D<O-ee;)await yu();D=I;const{done:$,value:re}=await _.next();if($)return re;const X=yield re;typeof X<"u"&&(r=X)}}}},Hr=async(r,a={})=>new Promise(i=>{const c=document.createElement("video");if(c.muted=!0,c.controls=!1,c.playsInline=!0,Object.assign(c,a),r instanceof globalThis.MediaStream)c.srcObject=r,c.addEventListener("ended",()=>c.srcObject=null,{once:!0}),r.addEventListener("inactive",()=>c.dispatchEvent(new CustomEvent("ended")),{once:!0});else{if(typeof r!="string"){const v=r=URL.createObjectURL(r);c.addEventListener("emptied",()=>URL.revokeObjectURL(v),{once:!0})}c.crossOrigin="anonymous",c.src=r,c.addEventListener("ended",()=>c.src="",{once:!0})}c.style.position="fixed",c.style.zIndex="-9999999",c.style.opacity="0.0000000001",document.body.appendChild(c),c.addEventListener("emptied",()=>c.remove(),{once:!0});const y=setInterval(()=>c.readyState,300);c.addEventListener("play",()=>clearInterval(y),{once:!0}),c.addEventListener("play",()=>i(c),{once:!0}),c.addEventListener("loadedmetadata",()=>c.play(),{once:!0})}),_u=r=>new Promise((a,i)=>{const c=document.createElement("img");c.onload=()=>a(c),c.onerror=i,c.crossOrigin="anonymous",c.src=typeof r=="string"?r:URL.createObjectURL(r)}),Xo=new Map,vu=(r,a,i)=>r*(1-i)+a*i,si=r=>`webar::${r}:start`,li=r=>`webar::${r}:end`,ui=r=>{let a={internalName:r+":"+Math.random()};return performance.mark(si(a.internalName)),a},ci=r=>{const a=r.internalName;performance.mark(li(a));let i=performance.measure(a,si(a),li(a));i||(i=performance.getEntriesByName(a)[0]),performance.clearMarks(si(a)),performance.clearMarks(li(a)),performance.clearMeasures(a);const{duration:c}=i,y=a.split(":")[0];let{averagedDuration:v=0}=Xo.get(y)||{};return v=vu(v,c,.05),Xo.set(y,{averagedDuration:v}),{instantDuration:c,averagedDuration:v}},$o=(r,a=i=>console.warn(i))=>function(i,c,y){const v=y.value;if(typeof v!="function")throw new TypeError("Only functions can be marked as deprecated");return{...y,value:function(...w){return a.call(this,`DEPRECATION: ${i.constructor.name}.${c}() is deprecated. ${r}`),v.call(this,...w)}}};let Rr=class{constructor(){fe(this,"_emitter",new EventTarget)}addEventListener(r,a,i){this._emitter.addEventListener(r,a,i)}removeEventListener(r,a,i){this._emitter.removeEventListener(r,a,i)}dispatchEvent(r){return this._emitter.dispatchEvent(r)}removeAllEventListeners(){this._emitter=new EventTarget}};const wu=(r,a,i)=>fetch(r,a).then(c=>{if(!c.body)return c;let y=0;const v=Number(c.headers.get("content-length")||0),w=c.body.getReader();return new Response(new ReadableStream({async start(_){for(;;){const{done:D,value:I}=await w.read();if(D?y=v:y+=I.byteLength,i?.onProgress?.({total:v,transferred:y}),D)break;_.enqueue(I)}_.close()}}),c)}),Yo=()=>/Edge?\/(79|[89]\d|\d{3,})(\.\d+|)(\.\d+|)|Firefox\/(6[5-9]|[7-9]\d|\d{3,})\.\d+(\.\d+|)|Chrom(ium|e)\/(5[7-9]|[6-9]\d|\d{3,})\.\d+(\.\d+|)([\d.]+$|.*Safari\/(?![\d.]+ Edge\/[\d.]+$))|Maci.* Version\/(1[5-9]|[2-9]\d|\d{3,})\.\d+([,.]\d+|)( Mobile\/\w+|) Safari\/|Chrome.+OPR\/(4[4-9]|[5-9]\d|\d{3,})\.\d+\.\d+|(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(1[5-9]|[2-9]\d|\d{3,})[._]\d+([._]\d+|)|Mobile Safari.+OPR\/(7[2-9]|[89]\d|\d{3,})\.\d+\.\d+|Android.+Chrom(ium|e)\/(10[7-9]|1[1-9]\d|[2-9]\d{2}|\d{4,})\.\d+(\.\d+|)|Android.+(UC? ?Browser|UCWEB|U3)[ /]?(1[3-9]|[2-9]\d|\d{3,})\.\d+\.\d+|SamsungBrowser\/([7-9]|\d{2,})\.\d+|Android.+MQ{2}Browser\/(1[3-9]|[2-9]\d|\d{3,})(\.\d+|)(\.\d+|)|baidubrowser[\s/](1[3-9]|[2-9]\d|\d{3,})(\.\d+|)(\.\d+|)/.test(navigator.userAgent),Eu=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(window.navigator?.userAgent),Zo=typeof OffscreenCanvas<"u"&&!Eu,Ho={alpha:!0,antialias:!1,depth:!1,desynchronized:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1};let oe;const Su=(()=>{if(typeof window>"u"||!Yo())return!1;oe??(oe=Jo().getContext("webgl2",Ho));const r=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,r),oe.texImage2D(oe.TEXTURE_2D,0,oe.RGB,1,1,0,oe.RGB,oe.UNSIGNED_BYTE,null);const a=oe.createFramebuffer();oe.bindFramebuffer(oe.FRAMEBUFFER,a),oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,r,0);const i=oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_FORMAT);return oe.bindFramebuffer(oe.FRAMEBUFFER,null),oe.bindTexture(oe.TEXTURE_2D,null),oe.deleteFramebuffer(a),oe.deleteTexture(r),i===oe.RGB})(),Cu=async(r,a,i,c="RGBA")=>{oe??(oe=Jo().getContext("webgl2",Ho)),oe.canvas.width=r.width,oe.canvas.height=r.height,c==="RGB"&&oe.pixelStorei(oe.PACK_ALIGNMENT,1);const y=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,y),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.NEAREST),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),oe.texImage2D(oe.TEXTURE_2D,0,oe[c],oe[c],oe.UNSIGNED_BYTE,r);const v=oe.createFramebuffer();oe.bindFramebuffer(oe.FRAMEBUFFER,v),oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_2D,y,0);const w=oe.createBuffer();oe.bindBuffer(oe.PIXEL_PACK_BUFFER,w),oe.bufferData(oe.PIXEL_PACK_BUFFER,a.byteLength,oe.STREAM_READ),oe.readPixels(i.x,i.y,i.width,i.height,oe[c],oe.UNSIGNED_BYTE,0),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,null),oe.bindFramebuffer(oe.FRAMEBUFFER,null),oe.deleteFramebuffer(v),oe.bindTexture(oe.TEXTURE_2D,null),oe.deleteTexture(y);const _=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);oe.flush(),await Tu(oe,_).finally(()=>oe.deleteSync(_)),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,w),oe.getBufferSubData(oe.PIXEL_PACK_BUFFER,0,new DataView(a.buffer()),a.byteOffset,a.byteLength),oe.bindBuffer(oe.PIXEL_PACK_BUFFER,null),oe.deleteBuffer(w)},Tu=(r,a)=>new Promise((i,c)=>function y(){const v=r.clientWaitSync(a,0,0);if(v===r.WAIT_FAILED)return c(new Error("GPU operations complete wait failed"));if(v===r.CONDITION_SATISFIED||v===r.ALREADY_SIGNALED)return i();oi.setTimeout(y,2)}());function xu(r=256,a=128){const i=document.createElement("canvas");return i.width=r,i.height=a,i}function Ru(r=256,a=128){return new OffscreenCanvas(r,a)}function Jo(r=256,a=128){return Zo?Ru(r,a):xu(r,a)}const fi=(r={})=>{const a=({displayWidth:i,displayHeight:c,visibleRect:y=null})=>{let v=y?.x??0,w=y?.y??0,_=y?.width??i,D=y?.height??c;if(r.crop){const[I,O,ee,$]=r.crop(_,D);[v,w,_,D]=[v+I,w+O,ee,$]}return[i,c]=[_,D],{visibleRect:{x:v,y:w,width:_,height:D},displayWidth:i,displayHeight:c,horizontalFlip:!!r.horizontalFlip}};return{getSourceOptions:i=>{let c=i instanceof HTMLVideoElement?i.videoWidth:i.width,y=i instanceof HTMLVideoElement?i.videoHeight:i.height;return a({displayWidth:c,displayHeight:y})},getFrameOptions:a}};class Jr{constructor(a,i={},c=null){fe(this,"_source",null),fe(this,"_visibleRect",{x:0,y:0,width:0,height:0}),fe(this,"_deleter"),fe(this,"horizontalFlip",!1);const y=a instanceof HTMLVideoElement?a.videoWidth:a.width,v=a instanceof HTMLVideoElement?a.videoHeight:a.height;this._visibleRect.x=i.visibleRect?.x??0,this._visibleRect.y=i.visibleRect?.y??0,this._visibleRect.width=i.visibleRect?.width??y,this._visibleRect.height=i.visibleRect?.height??v,this.horizontalFlip=i.horizontalFlip??this.horizontalFlip,a.width=y,a.height=v,this._source=a,this._deleter=c}get texture(){return this._source?.width==this.displayWidth&&this._source?.height==this.displayHeight?this._source:null}get displayWidth(){return this._visibleRect.width}get displayHeight(){return this._visibleRect.height}get format(){return this._source?Su?"RGB":"RGBA":null}allocationSize(){if(!this.format)throw new Error("Failed to execute 'allocationSize' on 'Frame': Frame is closed.");const{width:a,height:i}={width:this._visibleRect.width,height:this._visibleRect.height};return a*i*this.format.length}async copyTo(a){if(!this._source)throw new Error("Failed to execute 'copyTo' on 'Frame': Frame is closed.");return await Cu(this._source,a,this._visibleRect,this.format),[]}close(){this._deleter&&this._deleter(),this._source=null}}var ku=Object.defineProperty,Pu=Object.getOwnPropertyDescriptor,Au=(r,a,i,c)=>{for(var y=c>1?void 0:c?Pu(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(y=(c?w(a,i,y):w(y))||y);return c&&y&&ku(a,i,y),y},Qo;let qo=class{constructor(r){fe(this,"_src"),fe(this,"kind","image"),this._src=r}async*[Qo=Symbol.asyncIterator](r){const a=await _u(this._src),i=fi(r);yield new Jr(a,i.getSourceOptions(a),()=>{URL.revokeObjectURL(a.src),a.src=""})}};Au([ai(30)],qo.prototype,Qo,1);var Fu=Object.defineProperty,Du=Object.getOwnPropertyDescriptor,Iu=(r,a,i,c)=>{for(var y=c>1?void 0:c?Du(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(y=(c?w(a,i,y):w(y))||y);return c&&y&&Fu(a,i,y),y},ea;const ta=(et=class{constructor(r){if(fe(this,"_stream"),fe(this,"kind","stream"),!et.cache.has(r))et.cache.set(r,this);else return et.cache.get(r);this._stream=r}async*[ea=Symbol.asyncIterator](r){const a=fi(r);if("MediaStreamTrackProcessor"in window){const i=new MediaStreamTrackProcessor({track:this._stream.getVideoTracks()[0]}).readable.getReader();try{for(;;){const{done:c,value:y}=await i.read();if(c)return;const v=new VideoFrame(y,a.getFrameOptions(y));v.horizontalFlip=r?.horizontalFlip??!0,y.close(),yield v}}finally{i.releaseLock()}}else{const i=await Hr(this._stream),c="requestVideoFrameCallback"in i?i.requestVideoFrameCallback.bind(i):requestAnimationFrame;for(;!i.paused;)await new Promise(c),yield new Jr(i,a.getSourceOptions(i));URL.revokeObjectURL(i.src),i.src="",i.srcObject=null}}stop(){for(const r of this._stream.getVideoTracks())r.stop();this._stream&&et.cache.delete(this._stream)}},fe(et,"cache",new WeakMap),et);Iu([ai(30)],ta.prototype,ea,1);let Qr=ta;var Lu=Object.defineProperty,Mu=Object.getOwnPropertyDescriptor,ju=(r,a,i,c)=>{for(var y=c>1?void 0:c?Mu(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(y=(c?w(a,i,y):w(y))||y);return c&&y&&Lu(a,i,y),y},ra;const na={loop:!1};class ia{constructor(a,i){fe(this,"_src"),fe(this,"_options"),fe(this,"_video",null),fe(this,"kind","video"),this._src=a,this._options={...na,...i}}async*[ra=Symbol.asyncIterator](a){const i=await(this._video??(this._video=Hr(this._src,this._options))),c=fi(a),y="requestVideoFrameCallback"in i?i.requestVideoFrameCallback.bind(i):requestAnimationFrame;for(;!i.paused;)await new Promise(y),yield new Jr(i,c.getSourceOptions(i))}stop(){this._video&&this._video.then(a=>(URL.revokeObjectURL(a.src),a.src="",a.srcObject=null)),this._video=null}}ju([ai(30)],ia.prototype,ra,1);const Nu=`#define GLSLIFY 1
attribute vec2 a_position;
varying vec2 v_tex_uv;

void main() {
  v_tex_uv.x = (a_position.x + 1.) * .5;
  v_tex_uv.y = 1. - (a_position.y + 1.) * .5;
  gl_Position = vec4(a_position, 0., 1.);
}
`,Bu=`precision highp float;
#define GLSLIFY 1

varying vec2 v_tex_uv;

uniform sampler2D u_texture;
uniform vec2 u_viewsize;

/**
 * u_filters.x - denoising algorithm to use
 *   1 - FSR
 *   2 - Bilateral
 *   any other value - none
 * u_filters.y - light correction coefficient in [0, 2]
 *   1 - no light correction
 */
uniform vec2 u_filters;

// https://github.com/glslify/glslify#importing-a-glsl-module
// https://github.com/glslify/glslify#passing-references-between-modules
// Copyright (c) 2021 Advanced Micro Devices, Inc. All rights reserved.
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
//
// FidelityFX FSR v1.0.2 by AMD
// ported to mpv by agyild - https://gist.github.com/agyild/82219c545228d70c5604f865ce0b0ce5
// ported to WebGL by goingdigital - https://www.shadertoy.com/view/stXSWB
// using colorspace functions from tobspr - https://github.com/tobspr/GLSL-Color-Spaces/blob/master/ColorSpaces.inc.glsl

#define SHARPENING 2.0 // Sharpening intensity: Adjusts sharpening intensity by averaging the original pixels to the sharpened result. 1.0 is the unmodified default. 0.0 to 1.0.
#define CONTRAST 2.0 // Adjusts the range the shader adapts to high contrast (0 is not all the way off). Higher values = more high contrast sharpening. 0.0 to 1.0.
#define PERFORMANCE 1 // Whether to use optimizations for performance with loss of quality

// Used to convert from linear RGB to XYZ space
const mat3 RGB_2_XYZ_2717090884 = (mat3(
  0.4124564, 0.2126729, 0.0193339,
  0.3575761, 0.7151522, 0.1191920,
  0.1804375, 0.0721750, 0.9503041
));

// Used to convert from XYZ to linear RGB space
const mat3 XYZ_2_RGB_2717090884 = (mat3(
   3.2404542,-0.9692660, 0.0556434,
  -1.5371385, 1.8760108,-0.2040259,
  -0.4985314, 0.0415560, 1.0572252
));
// Converts a color from linear RGB to XYZ space
vec3 rgb_to_xyz_2717090884(vec3 rgb) {
  return RGB_2_XYZ_2717090884 * rgb;
}

// Converts a color from XYZ to linear RGB space
vec3 xyz_to_rgb_2717090884(vec3 xyz) {
  return XYZ_2_RGB_2717090884 * xyz;
}

/* EASU stage
*
* This takes a reduced resolution source, and scales it up while preserving detail.
*
* Updates:
*   stretch definition fixed. Thanks nehon for the bug report!
*/

vec3 FsrEasuCF(vec2 p) {
  vec2 uv = (p + .5) / u_viewsize;
  vec4 color = texture2D(u_texture, uv);
    return rgb_to_xyz_2717090884(color.rgb);
}

/**** EASU ****/
void FsrEasuCon(
  out vec4 con0,
  out vec4 con1,
  out vec4 con2,
  out vec4 con3,
  // This the rendered image resolution being upscaled
  vec2 inputViewportInPixels,
  // This is the resolution of the resource containing the input image (useful for dynamic resolution)
  vec2 inputSizeInPixels,
  // This is the display resolution which the input image gets upscaled to
  vec2 outputSizeInPixels
)
{
  // Output integer position to a pixel position in viewport.
  con0 = vec4(
    inputViewportInPixels.x/outputSizeInPixels.x,
    inputViewportInPixels.y/outputSizeInPixels.y,
    .5*inputViewportInPixels.x/outputSizeInPixels.x-.5,
    .5*inputViewportInPixels.y/outputSizeInPixels.y-.5
  );
  // Viewport pixel position to normalized image space.
  // This is used to get upper-left of 'F' tap.
  con1 = vec4(1.,1.,1.,-1.)/inputSizeInPixels.xyxy;
  // Centers of gather4, first offset from upper-left of 'F'.
  //      +---+---+
  //      |   |   |
  //      +--(0)--+
  //      | b | c |
  //  +---F---+---+---+
  //  | e | f | g | h |
  //  +--(1)--+--(2)--+
  //  | i | j | k | l |
  //  +---+---+---+---+
  //      | n | o |
  //      +--(3)--+
  //      |   |   |
  //      +---+---+
  // These are from (0) instead of 'F'.
  con2 = vec4(-1.,2.,1.,2.)/inputSizeInPixels.xyxy;
  con3 = vec4(0.,4.,0.,0.)/inputSizeInPixels.xyxy;
}

// Filtering for a given tap for the scalar.
void FsrEasuTapF(
  inout vec3 aC, // Accumulated color, with negative lobe.
  inout float aW, // Accumulated weight.
  vec2 off_0, // Pixel offset from resolve position to tap.
  vec2 dir_0, // Gradient direction.
  vec2 len_0, // Length.
  float lob_0, // Negative lobe strength.
  float clp_0, // Clipping point.
  vec3 c_0
)
{
  // Tap color.
  // Rotate offset by direction.
  vec2 v = vec2(dot(off_0, dir_0), dot(off_0,vec2(-dir_0.y,dir_0.x)));
  // Anisotropy.
  v *= len_0;
  // Compute distance^2.
  float d2 = min(dot(v,v),clp_0);
  // Limit to the window as at corner, 2 taps can easily be outside.
  // Approximation of lancos2 without sin() or rcp(), or sqrt() to get x.
  //  (25/16 * (2/5 * x^2 - 1)^2 - (25/16 - 1)) * (1/4 * x^2 - 1)^2
  //  |_______________________________________|   |_______________|
  //                   base                             window
  // The general form of the 'base' is,
  //  (a*(b*x^2-1)^2-(a-1))
  // Where 'a=1/(2*b-b^2)' and 'b' moves around the negative lobe.
  float wB = .4 * d2 - 1.;
  float wA = lob_0 * d2 -1.;
  wB *= wB;
  wA *= wA;
  wB = 1.5625*wB-.5625;
  float w=  wB * wA;
  // Do weighted average.
  aC += c_0*w;
  aW += w;
}

//------------------------------------------------------------------------------------------------------------------------------
// Accumulate direction and length.
void FsrEasuSetF(
    inout vec2 dir,
    inout float len,
    float w,
    float lA,float lB,float lC,float lD,float lE
)
{
  // Direction is the '+' diff.
  //    a
  //  b c d
  //    e
  // Then takes magnitude from abs average of both sides of 'c'.
  // Length converts gradient reversal to 0, smoothly to non-reversal at 1, shaped, then adding horz and vert terms.
  float lenX = max(abs(lD - lC), abs(lC - lB));
  float dirX = lD - lB;
  dir.x += dirX * w;
  lenX = clamp(abs(dirX)/lenX,0.,1.);
  lenX *= lenX;
  len += lenX * w;
  // Repeat for the y axis.
  float lenY = max(abs(lE - lC), abs(lC - lA));
  float dirY = lE - lA;
  dir.y += dirY * w;
  lenY = clamp(abs(dirY) / lenY,0.,1.);
  lenY *= lenY;
  len += lenY * w;
}

//------------------------------------------------------------------------------------------------------------------------------
void FsrEasuF(
  out vec3 pix,
  vec2 ip, // Integer pixel position in output.
  // Constants generated by FsrEasuCon().
  vec4 con0, // xy = output to input scale, zw = first pixel offset correction
  vec4 con1_0,
  vec4 con2_0,
  vec4 con3_0
)
{
  //------------------------------------------------------------------------------------------------------------------------------
  // Get position of 'f'.
  vec2 pp = ip * con0.xy + con0.zw; // Corresponding input pixel/subpixel
  vec2 fp = floor(pp);// fp = source nearest pixel
  pp -= fp; // pp = source subpixel

  //------------------------------------------------------------------------------------------------------------------------------
  // 12-tap kernel.
  //    b c
  //  e f g h
  //  i j k l
  //    n o
  // Gather 4 ordering.
  //  a b
  //  r g
  vec2 p0 = fp * con1_0.xy + con1_0.zw;
  
  // These are from p0 to avoid pulling two constants on pre-Navi hardware.
  vec2 p1 = p0 + con2_0.xy;
  vec2 p2 = p0 + con2_0.zw;
  vec2 p3 = p0 + con3_0.xy;

  // TextureGather is not available on WebGL2
  vec4 off = vec4(-.5,.5,-.5,.5)*con1_0.xxyy;
  // textureGather to texture offsets
  // x=west y=east z=north w=south
  vec3 bC = FsrEasuCF(p0 + off.xw); float bL = bC.g + 0.5 *(bC.r + bC.b);
  vec3 cC = FsrEasuCF(p0 + off.yw); float cL = cC.g + 0.5 *(cC.r + cC.b);
  vec3 iC = FsrEasuCF(p1 + off.xw); float iL = iC.g + 0.5 *(iC.r + iC.b);
  vec3 jC = FsrEasuCF(p1 + off.yw); float jL = jC.g + 0.5 *(jC.r + jC.b);
  vec3 fC = FsrEasuCF(p1 + off.yz); float fL = fC.g + 0.5 *(fC.r + fC.b);
  vec3 eC = FsrEasuCF(p1 + off.xz); float eL = eC.g + 0.5 *(eC.r + eC.b);
  vec3 kC = FsrEasuCF(p2 + off.xw); float kL = kC.g + 0.5 *(kC.r + kC.b);
  vec3 lC = FsrEasuCF(p2 + off.yw); float lL = lC.g + 0.5 *(lC.r + lC.b);
  vec3 hC = FsrEasuCF(p2 + off.yz); float hL = hC.g + 0.5 *(hC.r + hC.b);
  vec3 gC = FsrEasuCF(p2 + off.xz); float gL = gC.g + 0.5 *(gC.r + gC.b);
  vec3 oC = FsrEasuCF(p3 + off.yz); float oL = oC.g + 0.5 *(oC.r + oC.b);
  vec3 nC = FsrEasuCF(p3 + off.xz); float nL = nC.g + 0.5 *(nC.r + nC.b);
 
  //------------------------------------------------------------------------------------------------------------------------------
  // Simplest multi-channel approximate luma possible (luma times 2, in 2 FMA/MAD).
  // Accumulate for bilinear interpolation.
  vec2 dir = vec2(0.);
  float len = 0.;

  FsrEasuSetF(dir, len, (1.-pp.x)*(1.-pp.y), bL, eL, fL, gL, jL);
  FsrEasuSetF(dir, len,    pp.x  *(1.-pp.y), cL, fL, gL, hL, kL);
  FsrEasuSetF(dir, len, (1.-pp.x)*  pp.y  , fL, iL, jL, kL, nL);
  FsrEasuSetF(dir, len,    pp.x  *  pp.y  , gL, jL, kL, lL, oL);

  //------------------------------------------------------------------------------------------------------------------------------
  // Normalize with approximation, and cleanup close to zero.
  vec2 dir2 = dir * dir;
  float dirR = dir2.x + dir2.y;
  bool zro = dirR < (1.0/32768.0);
  dirR = inversesqrt(dirR);
#if (PERFORMANCE == 1)
  if (zro) {
    vec4 w = vec4(0.0);
    w.x = (1.0 - pp.x) * (1.0 - pp.y);
    w.y =        pp.x  * (1.0 - pp.y);
    w.z = (1.0 - pp.x) *        pp.y;
    w.w =        pp.x  *        pp.y;
    pix.r = clamp(dot(w, vec4(fL, gL, jL, kL)), 0.0, 1.0);
    return;
  }
#elif (PERFORMANCE == 0)
  dirR = zro ? 1.0 : dirR;
  dir.x = zro ? 1.0 : dir.x;
#endif
  dir *= vec2(dirR);
  // Transform from {0 to 2} to {0 to 1} range, and shape with square.
  len = len * 0.5;
  len *= len;
  // Stretch kernel {1.0 vert|horz, to sqrt(2.0) on diagonal}.
  float stretch = dot(dir,dir) / (max(abs(dir.x), abs(dir.y)));
  // Anisotropic length after rotation,
  //  x := 1.0 lerp to 'stretch' on edges
  //  y := 1.0 lerp to 2x on edges
  vec2 len2 = vec2(1. +(stretch-1.0)*len, 1. -.5 * len);
  // Based on the amount of 'edge',
  // the window shifts from +/-{sqrt(2.0) to slightly beyond 2.0}.
  float lob = .5 - .29 * len;
  // Set distance^2 clipping point to the end of the adjustable window.
  float clp = 1./lob;

  //------------------------------------------------------------------------------------------------------------------------------
  // Accumulation mixed with min/max of 4 nearest.
  //    b c
  //  e f g h
  //  i j k l
  //    n o
  // Accumulation.
  vec3 aC = vec3(0);
  float aW = 0.;
  FsrEasuTapF(aC, aW, vec2( 0.,-1.)-pp, dir, len2, lob, clp, bC);
  FsrEasuTapF(aC, aW, vec2( 1.,-1.)-pp, dir, len2, lob, clp, cC);
  FsrEasuTapF(aC, aW, vec2(-1., 1.)-pp, dir, len2, lob, clp, iC);
  FsrEasuTapF(aC, aW, vec2( 0., 1.)-pp, dir, len2, lob, clp, jC);
  FsrEasuTapF(aC, aW, vec2( 0., 0.)-pp, dir, len2, lob, clp, fC);
  FsrEasuTapF(aC, aW, vec2(-1., 0.)-pp, dir, len2, lob, clp, eC);
  FsrEasuTapF(aC, aW, vec2( 1., 1.)-pp, dir, len2, lob, clp, kC);
  FsrEasuTapF(aC, aW, vec2( 2., 1.)-pp, dir, len2, lob, clp, lC);
  FsrEasuTapF(aC, aW, vec2( 2., 0.)-pp, dir, len2, lob, clp, hC);
  FsrEasuTapF(aC, aW, vec2( 1., 0.)-pp, dir, len2, lob, clp, gC);
  FsrEasuTapF(aC, aW, vec2( 1., 2.)-pp, dir, len2, lob, clp, oC);
  FsrEasuTapF(aC, aW, vec2( 0., 2.)-pp, dir, len2, lob, clp, nC);
  //------------------------------------------------------------------------------------------------------------------------------
  // Normalize and dering.
#if (PERFORMANCE == 1)
pix = aC/aW;
#elif (PERFORMANCE == 0)
  vec3 min4 = min(min(fC,gC),min(jC,kC));
  vec3 max4 = max(max(fC,gC),max(jC,kC));
  pix=min(max4,max(min4,aC/aW));
#endif
}

void EASU( out vec4 fragColor, in vec2 fragCoord )
{
  vec3 c;
  vec4 con0,con1,con2,con3;
  
  // "rendersize" refers to size of source image before upscaling.
  vec2 rendersize = u_viewsize;
  FsrEasuCon(
    con0, con1, con2, con3, rendersize, rendersize, rendersize
  );
  FsrEasuF(c, fragCoord, con0, con1, con2, con3);
  
  fragColor = vec4(xyz_to_rgb_2717090884(c.xyz), 1);
}

vec4 getPixel(vec2 pos) {
  vec2 coord = (pos + .5) / u_viewsize;
  coord.y = 1.0 - coord.y;
  return texture2D(u_texture, coord);
}

vec4 fsr_easu_2717090884(vec2 uv) {
  vec4 e = getPixel(gl_FragCoord.xy);

    
  vec4 e_xyz = vec4(rgb_to_xyz_2717090884(e.rgb), 1);
  EASU(e_xyz, (gl_FragCoord.xy + 0.5) / u_viewsize);  
  
  // fetch a 3x3 neighborhood around the pixel 'e',
  //  a b c
  //  d(e)f
  //  g h i 
  vec3 a = getPixel(gl_FragCoord.xy + vec2(-1.0,-1.0)).rgb;
  vec3 b = getPixel(gl_FragCoord.xy + vec2( 0.0,-1.0)).rgb;
  vec3 c = getPixel(gl_FragCoord.xy + vec2( 1.0,-1.0)).rgb;
  vec3 f = getPixel(gl_FragCoord.xy + vec2( 1.0, 0.0)).rgb;
  vec3 g = getPixel(gl_FragCoord.xy + vec2(-1.0, 1.0)).rgb;
  vec3 h = getPixel(gl_FragCoord.xy + vec2( 0.0, 1.0)).rgb;
  vec3 d = getPixel(gl_FragCoord.xy + vec2(-1.0, 0.0)).rgb;
  vec3 i = getPixel(gl_FragCoord.xy + vec2( 1.0, 1.0)).rgb;;
  // Soft min and max.
  //  a b c     b
  //  d e f * 0.5 + d e f * 0.5
  //  g h i     h
  // These are 2.0x bigger (factored out the extra multiply).

  vec3 mnRGB = min(min(min(d, e.rgb), min(f, b)), h);
  vec3 mnRGB2 = min(mnRGB, min(min(a, c), min(g, i)));
  mnRGB += mnRGB2;

  vec3 mxRGB = max(max(max(d, e.rgb), max(f, b)), h);
  vec3 mxRGB2 = max(mxRGB, max(max(a, c), max(g, i)));
  mxRGB += mxRGB2;

  // Smooth minimum distance to signal limit divided by smooth max.
  vec3 rcpMRGB = 1.0 / mxRGB;
  vec3 ampRGB = clamp(min(mnRGB, 2.0 - mxRGB) * rcpMRGB, 0.0, 1.0);

  // Shaping amount of sharpening.
  ampRGB = inversesqrt(ampRGB);

  float peak = -3.0 * clamp(CONTRAST, 0.0, 1.0) + 8.0;
  vec3 wRGB = -(1.0 / (ampRGB * peak));

  vec3 rcpWeightRGB = 1.0 / (4.0 * wRGB + 1.0);

  //          0 w 0
  //  Filter shape: w 1 w
  //          0 w 0
  vec3 window = (b + d) + (f + h);
  vec3 outColor = clamp((window * wRGB + e.rgb) * rcpWeightRGB, 0.0, 1.0);

  return vec4(mix(e.rgb, outColor, SHARPENING), e.a);
}

// https://github.com/glslify/glslify#exporting-a-glsl-module

#define DIFF 1.0
#define RADIUS 4.0

void bilateral_iter_3977570374(vec2 random_dir, vec2 radius, float diff, vec4 pixel, vec2 uv, inout vec3 result, inout float totalWeight)
{
  vec2 dir = random_dir * radius;
  vec3 randomPixel = texture2D(u_texture, uv + dir).xyz;
  vec3 delta = randomPixel - pixel.rgb;
  float weight = exp(-dot(delta, delta) / diff);
  result += randomPixel * weight;
  totalWeight += weight;
}

vec4 bilateral(vec2 uv)
{
  vec2 radius = (RADIUS / u_viewsize);
  float diff = DIFF / 255.0;
  vec4 pixel = texture2D(u_texture, uv);
  vec3 result = vec3(0.0, 0.0, 0.0);
  float totalWeight = 0.0;

  // uroll loop and substitute precalculated random vectors for GLSL 1.0 ES:

  bilateral_iter_3977570374(vec2(-0.886051297,0.447155535), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.270759493,0.537728608), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.896959424,0.440607518), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.804274619,0.125076547), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.373693645,0.240383312), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.850325704,-0.192106694), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.453608066,0.889671504), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.280496657,0.206442386), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.840040743,-0.36367026), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.151598319,-0.884027064), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.221440807,0.593896627), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.797481239,-0.243254974), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.48824361,0.225083455), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.0387817062,0.838459492), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(0.92897892,-0.133588716), radius, diff, pixel, uv, result, totalWeight);
  bilateral_iter_3977570374(vec2(-0.693672359,-0.706737161), radius, diff, pixel, uv, result, totalWeight);
  
  result = result / totalWeight;    
  return vec4(result, pixel.a);
}

// https://github.com/glslify/glslify#exporting-a-glsl-module

vec3 rgb2hsv(vec3 c)
{
  vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
  float d = q.x - min(q.w, q.y);
  float e = 1.0e-10;
  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);
}

vec3 hsv2rgb(vec3 c)
{
  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

vec4 light_correction_1117569599(vec4 c, float s)
{
  vec3 hsv = rgb2hsv(c.rgb);
  hsv.y = pow(hsv.y, pow(s, -0.5));
  hsv.z = pow(hsv.z, s);
  vec3 rgb = hsv2rgb(hsv);
  return vec4(rgb, c.a);
}

// https://github.com/glslify/glslify#exporting-a-glsl-module

void main() {
  vec4 c;

  if (u_filters.x == 1.)
    c = fsr_easu_2717090884(v_tex_uv);
  else if (u_filters.x == 2.)
    c = bilateral(v_tex_uv);
  else
    c = texture2D(u_texture, v_tex_uv);

  if (u_filters.y != 1.)
    c = light_correction_1117569599(c, u_filters.y);

  gl_FragColor = c;
}`,Ou=(r,a,i)=>{const c=r.createProgram();return r.attachShader(c,a),r.attachShader(c,i),r.linkProgram(c),r.useProgram(c),c},oa=(r,a,i)=>{const c=r.createShader(a);return r.shaderSource(c,i),r.compileShader(c),c},Uu=r=>{const a=r.createTexture();return r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGB,1,1,0,r.RGB,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.bindTexture(r.TEXTURE_2D,null),a},aa=(r,a)=>{let i=0,c=1;const y=document.createElement("canvas"),v=y.captureStream(30),w=y.getContext("webgl"),_=oa(w,w.VERTEX_SHADER,Nu),D=oa(w,w.FRAGMENT_SHADER,Bu),I=Ou(w,_,D),O=Uu(w);w.bindTexture(w.TEXTURE_2D,O);const ee=w.getAttribLocation(I,"a_position"),$=w.createBuffer();w.bindBuffer(w.ARRAY_BUFFER,$),w.bufferData(w.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),w.STATIC_DRAW),w.enableVertexAttribArray(ee),w.vertexAttribPointer(ee,2,w.FLOAT,!1,0,0);const re=w.getUniformLocation(I,"u_viewsize"),X=w.getUniformLocation(I,"u_filters");w.uniform2fv(X,new Float32Array([i,c])),Hr(r).then(me=>{const be=me.requestVideoFrameCallback?.bind(me)||oi.requestAnimationFrame;(function Q(){me.ended||!v.active||(be(Q),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,me),(y.width!==me.videoWidth||y.height!==me.videoHeight)&&(w.viewport(0,0,y.width=me.videoWidth,y.height=me.videoHeight),w.uniform2fv(re,new Float32Array([y.width,y.height]))),w.drawArrays(w.TRIANGLES,0,6))})()}),w.deleteProgram(I),w.deleteShader(D),w.deleteShader(_);const we={stream:v,denoise(me){w.uniform2fv(X,new Float32Array([i=me,c]))},exposureCompensation(me){w.uniform2fv(X,new Float32Array([i,c=me]))}};if(a)for(const[me,be]of Object.entries(a))we[me](be);return we},Wu=typeof screen<"u"&&screen.height>screen.width,qr={facingMode:"user",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},resizeMode:{ideal:"crop-and-scale"}};Wu&&(delete qr.width,delete qr.height);class zu{constructor(a){fe(this,"_stream",null),fe(this,"_constraints"),fe(this,"_preferences",{}),fe(this,"_enhancer",null),fe(this,"kind","stream"),this._constraints={...qr,...a}}get active(){return!!this._stream}denoise(a){this._preferences.denoise=Number(a),this._enhancer?.denoise(this._preferences.denoise)}setExposureCompensation(a){this._preferences.exposureCompensation=a,this._enhancer?.exposureCompensation(this._preferences.exposureCompensation)}async start(){return await(this._stream??(this._stream=sa(this._constraints))),this}async*[Symbol.asyncIterator](a){const i=await(this._stream??(this._stream=sa(this._constraints))),c=this._enhancer=di(this._preferences)?aa(i,this._preferences):null;let y=new Qr(c?c.stream:i)[Symbol.asyncIterator]({horizontalFlip:!0,...a}),v;for(;;){if(!this._enhancer&&di(this._preferences)){const D=this._enhancer=aa(i,this._preferences);y=new Qr(D.stream)[Symbol.asyncIterator]({horizontalFlip:!0,...a})}this._enhancer&&!di(this._preferences)&&(this._enhancer.stream.getTracks().forEach(D=>D.stop()),this._enhancer=null,y=new Qr(i)[Symbol.asyncIterator]({horizontalFlip:!0,...a}));const{done:w,value:_}=await y.next(v);if(w)break;v=yield _}this.stop()}stop(){this._stream&&this._stream.then(a=>a.getTracks().forEach(i=>i.stop())),this._enhancer&&this._enhancer.stream.getTracks().forEach(a=>a.stop()),this._stream=null,this._enhancer=null}}const sa=async r=>{if(typeof navigator.mediaDevices>"u")throw new Error(`SecureContext is required to access webcam
It\u2018s likely you need to set up HTTPS/TLS for your website
See https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Encryption_based_security for details `);return await navigator.mediaDevices.getUserMedia({video:r})},di=r=>typeof r.exposureCompensation=="number"&&r.exposureCompensation!==1||r.denoise===1||r.denoise===2,Vu={createVideoElement:Hr};let Gu="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",la=(r=21)=>{let a="",i=r;for(;i--;)a+=Gu[Math.random()*64|0];return a};const ua="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBzPVVpbnQ4QXJyYXkseD1VaW50MTZBcnJheSxPPVVpbnQzMkFycmF5LEg9bmV3IHMoWzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMCwwLDAsMF0pLEk9bmV3IHMoWzAsMCwwLDAsMSwxLDIsMiwzLDMsNCw0LDUsNSw2LDYsNyw3LDgsOCw5LDksMTAsMTAsMTEsMTEsMTIsMTIsMTMsMTMsMCwwXSksbDE9bmV3IHMoWzE2LDE3LDE4LDAsOCw3LDksNiwxMCw1LDExLDQsMTIsMywxMywyLDE0LDEsMTVdKSxKPWZ1bmN0aW9uKHIsdCl7Zm9yKHZhciBhPW5ldyB4KDMxKSxuPTA7bjwzMTsrK24pYVtuXT10Kz0xPDxyW24tMV07Zm9yKHZhciB2PW5ldyBPKGFbMzBdKSxuPTE7bjwzMDsrK24pZm9yKHZhciBpPWFbbl07aTxhW24rMV07KytpKXZbaV09aS1hW25dPDw1fG47cmV0dXJuW2Esdl19LEs9SihILDIpLFE9S1swXSxjMT1LWzFdO1FbMjhdPTI1OCxjMVsyNThdPTI4O2Zvcih2YXIgczE9SihJLDApLGQxPXMxWzBdLFU9bmV3IHgoMzI3NjgpLHU9MDt1PDMyNzY4OysrdSl7dmFyIEM9KHUmNDM2OTApPj4+MXwodSYyMTg0NSk8PDE7Qz0oQyY1MjQyOCk+Pj4yfChDJjEzMTA3KTw8MixDPShDJjYxNjgwKT4+PjR8KEMmMzg1NSk8PDQsVVt1XT0oKEMmNjUyODApPj4+OHwoQyYyNTUpPDw4KT4+PjF9Zm9yKHZhciB6PWZ1bmN0aW9uKHQsYSxuKXtmb3IodmFyIHY9dC5sZW5ndGgsaT0wLGM9bmV3IHgoYSk7aTx2OysraSl0W2ldJiYrK2NbdFtpXS0xXTt2YXIgZj1uZXcgeChhKTtmb3IoaT0wO2k8YTsrK2kpZltpXT1mW2ktMV0rY1tpLTFdPDwxO3ZhciBvO2lmKG4pe289bmV3IHgoMTw8YSk7dmFyIGU9MTUtYTtmb3IoaT0wO2k8djsrK2kpaWYodFtpXSlmb3IodmFyIGw9aTw8NHx0W2ldLGI9YS10W2ldLGQ9Zlt0W2ldLTFdKys8PGIseT1kfCgxPDxiKS0xO2Q8PXk7KytkKW9bVVtkXT4+PmVdPWx9ZWxzZSBmb3Iobz1uZXcgeCh2KSxpPTA7aTx2OysraSl0W2ldJiYob1tpXT1VW2ZbdFtpXS0xXSsrXT4+PjE1LXRbaV0pO3JldHVybiBvfSxCPW5ldyBzKDI4OCksdT0wO3U8MTQ0OysrdSlCW3VdPTg7Zm9yKHZhciB1PTE0NDt1PDI1NjsrK3UpQlt1XT05O2Zvcih2YXIgdT0yNTY7dTwyODA7Kyt1KUJbdV09Nztmb3IodmFyIHU9MjgwO3U8Mjg4OysrdSlCW3VdPTg7Zm9yKHZhciBWPW5ldyBzKDMyKSx1PTA7dTwzMjsrK3UpVlt1XT01O3ZhciBnMT16KEIsOSwxKSx3MT16KFYsNSwxKSxXPWZ1bmN0aW9uKHIpe2Zvcih2YXIgdD1yWzBdLGE9MTthPHIubGVuZ3RoOysrYSlyW2FdPnQmJih0PXJbYV0pO3JldHVybiB0fSxoPWZ1bmN0aW9uKHIsdCxhKXt2YXIgbj10Lzh8MDtyZXR1cm4ocltuXXxyW24rMV08PDgpPj4odCY3KSZhfSxYPWZ1bmN0aW9uKHIsdCl7dmFyIGE9dC84fDA7cmV0dXJuKHJbYV18clthKzFdPDw4fHJbYSsyXTw8MTYpPj4odCY3KX0saDE9ZnVuY3Rpb24ocil7cmV0dXJuKHIrNykvOHwwfSxqPWZ1bmN0aW9uKHIsdCxhKXsodD09bnVsbHx8dDwwKSYmKHQ9MCksKGE9PW51bGx8fGE+ci5sZW5ndGgpJiYoYT1yLmxlbmd0aCk7dmFyIG49bmV3KHIuQllURVNfUEVSX0VMRU1FTlQ9PTI/eDpyLkJZVEVTX1BFUl9FTEVNRU5UPT00P086cykoYS10KTtyZXR1cm4gbi5zZXQoci5zdWJhcnJheSh0LGEpKSxufSxtMT1bInVuZXhwZWN0ZWQgRU9GIiwiaW52YWxpZCBibG9jayB0eXBlIiwiaW52YWxpZCBsZW5ndGgvbGl0ZXJhbCIsImludmFsaWQgZGlzdGFuY2UiLCJzdHJlYW0gZmluaXNoZWQiLCJubyBzdHJlYW0gaGFuZGxlciIsLCJubyBjYWxsYmFjayIsImludmFsaWQgVVRGLTggZGF0YSIsImV4dHJhIGZpZWxkIHRvbyBsb25nIiwiZGF0ZSBub3QgaW4gcmFuZ2UgMTk4MC0yMDk5IiwiZmlsZW5hbWUgdG9vIGxvbmciLCJzdHJlYW0gZmluaXNoaW5nIiwiaW52YWxpZCB6aXAgZGF0YSJdLGc9ZnVuY3Rpb24ocix0LGEpe3ZhciBuPW5ldyBFcnJvcih0fHxtMVtyXSk7aWYobi5jb2RlPXIsRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJkVycm9yLmNhcHR1cmVTdGFja1RyYWNlKG4sZyksIWEpdGhyb3cgbjtyZXR1cm4gbn0sYjE9ZnVuY3Rpb24ocix0LGEpe3ZhciBuPXIubGVuZ3RoO2lmKCFufHxhJiZhLmYmJiFhLmwpcmV0dXJuIHR8fG5ldyBzKDApO3ZhciB2PSF0fHxhLGk9IWF8fGEuaTthfHwoYT17fSksdHx8KHQ9bmV3IHMobiozKSk7dmFyIGM9ZnVuY3Rpb24odTEpe3ZhciB2MT10Lmxlbmd0aDtpZih1MT52MSl7dmFyIGYxPW5ldyBzKE1hdGgubWF4KHYxKjIsdTEpKTtmMS5zZXQodCksdD1mMX19LGY9YS5mfHwwLG89YS5wfHwwLGU9YS5ifHwwLGw9YS5sLGI9YS5kLGQ9YS5tLHk9YS5uLFI9bio4O2Rve2lmKCFsKXtmPWgocixvLDEpO3ZhciBZPWgocixvKzEsMyk7aWYobys9MyxZKWlmKFk9PTEpbD1nMSxiPXcxLGQ9OSx5PTU7ZWxzZSBpZihZPT0yKXt2YXIgUz1oKHIsbywzMSkrMjU3LHIxPWgocixvKzEwLDE1KSs0LHQxPVMraChyLG8rNSwzMSkrMTtvKz0xNDtmb3IodmFyIEY9bmV3IHModDEpLEc9bmV3IHMoMTkpLHc9MDt3PHIxOysrdylHW2wxW3ddXT1oKHIsbyt3KjMsNyk7bys9cjEqMztmb3IodmFyIGExPVcoRyksQjE9KDE8PGExKS0xLFIxPXooRyxhMSwxKSx3PTA7dzx0MTspe3ZhciBuMT1SMVtoKHIsbyxCMSldO28rPW4xJjE1O3ZhciBwPW4xPj4+NDtpZihwPDE2KUZbdysrXT1wO2Vsc2V7dmFyIFQ9MCxOPTA7Zm9yKHA9PTE2PyhOPTMraChyLG8sMyksbys9MixUPUZbdy0xXSk6cD09MTc/KE49MytoKHIsbyw3KSxvKz0zKTpwPT0xOCYmKE49MTEraChyLG8sMTI3KSxvKz03KTtOLS07KUZbdysrXT1UfX12YXIgaTE9Ri5zdWJhcnJheSgwLFMpLF89Ri5zdWJhcnJheShTKTtkPVcoaTEpLHk9VyhfKSxsPXooaTEsZCwxKSxiPXooXyx5LDEpfWVsc2UgZygxKTtlbHNle3ZhciBwPWgxKG8pKzQsTD1yW3AtNF18cltwLTNdPDw4LFo9cCtMO2lmKFo+bil7aSYmZygwKTticmVha312JiZjKGUrTCksdC5zZXQoci5zdWJhcnJheShwLFopLGUpLGEuYj1lKz1MLGEucD1vPVoqOCxhLmY9Zjtjb250aW51ZX1pZihvPlIpe2kmJmcoMCk7YnJlYWt9fXYmJmMoZSsxMzEwNzIpO2Zvcih2YXIgWTE9KDE8PGQpLTEsRjE9KDE8PHkpLTEsJD1vOzskPW8pe3ZhciBUPWxbWChyLG8pJlkxXSxrPVQ+Pj40O2lmKG8rPVQmMTUsbz5SKXtpJiZnKDApO2JyZWFrfWlmKFR8fGcoMiksazwyNTYpdFtlKytdPWs7ZWxzZSBpZihrPT0yNTYpeyQ9byxsPW51bGw7YnJlYWt9ZWxzZXt2YXIgbzE9ay0yNTQ7aWYoaz4yNjQpe3ZhciB3PWstMjU3LE09SFt3XTtvMT1oKHIsbywoMTw8TSktMSkrUVt3XSxvKz1NfXZhciBQPWJbWChyLG8pJkYxXSxEPVA+Pj40O1B8fGcoMyksbys9UCYxNTt2YXIgXz1kMVtEXTtpZihEPjMpe3ZhciBNPUlbRF07Xys9WChyLG8pJigxPDxNKS0xLG8rPU19aWYobz5SKXtpJiZnKDApO2JyZWFrfXYmJmMoZSsxMzEwNzIpO2Zvcih2YXIgZTE9ZStvMTtlPGUxO2UrPTQpdFtlXT10W2UtX10sdFtlKzFdPXRbZSsxLV9dLHRbZSsyXT10W2UrMi1fXSx0W2UrM109dFtlKzMtX107ZT1lMX19YS5sPWwsYS5wPSQsYS5iPWUsYS5mPWYsbCYmKGY9MSxhLm09ZCxhLmQ9YixhLm49eSl9d2hpbGUoIWYpO3JldHVybiBlPT10Lmxlbmd0aD90OmoodCwwLGUpfSx5MT1uZXcgcygwKSxFPWZ1bmN0aW9uKHIsdCl7cmV0dXJuIHJbdF18clt0KzFdPDw4fSxtPWZ1bmN0aW9uKHIsdCl7cmV0dXJuKHJbdF18clt0KzFdPDw4fHJbdCsyXTw8MTZ8clt0KzNdPDwyNCk+Pj4wfSxxPWZ1bmN0aW9uKHIsdCl7cmV0dXJuIG0ocix0KSttKHIsdCs0KSo0Mjk0OTY3Mjk2fTtmdW5jdGlvbiBFMShyLHQpe3JldHVybiBiMShyLHQpfXZhciBBPXR5cGVvZiBUZXh0RGVjb2RlcjwidSImJm5ldyBUZXh0RGVjb2RlcixwMT0wO3RyeXtBLmRlY29kZSh5MSx7c3RyZWFtOiEwfSkscDE9MX1jYXRjaHt9dmFyIEMxPWZ1bmN0aW9uKHIpe2Zvcih2YXIgdD0iIixhPTA7Oyl7dmFyIG49clthKytdLHY9KG4+MTI3KSsobj4yMjMpKyhuPjIzOSk7aWYoYSt2PnIubGVuZ3RoKXJldHVyblt0LGoocixhLTEpXTt2P3Y9PTM/KG49KChuJjE1KTw8MTh8KHJbYSsrXSY2Myk8PDEyfChyW2ErK10mNjMpPDw2fHJbYSsrXSY2MyktNjU1MzYsdCs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxuPj4xMCw1NjMyMHxuJjEwMjMpKTp2JjE/dCs9U3RyaW5nLmZyb21DaGFyQ29kZSgobiYzMSk8PDZ8clthKytdJjYzKTp0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKChuJjE1KTw8MTJ8KHJbYSsrXSY2Myk8PDZ8clthKytdJjYzKTp0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4pfX07ZnVuY3Rpb24gUzEocix0KXtpZih0KXtmb3IodmFyIGE9IiIsbj0wO248ci5sZW5ndGg7bis9MTYzODQpYSs9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHIuc3ViYXJyYXkobixuKzE2Mzg0KSk7cmV0dXJuIGF9ZWxzZXtpZihBKXJldHVybiBBLmRlY29kZShyKTt2YXIgdj1DMShyKSxpPXZbMF0sYz12WzFdO3JldHVybiBjLmxlbmd0aCYmZyg4KSxpfX12YXIgXzE9ZnVuY3Rpb24ocix0KXtyZXR1cm4gdCszMCtFKHIsdCsyNikrRShyLHQrMjgpfSx4MT1mdW5jdGlvbihyLHQsYSl7dmFyIG49RShyLHQrMjgpLHY9UzEoci5zdWJhcnJheSh0KzQ2LHQrNDYrbiksIShFKHIsdCs4KSYyMDQ4KSksaT10KzQ2K24sYz1tKHIsdCsyMCksZj1hJiZjPT00Mjk0OTY3Mjk1P1QxKHIsaSk6W2MsbShyLHQrMjQpLG0ocix0KzQyKV0sbz1mWzBdLGU9ZlsxXSxsPWZbMl07cmV0dXJuW0Uocix0KzEwKSxvLGUsdixpK0Uocix0KzMwKStFKHIsdCszMiksbF19LFQxPWZ1bmN0aW9uKHIsdCl7Zm9yKDtFKHIsdCkhPTE7dCs9NCtFKHIsdCsyKSk7cmV0dXJuW3Eocix0KzEyKSxxKHIsdCs0KSxxKHIsdCsyMCldfTtmdW5jdGlvbiBrMShyLHQpe2Zvcih2YXIgYT17fSxuPXIubGVuZ3RoLTIyO20ocixuKSE9MTAxMDEwMjU2Oy0tbikoIW58fHIubGVuZ3RoLW4+NjU1NTgpJiZnKDEzKTt2YXIgdj1FKHIsbis4KTtpZighdilyZXR1cm57fTt2YXIgaT1tKHIsbisxNiksYz1pPT00Mjk0OTY3Mjk1O2MmJihuPW0ocixuLTEyKSxtKHIsbikhPTEwMTA3NTc5MiYmZygxMyksdj1tKHIsbiszMiksaT1tKHIsbis0OCkpO2Zvcih2YXIgZj10JiZ0LmZpbHRlcixvPTA7bzx2Oysrbyl7dmFyIGU9eDEocixpLGMpLGw9ZVswXSxiPWVbMV0sZD1lWzJdLHk9ZVszXSxSPWVbNF0sWT1lWzVdLFM9XzEocixZKTtpPVIsKCFmfHxmKHtuYW1lOnksc2l6ZTpiLG9yaWdpbmFsU2l6ZTpkLGNvbXByZXNzaW9uOmx9KSkmJihsP2w9PTg/YVt5XT1FMShyLnN1YmFycmF5KFMsUytiKSxuZXcgcyhkKSk6ZygxNCwidW5rbm93biBjb21wcmVzc2lvbiB0eXBlICIrbCk6YVt5XT1qKHIsUyxTK2IpKX1yZXR1cm4gYX1jb25zdCB6MT1yPT5rMShyLHtmaWx0ZXI6KHtuYW1lOnR9KT0+ISh0LnN0YXJ0c1dpdGgoIl9fTUFDT1NYLyIpfHx0LmluY2x1ZGVzKCIuRFNfU3RvcmUiKSl9KTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoe2RhdGE6cn0pPT57bGV0IHQ7dHJ5e3Q9e2lkOnIuaWQsZGF0YTp6MShyLmRhdGEpfX1jYXRjaChhKXt0PXtpZDpyLmlkLGVycm9yOmEubWVzc2FnZX19cG9zdE1lc3NhZ2UodCl9KX0pKCk7Cg==",ca=typeof window<"u"&&window.Blob&&new Blob([atob(ua)],{type:"text/javascript;charset=utf-8"});function Ku(){let r;try{if(r=ca&&(window.URL||window.webkitURL).createObjectURL(ca),!r)throw"";return new Worker(r)}catch{return new Worker("data:application/javascript;base64,"+ua)}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}let kr;const Xu=async r=>new Promise((a,i)=>{const c=la(),y=new Uint8Array(r),v={id:c,data:y};kr||(kr=new Ku);const w=({data:_})=>{_.id===v.id&&(kr.removeEventListener("message",w),"error"in _&&i(new Error(_.error)),"data"in _&&a(_.data))};kr.addEventListener("message",w),kr.postMessage(v,[r])}),hi="/";class fa{constructor(a){fe(this,"_source",null),fe(this,"_fs",null),fe(this,"_mountpoint",hi),fe(this,"_data",{}),this._source=a}static async preload(a,i){if(Array.isArray(a)){const y=i?.onProgress;return await Promise.all(a.map((v,w)=>{const _=y?{onProgress:(...D)=>y(w,...D)}:{};return this.preload(v,_)}))}const c=new this(a);return await c.load(i),c}async _fetch(a,i){return await wu(a,{},i).then(c=>{if(c.ok)return c.blob();throw new Error(`Failed to fetch ${a.url} ${c.status} (${c.statusText})`)}).then(c=>{if(c.size>0)return c;throw new Error(`The source must not be empty. Received ${c.size} bytes size source.`)})}async _unzip(a){if(!a.type.includes("zip"))throw new TypeError(`The source type must be "application/zip"-like. Received: "${a.type}".`);return await a.arrayBuffer().then(Xu).then(i=>Object.entries(i)).then(i=>Object.fromEntries(i))}async load(a){let i=this._source;return typeof i=="string"&&(i=new Request(i)),i instanceof Request&&(i=await this._fetch(i,a)),i instanceof Blob&&(i=await this._unzip(i)),i instanceof Object&&i.constructor===Object&&await Promise.all(Object.entries(i).map(([c,y])=>this.writeFile(c,y))),this._source=null,this._data}_fsWriteFile(a,i){this._fs&&(a=`${this._mountpoint}${a.startsWith("/")?a.substring(1):a}`,this._fs.writeFile(a,i))}async writeFile(a,i){const c=new Uint8Array(i instanceof Blob?await i.arrayBuffer():i);this._data[a]=c,this._fsWriteFile(a,this._data[a])}mount(a,i=hi){this._fs=a,this._mountpoint=i.endsWith("/")?i:`${i}/`,Object.entries(this._data).forEach(([c,y])=>this._fsWriteFile(c,y))}unmount(){this._fs=null,this._mountpoint=hi}}var $u=Object.defineProperty,Yu=Object.getOwnPropertyDescriptor,Zu=(r,a,i,c)=>{for(var y=c>1?void 0:c?Yu(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(y=(c?w(a,i,y):w(y))||y);return c&&y&&$u(a,i,y),y};class da{constructor(a){fe(this,"name",`effects/${la()}`),fe(this,"_player",null),fe(this,"_resource"),this._resource=new Hu(a)}static async preload(a,i){if(Array.isArray(a)){const y=i?.onProgress;return await Promise.all(a.map((v,w)=>{const _=y?{onProgress:(...D)=>y(w,...D)}:{};return this.preload(v,_)}))}const c=new this(a);return await c._load(i),c}async _load(a){await this._resource.load(a)}async _bind(a){await this._resource.load(),this._player=a,this._resource.mount(this._player.FS,this.name)}_unbind(){this._resource.unmount(),this._player=null}async writeFile(a,i){return this._resource.writeFile(a,i)}callJsMethod(a,i=""){if(!this._player){console.warn("The method won't evaluate: the effect is not applied to a player.");return}return this._player.callJsMethod(a,i)}async evalJs(a){if(!this._player){console.warn("The script won't evaluate: the effect is not applied to a player.");return}return await this._player.evalJs(a)}}Zu([$o("Please, use Effect.evalJs() instead.")],da.prototype,"callJsMethod",1);class Hu extends fa{async _unzip(a){let i=await super._unzip(a);const c=Object.keys(i).map(v=>v.split("/").find(Boolean)),y=c[0];return c.every(v=>v===y)&&(i=Object.fromEntries(Object.entries(i).map(([v,w])=>[v.replace(`${y}/`,""),w]))),i}}let Ju=class{constructor(r){fe(this,"_resource"),this._resource=new fa(r)}static async preload(r,a){if(Array.isArray(r)){const c=a?.onProgress;return await Promise.all(r.map((y,v)=>{const w=c?{onProgress:(..._)=>c(v,..._)}:{};return this.preload(y,w)}))}const i=new this(r);return await i._load(a),i}async _load(r){await this._resource.load(r)}async _bind(r){await this._resource.load(),this._resource.mount(r.FS)}};var Qu=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(i){i=i||{};var i=typeof i<"u"?i:{},c,y;i.ready=new Promise(function(e,t){c=e,y=t}),i.expectedDataFileDownloads||(i.expectedDataFileDownloads=0),i.expectedDataFileDownloads++,function(){if(!i.ENVIRONMENT_IS_PTHREAD){var e=function(t){typeof window=="object"?window.encodeURIComponent(window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/"):typeof process>"u"&&typeof location<"u"&&encodeURIComponent(location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/");var n="BanubaSDK.data",o="BanubaSDK.data";typeof i.locateFilePackage=="function"&&!i.locateFile&&(i.locateFile=i.locateFilePackage,we("warning: you defined Module.locateFilePackage, that has been renamed to Module.locateFile (using your locateFilePackage for now)"));var s=i.locateFile?i.locateFile(o,""):o,d=t.remote_package_size;function m(A,B,M,K){var ie=new XMLHttpRequest;ie.open("GET",A,!0),ie.responseType="arraybuffer",ie.onprogress=function(de){var ue=A,he=B;if(de.total&&(he=de.total),de.loaded){ie.addedTotal?i.dataFileDownloads[ue].loaded=de.loaded:(ie.addedTotal=!0,i.dataFileDownloads||(i.dataFileDownloads={}),i.dataFileDownloads[ue]={loaded:de.loaded,total:he});var G=0,J=0,ge=0;for(var Te in i.dataFileDownloads){var xe=i.dataFileDownloads[Te];G+=xe.total,J+=xe.loaded,ge++}G=Math.ceil(G*i.expectedDataFileDownloads/ge),i.setStatus&&i.setStatus("Downloading data... ("+J+"/"+G+")")}else i.dataFileDownloads||i.setStatus&&i.setStatus("Downloading data...")},ie.onerror=function(de){throw new Error("NetworkError for: "+A)},ie.onload=function(de){if(ie.status==200||ie.status==304||ie.status==206||ie.status==0&&ie.response){var ue=ie.response;M(ue)}else throw new Error(ie.statusText+" : "+ie.responseURL)},ie.send(null)}var b=null,E=i.getPreloadedPackage?i.getPreloadedPackage(s,d):null;E||m(s,d,function(A){b?(b(A),b=null):E=A});function R(){function A(de,ue){if(!de)throw ue+new Error().stack}i.FS_createPath("/","bnb_js",!0,!0),i.FS_createPath("/","bnb_prefabs",!0,!0),i.FS_createPath("/bnb_prefabs","audio",!0,!0),i.FS_createPath("/bnb_prefabs","base",!0,!0),i.FS_createPath("/bnb_prefabs","camera",!0,!0),i.FS_createPath("/bnb_prefabs/camera","images",!0,!0),i.FS_createPath("/bnb_prefabs","foreground",!0,!0),i.FS_createPath("/bnb_prefabs","gltf",!0,!0),i.FS_createPath("/bnb_prefabs/gltf","meshes",!0,!0),i.FS_createPath("/bnb_prefabs/gltf","shaders",!0,!0),i.FS_createPath("/bnb_prefabs","hint",!0,!0),i.FS_createPath("/bnb_prefabs/hint","font",!0,!0),i.FS_createPath("/bnb_prefabs/hint","meshes",!0,!0),i.FS_createPath("/bnb_prefabs/hint","scripts",!0,!0),i.FS_createPath("/bnb_prefabs/hint","shaders",!0,!0),i.FS_createPath("/bnb_prefabs","lights",!0,!0),i.FS_createPath("/bnb_prefabs","lut",!0,!0),i.FS_createPath("/bnb_prefabs/lut","scripts",!0,!0),i.FS_createPath("/bnb_prefabs/lut","shaders",!0,!0),i.FS_createPath("/bnb_prefabs/lut/shaders","lut-filter",!0,!0),i.FS_createPath("/bnb_prefabs/lut","textures",!0,!0),i.FS_createPath("/","bnb_shaders",!0,!0),i.FS_createPath("/bnb_shaders","bnb",!0,!0),i.FS_createPath("/bnb_shaders/bnb","lib",!0,!0),i.FS_createPath("/","frx",!0,!0);function B(de,ue,he){this.start=de,this.end=ue,this.audio=he}B.prototype={requests:{},open:function(de,ue){this.name=ue,this.requests[ue]=this,i.addRunDependency("fp "+this.name)},send:function(){},onload:function(){var de=this.byteArray.subarray(this.start,this.end);this.finish(de)},finish:function(de){var ue=this;i.FS_createDataFile(this.name,null,de,!0,!0,!0),i.removeRunDependency("fp "+ue.name),this.requests[this.name]=null}};for(var M=t.files,K=0;K<M.length;++K)new B(M[K].start,M[K].end,M[K].audio||0).open("GET",M[K].filename);function ie(de){A(de,"Loading data file failed."),A(de.constructor.name===ArrayBuffer.name,"bad input to processPackageData");var ue=new Uint8Array(de);B.prototype.byteArray=ue;for(var he=t.files,G=0;G<he.length;++G)B.prototype.requests[he[G].filename].onload();i.removeRunDependency("datafile_BanubaSDK.data")}i.addRunDependency("datafile_BanubaSDK.data"),i.preloadResults||(i.preloadResults={}),i.preloadResults[n]={fromCache:!1},E?(ie(E),E=null):b=ie}i.calledRun?R():(i.preRun||(i.preRun=[]),i.preRun.push(R))};e({files:[{filename:"/bnb_js/.empty",start:0,end:20},{filename:"/bnb_js/background.js",start:20,end:3945},{filename:"/bnb_js/console.js",start:3945,end:4505},{filename:"/bnb_js/global.js",start:4505,end:4886},{filename:"/bnb_js/legacy.js",start:4886,end:9163},{filename:"/bnb_js/light_streaks.js",start:9163,end:18870},{filename:"/bnb_js/prefabs.js",start:18870,end:21179},{filename:"/bnb_js/timers.js",start:21179,end:24498},{filename:"/bnb_prefabs/audio/config.js",start:24498,end:25873},{filename:"/bnb_prefabs/audio/config.json",start:25873,end:25943},{filename:"/bnb_prefabs/audio/schema.json",start:25943,end:26761},{filename:"/bnb_prefabs/base/config.json",start:26761,end:27390},{filename:"/bnb_prefabs/camera/config.json",start:27390,end:29060},{filename:"/bnb_prefabs/camera/images/ibl_diff.ktx",start:29060,end:53704},{filename:"/bnb_prefabs/camera/images/ibl_spec.ktx",start:53704,end:348688},{filename:"/bnb_prefabs/camera/schema.json",start:348688,end:348768},{filename:"/bnb_prefabs/foreground/config.js",start:348768,end:350104},{filename:"/bnb_prefabs/foreground/config.json",start:350104,end:351297},{filename:"/bnb_prefabs/foreground/foreground.frag",start:351297,end:351485},{filename:"/bnb_prefabs/foreground/foreground.vert",start:351485,end:351735},{filename:"/bnb_prefabs/foreground/null_image.png",start:351735,end:351803},{filename:"/bnb_prefabs/foreground/schema.json",start:351803,end:352495},{filename:"/bnb_prefabs/gltf/config.js",start:352495,end:356054},{filename:"/bnb_prefabs/gltf/config.json",start:356054,end:359059},{filename:"/bnb_prefabs/gltf/meshes/cut.bsm2",start:359059,end:415336},{filename:"/bnb_prefabs/gltf/meshes/cut_ears.bsm2",start:415336,end:491497},{filename:"/bnb_prefabs/gltf/schema.json",start:491497,end:495968},{filename:"/bnb_prefabs/gltf/shaders/mat_cut.frag",start:495968,end:496054},{filename:"/bnb_prefabs/gltf/shaders/mat_cut.vert",start:496054,end:497762},{filename:"/bnb_prefabs/hint/config.json",start:497762,end:499446},{filename:"/bnb_prefabs/hint/font/NotoSans-Regular.ttf",start:499446,end:898414},{filename:"/bnb_prefabs/hint/meshes/quad.bsm2",start:898414,end:898692},{filename:"/bnb_prefabs/hint/schema.json",start:898692,end:899678},{filename:"/bnb_prefabs/hint/scripts/index.js",start:899678,end:902029},{filename:"/bnb_prefabs/hint/shaders/text.frag",start:902029,end:902259},{filename:"/bnb_prefabs/hint/shaders/text.vert",start:902259,end:902503},{filename:"/bnb_prefabs/lights/config.js",start:902503,end:903836},{filename:"/bnb_prefabs/lights/config.json",start:903836,end:904147},{filename:"/bnb_prefabs/lights/schema.json",start:904147,end:904953},{filename:"/bnb_prefabs/lut/config.json",start:904953,end:906436},{filename:"/bnb_prefabs/lut/schema.json",start:906436,end:906881},{filename:"/bnb_prefabs/lut/scripts/index.js",start:906881,end:908192},{filename:"/bnb_prefabs/lut/shaders/lut-filter/lut_filter.frag",start:908192,end:908643},{filename:"/bnb_prefabs/lut/shaders/lut-filter/lut_filter.vert",start:908643,end:908893},{filename:"/bnb_prefabs/lut/textures/_null_lut_.png",start:908893,end:913851},{filename:"/bnb_shaders/.empty",start:913851,end:913870},{filename:"/bnb_shaders/bnb/anim_transform.glsl",start:913870,end:914033},{filename:"/bnb_shaders/bnb/color_spaces.glsl",start:914033,end:919880},{filename:"/bnb_shaders/bnb/decode_int1010102.glsl",start:919880,end:920569},{filename:"/bnb_shaders/bnb/get_bone.glsl",start:920569,end:920991},{filename:"/bnb_shaders/bnb/get_transform.glsl",start:920991,end:921630},{filename:"/bnb_shaders/bnb/glsl.frag",start:921630,end:922192},{filename:"/bnb_shaders/bnb/glsl.vert",start:922192,end:922973},{filename:"/bnb_shaders/bnb/lib/apply_light_streaks.frag",start:922973,end:923285},{filename:"/bnb_shaders/bnb/lib/apply_light_streaks.vert",start:923285,end:923534},{filename:"/bnb_shaders/bnb/lib/auto_morph.frag",start:923534,end:923647},{filename:"/bnb_shaders/bnb/lib/auto_morph.vert",start:923647,end:924259},{filename:"/bnb_shaders/bnb/lib/auto_morph_fisheye.frag",start:924259,end:924372},{filename:"/bnb_shaders/bnb/lib/auto_morph_fisheye.vert",start:924372,end:924879},{filename:"/bnb_shaders/bnb/lib/beauty_morph.frag",start:924879,end:924993},{filename:"/bnb_shaders/bnb/lib/beauty_morph.vert",start:924993,end:926142},{filename:"/bnb_shaders/bnb/lib/bg_blur_downscale.frag",start:926142,end:927016},{filename:"/bnb_shaders/bnb/lib/bg_blur_downscale.vert",start:927016,end:927215},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale.frag",start:927215,end:928210},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale.vert",start:928210,end:928545},{filename:"/bnb_shaders/bnb/lib/bg_blur_upscale_apply.frag",start:928545,end:929750},{filename:"/bnb_shaders/bnb/lib/camera.frag",start:929750,end:930331},{filename:"/bnb_shaders/bnb/lib/camera.vert",start:930331,end:930650},{filename:"/bnb_shaders/bnb/lib/camera_bgmask.frag",start:930650,end:931409},{filename:"/bnb_shaders/bnb/lib/camera_bgmask.vert",start:931409,end:931798},{filename:"/bnb_shaders/bnb/lib/copy_pixels.frag",start:931798,end:931972},{filename:"/bnb_shaders/bnb/lib/copy_pixels.vert",start:931972,end:932221},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_0.frag",start:932221,end:933207},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_0.vert",start:933207,end:933792},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_1.frag",start:933792,end:934778},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_1.vert",start:934778,end:935363},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_2.frag",start:935363,end:936349},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_2.vert",start:936349,end:936934},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_3.frag",start:936934,end:937920},{filename:"/bnb_shaders/bnb/lib/filter_light_streaks_3.vert",start:937920,end:938505},{filename:"/bnb_shaders/bnb/lib/gltf.frag",start:938505,end:941238},{filename:"/bnb_shaders/bnb/lib/gltf.vert",start:941238,end:942952},{filename:"/bnb_shaders/bnb/lib/gltf_physics.vert",start:942952,end:944554},{filename:"/bnb_shaders/bnb/lib/gltf_spec_gloss.frag",start:944554,end:946367},{filename:"/bnb_shaders/bnb/lib/gltf_spec_gloss.vert",start:946367,end:948081},{filename:"/bnb_shaders/bnb/lib/gltf_spec_gloss_physics.vert",start:948081,end:949683},{filename:"/bnb_shaders/bnb/lib/gltf_transmissive.frag",start:949683,end:951961},{filename:"/bnb_shaders/bnb/lib/gltf_transmissive.vert",start:951961,end:953802},{filename:"/bnb_shaders/bnb/lib/gltf_transmissive_physics.vert",start:953802,end:955531},{filename:"/bnb_shaders/bnb/lib/init_light_streaks.frag",start:955531,end:955861},{filename:"/bnb_shaders/bnb/lib/init_light_streaks.vert",start:955861,end:956110},{filename:"/bnb_shaders/bnb/lib/mesh_morph.frag",start:956110,end:956224},{filename:"/bnb_shaders/bnb/lib/mesh_morph.vert",start:956224,end:958107},{filename:"/bnb_shaders/bnb/lib/morph_apply.frag",start:958107,end:958450},{filename:"/bnb_shaders/bnb/lib/morph_apply.vert",start:958450,end:960632},{filename:"/bnb_shaders/bnb/lib/morph_blur.frag",start:960632,end:961955},{filename:"/bnb_shaders/bnb/lib/morph_blur.vert",start:961955,end:962281},{filename:"/bnb_shaders/bnb/lib/retouch.frag",start:962281,end:965973},{filename:"/bnb_shaders/bnb/lib/retouch.vert",start:965973,end:966531},{filename:"/bnb_shaders/bnb/lib/static_pos.frag",start:966531,end:966642},{filename:"/bnb_shaders/bnb/lib/static_pos.vert",start:966642,end:966908},{filename:"/bnb_shaders/bnb/lib/uv_morph.frag",start:966908,end:967021},{filename:"/bnb_shaders/bnb/lib/uv_morph.vert",start:967021,end:967528},{filename:"/bnb_shaders/bnb/lib/vbg.frag",start:967528,end:968435},{filename:"/bnb_shaders/bnb/lib/vbg.vert",start:968435,end:969475},{filename:"/bnb_shaders/bnb/lut.glsl",start:969475,end:974004},{filename:"/bnb_shaders/bnb/math.glsl",start:974004,end:974004},{filename:"/bnb_shaders/bnb/matrix_operations.glsl",start:974004,end:974488},{filename:"/bnb_shaders/bnb/morph_transform.glsl",start:974488,end:975546},{filename:"/bnb_shaders/bnb/pbr.glsl",start:975546,end:979138},{filename:"/bnb_shaders/bnb/quat_rotation.glsl",start:979138,end:980532},{filename:"/bnb_shaders/bnb/sample_camera.glsl",start:980532,end:981469},{filename:"/bnb_shaders/bnb/samplers_declaration.glsl",start:981469,end:984213},{filename:"/bnb_shaders/bnb/texture_bicubic.glsl",start:984213,end:985571},{filename:"/bnb_shaders/bnb/textures_lookup.glsl",start:985571,end:986771},{filename:"/bnb_shaders/bnb/transform_uv.glsl",start:986771,end:989208},{filename:"/bnb_shaders/bnb/version.glsl",start:989208,end:989430},{filename:"/frx/frx.js",start:989430,end:992243},{filename:"/modules.json",start:992243,end:1006434},{filename:"/resources-versions.txt",start:1006434,end:1009158},{filename:"/watermark.png",start:1009158,end:1011644},{filename:"/watermark_blurred.png",start:1011644,end:1034077}],remote_package_size:1034077})}}();var v=Object.assign({},i),w="./this.program",_=(e,t)=>{throw t},D=!0,I=!1,O="";function ee(e){return i.locateFile?i.locateFile(e,O):O+e}var $,re;typeof document<"u"&&document.currentScript&&(O=document.currentScript.src),r&&(O=r),O.indexOf("blob:")!==0?O=O.substr(0,O.replace(/[?#].*/,"").lastIndexOf("/")+1):O="",$=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},re=(e,t,n)=>{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=()=>{if(o.status==200||o.status==0&&o.response){t(o.response);return}n()},o.onerror=n,o.send(null)};var X=i.print||console.log.bind(console),we=i.printErr||console.warn.bind(console);Object.assign(i,v),v=null,i.thisProgram&&(w=i.thisProgram),i.quit&&(_=i.quit);var me=4,be;i.wasmBinary&&(be=i.wasmBinary);var Q=i.noExitRuntime||!0;typeof WebAssembly!="object"&&P("no native wasm support detected");var Fe,Xe=!1,ye;function Ne(e,t){e||P(t)}var Be=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ve(e,t,n){for(var o=t+n,s=t;e[s]&&!(s>=o);)++s;if(s-t>16&&e.buffer&&Be)return Be.decode(e.subarray(t,s));for(var d="";t<s;){var m=e[t++];if(!(m&128)){d+=String.fromCharCode(m);continue}var b=e[t++]&63;if((m&224)==192){d+=String.fromCharCode((m&31)<<6|b);continue}var E=e[t++]&63;if((m&240)==224?m=(m&15)<<12|b<<6|E:m=(m&7)<<18|b<<12|E<<6|e[t++]&63,m<65536)d+=String.fromCharCode(m);else{var R=m-65536;d+=String.fromCharCode(55296|R>>10,56320|R&1023)}}return d}function Ee(e,t){return e?Ve(ae,e,t):""}function ce(e,t,n,o){if(!(o>0))return 0;for(var s=n,d=n+o-1,m=0;m<e.length;++m){var b=e.charCodeAt(m);if(b>=55296&&b<=57343){var E=e.charCodeAt(++m);b=65536+((b&1023)<<10)|E&1023}if(b<=127){if(n>=d)break;t[n++]=b}else if(b<=2047){if(n+1>=d)break;t[n++]=192|b>>6,t[n++]=128|b&63}else if(b<=65535){if(n+2>=d)break;t[n++]=224|b>>12,t[n++]=128|b>>6&63,t[n++]=128|b&63}else{if(n+3>=d)break;t[n++]=240|b>>18,t[n++]=128|b>>12&63,t[n++]=128|b>>6&63,t[n++]=128|b&63}}return t[n]=0,n-s}function _e(e,t,n){return ce(e,ae,t,n)}function Oe(e){for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);o<=127?t++:o<=2047?t+=2:o>=55296&&o<=57343?(t+=4,++n):t+=3}return t}var Ie,le,ae,De,Se,j,te,q,ve;function ke(e){Ie=e,i.HEAP8=le=new Int8Array(e),i.HEAP16=De=new Int16Array(e),i.HEAP32=j=new Int32Array(e),i.HEAPU8=ae=new Uint8Array(e),i.HEAPU16=Se=new Uint16Array(e),i.HEAPU32=te=new Uint32Array(e),i.HEAPF32=q=new Float32Array(e),i.HEAPF64=ve=new Float64Array(e)}var ot,dt=[],at=[],Ct=[];function mt(){return Q}function rt(){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)_t(i.preRun.shift());Me(dt)}function st(){!i.noFSInit&&!p.init.initialized&&p.init(),p.ignorePermissions=!1,Me(at)}function Mt(){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;)F(i.postRun.shift());Me(Ct)}function _t(e){dt.unshift(e)}function ct(e){at.unshift(e)}function F(e){Ct.unshift(e)}var N=0,Z=null;function u(e){return e}function h(e){N++,i.monitorRunDependencies&&i.monitorRunDependencies(N)}function S(e){if(N--,i.monitorRunDependencies&&i.monitorRunDependencies(N),N==0&&Z){var t=Z;Z=null,t()}}function P(e){i.onAbort&&i.onAbort(e),e="Aborted("+e+")",we(e),Xe=!0,ye=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw y(t),t}var U="data:application/octet-stream;base64,";function Y(e){return e.startsWith(U)}var se;se="BanubaSDK.wasm",Y(se)||(se=ee(se));function Re(e){try{if(e==se&&be)return new Uint8Array(be);throw"both async and sync fetching of the wasm failed"}catch(t){P(t)}}function Ze(){return!be&&D&&typeof fetch=="function"?fetch(se,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+se+"'";return e.arrayBuffer()}).catch(function(){return Re(se)}):Promise.resolve().then(function(){return Re(se)})}function T(){var e={env:Ql,wasi_snapshot_preview1:Ql};function t(m,b){var E=m.exports;i.asm=E,Fe=i.asm.memory,ke(Fe.buffer),ot=i.asm.__indirect_function_table,ct(i.asm.__wasm_call_ctors),S()}h();function n(m){t(m.instance)}function o(m){return Ze().then(function(b){return WebAssembly.instantiate(b,e)}).then(function(b){return b}).then(m,function(b){we("failed to asynchronously prepare wasm: "+b),P(b)})}function s(){return!be&&typeof WebAssembly.instantiateStreaming=="function"&&!Y(se)&&typeof fetch=="function"?fetch(se,{credentials:"same-origin"}).then(function(m){var b=WebAssembly.instantiateStreaming(m,e);return b.then(n,function(E){return we("wasm streaming compile failed: "+E),we("falling back to ArrayBuffer instantiation"),o(n)})}):o(n)}if(i.instantiateWasm)try{var d=i.instantiateWasm(e,t);return d}catch(m){we("Module.instantiateWasm callback failed with error: "+m),y(m)}return s().catch(y),{}}var C,l;function f(){return/electron/i.test(navigator.userAgent)}function g(){function e(){var s=self.top,d=self.parent,m=[];do{try{m.push(d.location.href)}catch{}d&&(d=d.parent)}while(d&&d!==s);return m}var t=[self.location.href].concat(Array.from("ancestorOrigins"in self.location?self.location.ancestorOrigins:e())).map(function(s){return new URL(s.replace(/^blob:/,"")).hostname}).find(function(s){return!!s}),n=Oe(t)+1,o=wt(n);return _e(t,o,n),o}function k(e,t){const n=Ee(e),o=p.readFile(n),s=document.createElement("video"),d=URL.createObjectURL(new Blob([o],{type:"video/mp4"})),m=i.proxyVideoRequestsTo;s.muted=!0,s.autoplay=!1,s.controls=!1,s.playsInline=!0,s.src=m?m+encodeURIComponent(d):d;var b=He.toValue(t);return s.onloadedmetadata=E=>{b(E)},He.toHandle(s)}function L(e){const t=He.toValue(e);URL.revokeObjectURL(t.src),t.src=""}function z(e,t,n,o){const s=ot.length,d=new Uint8Array(ae.slice(e+t,e+n));try{var m=new WebAssembly.Module(d),b=new WebAssembly.Instance(m,{env:{memory:Fe}});for(var E in b.exports){var R=b.exports[E];addFunction(R)}return s<ot.length?s:o}catch(A){return console.log(A),o}}function ne(){function e(o){return o.toString(16).padStart(2,"0")}let t=localStorage.getItem("billing_id");if(!t){var n=new Uint8Array(8);window.crypto.getRandomValues(n),t=Array.from(n,e).join(""),localStorage.setItem("billing_id",t)}return Hl(t)}function We(){return i.getRandomValue()}function Qe(){if(i.getRandomValue===void 0)try{var e=typeof window=="object"?window:self,t=typeof e.crypto<"u"?e.crypto:e.msCrypto,n=function(){var d=new Uint32Array(1);return t.getRandomValues(d),d[0]>>>0};n(),i.getRandomValue=n}catch{try{var o=require("crypto"),s=function(){var d=o.randomBytes(4);return(d[0]<<24|d[1]<<16|d[2]<<8|d[3])>>>0};s(),i.getRandomValue=s}catch{throw"No secure random number generator found"}}}function ze(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Me(e){for(;e.length>0;)e.shift()(i)}function $e(e){return wt(e+24)+24}function Nr(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(t){te[this.ptr+4>>2]=t},this.get_type=function(){return te[this.ptr+4>>2]},this.set_destructor=function(t){te[this.ptr+8>>2]=t},this.get_destructor=function(){return te[this.ptr+8>>2]},this.set_refcount=function(t){j[this.ptr>>2]=t},this.set_caught=function(t){t=t?1:0,le[this.ptr+12>>0]=t},this.get_caught=function(){return le[this.ptr+12>>0]!=0},this.set_rethrown=function(t){t=t?1:0,le[this.ptr+13>>0]=t},this.get_rethrown=function(){return le[this.ptr+13>>0]!=0},this.init=function(t,n){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(n),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=j[this.ptr>>2];j[this.ptr>>2]=t+1},this.release_ref=function(){var t=j[this.ptr>>2];return j[this.ptr>>2]=t-1,t===1},this.set_adjusted_ptr=function(t){te[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return te[this.ptr+16>>2]},this.get_exception_ptr=function(){var t=nu(this.get_type());if(t)return te[this.excPtr>>2];var n=this.get_adjusted_ptr();return n!==0?n:this.excPtr}}function lr(e,t,n){var o=new Nr(e);throw o.init(t,n),e}var Ae={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var n=0,o=e.length-1;o>=0;o--){var s=e[o];s==="."?e.splice(o,1):s===".."?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Ae.isAbs(e),n=e.substr(-1)==="/";return e=Ae.normalizeArray(e.split("/").filter(o=>!!o),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Ae.splitPath(e),n=t[0],o=t[1];return!n&&!o?".":(o&&(o=o.substr(0,o.length-1)),n+o)},basename:e=>{if(e==="/")return"/";e=Ae.normalize(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return Ae.normalize(e.join("/"))},join2:(e,t)=>Ae.normalize(e+"/"+t)};function vt(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}else return()=>P("randomDevice")}var Xt={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:p.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";e=o+"/"+e,t=Ae.isAbs(o)}return e=Ae.normalizeArray(e.split("/").filter(s=>!!s),!t).join("/"),(t?"/":"")+e||"."},relative:(e,t)=>{e=Xt.resolve(e).substr(1),t=Xt.resolve(t).substr(1);function n(R){for(var A=0;A<R.length&&R[A]==="";A++);for(var B=R.length-1;B>=0&&R[B]==="";B--);return A>B?[]:R.slice(A,B-A+1)}for(var o=n(e.split("/")),s=n(t.split("/")),d=Math.min(o.length,s.length),m=d,b=0;b<d;b++)if(o[b]!==s[b]){m=b;break}for(var E=[],b=m;b<o.length;b++)E.push("..");return E=E.concat(s.slice(m)),E.join("/")}};function Rn(e,t,n){var o=n>0?n:Oe(e)+1,s=new Array(o),d=ce(e,s,0,s.length);return t&&(s.length=d),s}var ur={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){ur.ttys[e]={input:[],output:[],ops:t},p.registerDevice(e,ur.stream_ops)},stream_ops:{open:function(e){var t=ur.ttys[e.node.rdev];if(!t)throw new p.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,n,o,s){if(!e.tty||!e.tty.ops.get_char)throw new p.ErrnoError(60);for(var d=0,m=0;m<o;m++){var b;try{b=e.tty.ops.get_char(e.tty)}catch{throw new p.ErrnoError(29)}if(b===void 0&&d===0)throw new p.ErrnoError(6);if(b==null)break;d++,t[n+m]=b}return d&&(e.node.timestamp=Date.now()),d},write:function(e,t,n,o,s){if(!e.tty||!e.tty.ops.put_char)throw new p.ErrnoError(60);try{for(var d=0;d<o;d++)e.tty.ops.put_char(e.tty,t[n+d])}catch{throw new p.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),d}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(typeof window<"u"&&typeof window.prompt=="function"?(t=window.prompt("Input: "),t!==null&&(t+=`
`)):typeof readline=="function"&&(t=readline(),t!==null&&(t+=`
`)),!t)return null;e.input=Rn(t,!0)}return e.input.shift()},put_char:function(e,t){t===null||t===10?(X(Ve(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(X(Ve(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){t===null||t===10?(we(Ve(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(we(Ve(e.output,0)),e.output=[])}}};function po(e,t){return ae.fill(0,e,e+t),e}function up(e,t){return Math.ceil(e/t)*t}function wl(e){e=up(e,65536);var t=tu(65536,e);return t?po(t,e):0}var Pe={ops_table:null,mount:function(e){return Pe.createNode(null,"/",16895,0)},createNode:function(e,t,n,o){if(p.isBlkdev(n)||p.isFIFO(n))throw new p.ErrnoError(63);Pe.ops_table||(Pe.ops_table={dir:{node:{getattr:Pe.node_ops.getattr,setattr:Pe.node_ops.setattr,lookup:Pe.node_ops.lookup,mknod:Pe.node_ops.mknod,rename:Pe.node_ops.rename,unlink:Pe.node_ops.unlink,rmdir:Pe.node_ops.rmdir,readdir:Pe.node_ops.readdir,symlink:Pe.node_ops.symlink},stream:{llseek:Pe.stream_ops.llseek}},file:{node:{getattr:Pe.node_ops.getattr,setattr:Pe.node_ops.setattr},stream:{llseek:Pe.stream_ops.llseek,read:Pe.stream_ops.read,write:Pe.stream_ops.write,allocate:Pe.stream_ops.allocate,mmap:Pe.stream_ops.mmap,msync:Pe.stream_ops.msync}},link:{node:{getattr:Pe.node_ops.getattr,setattr:Pe.node_ops.setattr,readlink:Pe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Pe.node_ops.getattr,setattr:Pe.node_ops.setattr},stream:p.chrdev_stream_ops}});var s=p.createNode(e,t,n,o);return p.isDir(s.mode)?(s.node_ops=Pe.ops_table.dir.node,s.stream_ops=Pe.ops_table.dir.stream,s.contents={}):p.isFile(s.mode)?(s.node_ops=Pe.ops_table.file.node,s.stream_ops=Pe.ops_table.file.stream,s.usedBytes=0,s.contents=null):p.isLink(s.mode)?(s.node_ops=Pe.ops_table.link.node,s.stream_ops=Pe.ops_table.link.stream):p.isChrdev(s.mode)&&(s.node_ops=Pe.ops_table.chrdev.node,s.stream_ops=Pe.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){var o=1048576;t=Math.max(t,n*(n<o?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var s=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(s.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=p.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,p.isDir(e.mode)?t.size=4096:p.isFile(e.mode)?t.size=e.usedBytes:p.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&Pe.resizeFileStorage(e,t.size)},lookup:function(e,t){throw p.genericErrors[44]},mknod:function(e,t,n,o){return Pe.createNode(e,t,n,o)},rename:function(e,t,n){if(p.isDir(e.mode)){var o;try{o=p.lookupNode(t,n)}catch{}if(o)for(var s in o.contents)throw new p.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=p.lookupNode(e,t);for(var o in n.contents)throw new p.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var o=Pe.createNode(e,t,41471,0);return o.link=n,o},readlink:function(e){if(!p.isLink(e.mode))throw new p.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,o,s){var d=e.node.contents;if(s>=e.node.usedBytes)return 0;var m=Math.min(e.node.usedBytes-s,o);if(m>8&&d.subarray)t.set(d.subarray(s,s+m),n);else for(var b=0;b<m;b++)t[n+b]=d[s+b];return m},write:function(e,t,n,o,s,d){if(t.buffer===le.buffer&&(d=!1),!o)return 0;var m=e.node;if(m.timestamp=Date.now(),t.subarray&&(!m.contents||m.contents.subarray)){if(d)return m.contents=t.subarray(n,n+o),m.usedBytes=o,o;if(m.usedBytes===0&&s===0)return m.contents=t.slice(n,n+o),m.usedBytes=o,o;if(s+o<=m.usedBytes)return m.contents.set(t.subarray(n,n+o),s),o}if(Pe.expandFileStorage(m,s+o),m.contents.subarray&&t.subarray)m.contents.set(t.subarray(n,n+o),s);else for(var b=0;b<o;b++)m.contents[s+b]=t[n+b];return m.usedBytes=Math.max(m.usedBytes,s+o),o},llseek:function(e,t,n){var o=t;if(n===1?o+=e.position:n===2&&p.isFile(e.node.mode)&&(o+=e.node.usedBytes),o<0)throw new p.ErrnoError(28);return o},allocate:function(e,t,n){Pe.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,o,s){if(!p.isFile(e.node.mode))throw new p.ErrnoError(43);var d,m,b=e.node.contents;if(!(s&2)&&b.buffer===Ie)m=!1,d=b.byteOffset;else{if((n>0||n+t<b.length)&&(b.subarray?b=b.subarray(n,n+t):b=Array.prototype.slice.call(b,n,n+t)),m=!0,d=wl(t),!d)throw new p.ErrnoError(48);le.set(b,d)}return{ptr:d,allocated:m}},msync:function(e,t,n,o,s){return Pe.stream_ops.write(e,t,0,o,n,!1),0}}};function cp(e,t,n,o){var s=o?"":"al "+e;re(e,d=>{Ne(d,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(d)),s&&S()},d=>{if(n)n();else throw'Loading data file "'+e+'" failed.'}),s&&h()}var p={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(e=Xt.resolve(e),!e)return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};if(t=Object.assign(n,t),t.recurse_count>8)throw new p.ErrnoError(32);for(var o=e.split("/").filter(B=>!!B),s=p.root,d="/",m=0;m<o.length;m++){var b=m===o.length-1;if(b&&t.parent)break;if(s=p.lookupNode(s,o[m]),d=Ae.join2(d,o[m]),p.isMountpoint(s)&&(!b||b&&t.follow_mount)&&(s=s.mounted.root),!b||t.follow)for(var E=0;p.isLink(s.mode);){var R=p.readlink(d);d=Xt.resolve(Ae.dirname(d),R);var A=p.lookupPath(d,{recurse_count:t.recurse_count+1});if(s=A.node,E++>40)throw new p.ErrnoError(32)}}return{path:d,node:s}},getPath:e=>{for(var t;;){if(p.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]!=="/"?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var n=0,o=0;o<t.length;o++)n=(n<<5)-n+t.charCodeAt(o)|0;return(e+n>>>0)%p.nameTable.length},hashAddNode:e=>{var t=p.hashName(e.parent.id,e.name);e.name_next=p.nameTable[t],p.nameTable[t]=e},hashRemoveNode:e=>{var t=p.hashName(e.parent.id,e.name);if(p.nameTable[t]===e)p.nameTable[t]=e.name_next;else for(var n=p.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:(e,t)=>{var n=p.mayLookup(e);if(n)throw new p.ErrnoError(n,e);for(var o=p.hashName(e.id,t),s=p.nameTable[o];s;s=s.name_next){var d=s.name;if(s.parent.id===e.id&&d===t)return s}return p.lookup(e,t)},createNode:(e,t,n,o)=>{var s=new p.FSNode(e,t,n,o);return p.hashAddNode(s),s},destroyNode:e=>{p.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=p.flagModes[e];if(typeof t>"u")throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions:(e,t)=>p.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var t=p.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return p.lookupNode(e,t),20}catch{}return p.nodePermissions(e,"wx")},mayDelete:(e,t,n)=>{var o;try{o=p.lookupNode(e,t)}catch(d){return d.errno}var s=p.nodePermissions(e,"wx");if(s)return s;if(n){if(!p.isDir(o.mode))return 54;if(p.isRoot(o)||p.getPath(o)===p.cwd())return 10}else if(p.isDir(o.mode))return 31;return 0},mayOpen:(e,t)=>e?p.isLink(e.mode)?32:p.isDir(e.mode)&&(p.flagsToPermissionString(t)!=="r"||t&512)?31:p.nodePermissions(e,p.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=p.MAX_OPEN_FDS)=>{for(var n=e;n<=t;n++)if(!p.streams[n])return n;throw new p.ErrnoError(33)},getStream:e=>p.streams[e],createStream:(e,t,n)=>{p.FSStream||(p.FSStream=function(){this.shared={}},p.FSStream.prototype={},Object.defineProperties(p.FSStream.prototype,{object:{get:function(){return this.node},set:function(s){this.node=s}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(s){this.shared.flags=s}},position:{get:function(){return this.shared.position},set:function(s){this.shared.position=s}}})),e=Object.assign(new p.FSStream,e);var o=p.nextfd(t,n);return e.fd=o,p.streams[o]=e,e},closeStream:e=>{p.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=p.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new p.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{p.devices[e]={stream_ops:t}},getDevice:e=>p.devices[e],getMounts:e=>{for(var t=[],n=[e];n.length;){var o=n.pop();t.push(o),n.push.apply(n,o.mounts)}return t},syncfs:(e,t)=>{typeof e=="function"&&(t=e,e=!1),p.syncFSRequests++,p.syncFSRequests>1&&we("warning: "+p.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=p.getMounts(p.root.mount),o=0;function s(m){return p.syncFSRequests--,t(m)}function d(m){if(m)return d.errored?void 0:(d.errored=!0,s(m));++o>=n.length&&s(null)}n.forEach(m=>{if(!m.type.syncfs)return d(null);m.type.syncfs(m,e,d)})},mount:(e,t,n)=>{var o=n==="/",s=!n,d;if(o&&p.root)throw new p.ErrnoError(10);if(!o&&!s){var m=p.lookupPath(n,{follow_mount:!1});if(n=m.path,d=m.node,p.isMountpoint(d))throw new p.ErrnoError(10);if(!p.isDir(d.mode))throw new p.ErrnoError(54)}var b={type:e,opts:t,mountpoint:n,mounts:[]},E=e.mount(b);return E.mount=b,b.root=E,o?p.root=E:d&&(d.mounted=b,d.mount&&d.mount.mounts.push(b)),E},unmount:e=>{var t=p.lookupPath(e,{follow_mount:!1});if(!p.isMountpoint(t.node))throw new p.ErrnoError(28);var n=t.node,o=n.mounted,s=p.getMounts(o);Object.keys(p.nameTable).forEach(m=>{for(var b=p.nameTable[m];b;){var E=b.name_next;s.includes(b.mount)&&p.destroyNode(b),b=E}}),n.mounted=null;var d=n.mount.mounts.indexOf(o);n.mount.mounts.splice(d,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,n)=>{var o=p.lookupPath(e,{parent:!0}),s=o.node,d=Ae.basename(e);if(!d||d==="."||d==="..")throw new p.ErrnoError(28);var m=p.mayCreate(s,d);if(m)throw new p.ErrnoError(m);if(!s.node_ops.mknod)throw new p.ErrnoError(63);return s.node_ops.mknod(s,d,t,n)},create:(e,t)=>(t=t!==void 0?t:438,t&=4095,t|=32768,p.mknod(e,t,0)),mkdir:(e,t)=>(t=t!==void 0?t:511,t&=1023,t|=16384,p.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var n=e.split("/"),o="",s=0;s<n.length;++s)if(n[s]){o+="/"+n[s];try{p.mkdir(o,t)}catch(d){if(d.errno!=20)throw d}}},mkdev:(e,t,n)=>(typeof n>"u"&&(n=t,t=438),t|=8192,p.mknod(e,t,n)),symlink:(e,t)=>{if(!Xt.resolve(e))throw new p.ErrnoError(44);var n=p.lookupPath(t,{parent:!0}),o=n.node;if(!o)throw new p.ErrnoError(44);var s=Ae.basename(t),d=p.mayCreate(o,s);if(d)throw new p.ErrnoError(d);if(!o.node_ops.symlink)throw new p.ErrnoError(63);return o.node_ops.symlink(o,s,e)},rename:(e,t)=>{var n=Ae.dirname(e),o=Ae.dirname(t),s=Ae.basename(e),d=Ae.basename(t),m,b,E;if(m=p.lookupPath(e,{parent:!0}),b=m.node,m=p.lookupPath(t,{parent:!0}),E=m.node,!b||!E)throw new p.ErrnoError(44);if(b.mount!==E.mount)throw new p.ErrnoError(75);var R=p.lookupNode(b,s),A=Xt.relative(e,o);if(A.charAt(0)!==".")throw new p.ErrnoError(28);if(A=Xt.relative(t,n),A.charAt(0)!==".")throw new p.ErrnoError(55);var B;try{B=p.lookupNode(E,d)}catch{}if(R!==B){var M=p.isDir(R.mode),K=p.mayDelete(b,s,M);if(K)throw new p.ErrnoError(K);if(K=B?p.mayDelete(E,d,M):p.mayCreate(E,d),K)throw new p.ErrnoError(K);if(!b.node_ops.rename)throw new p.ErrnoError(63);if(p.isMountpoint(R)||B&&p.isMountpoint(B))throw new p.ErrnoError(10);if(E!==b&&(K=p.nodePermissions(b,"w"),K))throw new p.ErrnoError(K);p.hashRemoveNode(R);try{b.node_ops.rename(R,E,d)}catch(ie){throw ie}finally{p.hashAddNode(R)}}},rmdir:e=>{var t=p.lookupPath(e,{parent:!0}),n=t.node,o=Ae.basename(e),s=p.lookupNode(n,o),d=p.mayDelete(n,o,!0);if(d)throw new p.ErrnoError(d);if(!n.node_ops.rmdir)throw new p.ErrnoError(63);if(p.isMountpoint(s))throw new p.ErrnoError(10);n.node_ops.rmdir(n,o),p.destroyNode(s)},readdir:e=>{var t=p.lookupPath(e,{follow:!0}),n=t.node;if(!n.node_ops.readdir)throw new p.ErrnoError(54);return n.node_ops.readdir(n)},unlink:e=>{var t=p.lookupPath(e,{parent:!0}),n=t.node;if(!n)throw new p.ErrnoError(44);var o=Ae.basename(e),s=p.lookupNode(n,o),d=p.mayDelete(n,o,!1);if(d)throw new p.ErrnoError(d);if(!n.node_ops.unlink)throw new p.ErrnoError(63);if(p.isMountpoint(s))throw new p.ErrnoError(10);n.node_ops.unlink(n,o),p.destroyNode(s)},readlink:e=>{var t=p.lookupPath(e),n=t.node;if(!n)throw new p.ErrnoError(44);if(!n.node_ops.readlink)throw new p.ErrnoError(28);return Xt.resolve(p.getPath(n.parent),n.node_ops.readlink(n))},stat:(e,t)=>{var n=p.lookupPath(e,{follow:!t}),o=n.node;if(!o)throw new p.ErrnoError(44);if(!o.node_ops.getattr)throw new p.ErrnoError(63);return o.node_ops.getattr(o)},lstat:e=>p.stat(e,!0),chmod:(e,t,n)=>{var o;if(typeof e=="string"){var s=p.lookupPath(e,{follow:!n});o=s.node}else o=e;if(!o.node_ops.setattr)throw new p.ErrnoError(63);o.node_ops.setattr(o,{mode:t&4095|o.mode&-4096,timestamp:Date.now()})},lchmod:(e,t)=>{p.chmod(e,t,!0)},fchmod:(e,t)=>{var n=p.getStream(e);if(!n)throw new p.ErrnoError(8);p.chmod(n.node,t)},chown:(e,t,n,o)=>{var s;if(typeof e=="string"){var d=p.lookupPath(e,{follow:!o});s=d.node}else s=e;if(!s.node_ops.setattr)throw new p.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown:(e,t,n)=>{p.chown(e,t,n,!0)},fchown:(e,t,n)=>{var o=p.getStream(e);if(!o)throw new p.ErrnoError(8);p.chown(o.node,t,n)},truncate:(e,t)=>{if(t<0)throw new p.ErrnoError(28);var n;if(typeof e=="string"){var o=p.lookupPath(e,{follow:!0});n=o.node}else n=e;if(!n.node_ops.setattr)throw new p.ErrnoError(63);if(p.isDir(n.mode))throw new p.ErrnoError(31);if(!p.isFile(n.mode))throw new p.ErrnoError(28);var s=p.nodePermissions(n,"w");if(s)throw new p.ErrnoError(s);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var n=p.getStream(e);if(!n)throw new p.ErrnoError(8);if(!(n.flags&2097155))throw new p.ErrnoError(28);p.truncate(n.node,t)},utime:(e,t,n)=>{var o=p.lookupPath(e,{follow:!0}),s=o.node;s.node_ops.setattr(s,{timestamp:Math.max(t,n)})},open:(e,t,n)=>{if(e==="")throw new p.ErrnoError(44);t=typeof t=="string"?p.modeStringToFlags(t):t,n=typeof n>"u"?438:n,t&64?n=n&4095|32768:n=0;var o;if(typeof e=="object")o=e;else{e=Ae.normalize(e);try{var s=p.lookupPath(e,{follow:!(t&131072)});o=s.node}catch{}}var d=!1;if(t&64)if(o){if(t&128)throw new p.ErrnoError(20)}else o=p.mknod(e,n,0),d=!0;if(!o)throw new p.ErrnoError(44);if(p.isChrdev(o.mode)&&(t&=-513),t&65536&&!p.isDir(o.mode))throw new p.ErrnoError(54);if(!d){var m=p.mayOpen(o,t);if(m)throw new p.ErrnoError(m)}t&512&&!d&&p.truncate(o,0),t&=-131713;var b=p.createStream({node:o,path:p.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return b.stream_ops.open&&b.stream_ops.open(b),i.logReadFiles&&!(t&1)&&(p.readFiles||(p.readFiles={}),e in p.readFiles||(p.readFiles[e]=1)),b},close:e=>{if(p.isClosed(e))throw new p.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{p.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,t,n)=>{if(p.isClosed(e))throw new p.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new p.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new p.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:(e,t,n,o,s)=>{if(o<0||s<0)throw new p.ErrnoError(28);if(p.isClosed(e))throw new p.ErrnoError(8);if((e.flags&2097155)===1)throw new p.ErrnoError(8);if(p.isDir(e.node.mode))throw new p.ErrnoError(31);if(!e.stream_ops.read)throw new p.ErrnoError(28);var d=typeof s<"u";if(!d)s=e.position;else if(!e.seekable)throw new p.ErrnoError(70);var m=e.stream_ops.read(e,t,n,o,s);return d||(e.position+=m),m},write:(e,t,n,o,s,d)=>{if(o<0||s<0)throw new p.ErrnoError(28);if(p.isClosed(e))throw new p.ErrnoError(8);if(!(e.flags&2097155))throw new p.ErrnoError(8);if(p.isDir(e.node.mode))throw new p.ErrnoError(31);if(!e.stream_ops.write)throw new p.ErrnoError(28);e.seekable&&e.flags&1024&&p.llseek(e,0,2);var m=typeof s<"u";if(!m)s=e.position;else if(!e.seekable)throw new p.ErrnoError(70);var b=e.stream_ops.write(e,t,n,o,s,d);return m||(e.position+=b),b},allocate:(e,t,n)=>{if(p.isClosed(e))throw new p.ErrnoError(8);if(t<0||n<=0)throw new p.ErrnoError(28);if(!(e.flags&2097155))throw new p.ErrnoError(8);if(!p.isFile(e.node.mode)&&!p.isDir(e.node.mode))throw new p.ErrnoError(43);if(!e.stream_ops.allocate)throw new p.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:(e,t,n,o,s)=>{if(o&2&&!(s&2)&&(e.flags&2097155)!==2)throw new p.ErrnoError(2);if((e.flags&2097155)===1)throw new p.ErrnoError(2);if(!e.stream_ops.mmap)throw new p.ErrnoError(43);return e.stream_ops.mmap(e,t,n,o,s)},msync:(e,t,n,o,s)=>e.stream_ops.msync?e.stream_ops.msync(e,t,n,o,s):0,munmap:e=>0,ioctl:(e,t,n)=>{if(!e.stream_ops.ioctl)throw new p.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error('Invalid encoding type "'+t.encoding+'"');var n,o=p.open(e,t.flags),s=p.stat(e),d=s.size,m=new Uint8Array(d);return p.read(o,m,0,d,0),t.encoding==="utf8"?n=Ve(m,0):t.encoding==="binary"&&(n=m),p.close(o),n},writeFile:(e,t,n={})=>{n.flags=n.flags||577;var o=p.open(e,n.flags,n.mode);if(typeof t=="string"){var s=new Uint8Array(Oe(t)+1),d=ce(t,s,0,s.length);p.write(o,s,0,d,void 0,n.canOwn)}else if(ArrayBuffer.isView(t))p.write(o,t,0,t.byteLength,void 0,n.canOwn);else throw new Error("Unsupported data type");p.close(o)},cwd:()=>p.currentPath,chdir:e=>{var t=p.lookupPath(e,{follow:!0});if(t.node===null)throw new p.ErrnoError(44);if(!p.isDir(t.node.mode))throw new p.ErrnoError(54);var n=p.nodePermissions(t.node,"x");if(n)throw new p.ErrnoError(n);p.currentPath=t.path},createDefaultDirectories:()=>{p.mkdir("/tmp"),p.mkdir("/home"),p.mkdir("/home/web_user")},createDefaultDevices:()=>{p.mkdir("/dev"),p.registerDevice(p.makedev(1,3),{read:()=>0,write:(t,n,o,s,d)=>s}),p.mkdev("/dev/null",p.makedev(1,3)),ur.register(p.makedev(5,0),ur.default_tty_ops),ur.register(p.makedev(6,0),ur.default_tty1_ops),p.mkdev("/dev/tty",p.makedev(5,0)),p.mkdev("/dev/tty1",p.makedev(6,0));var e=vt();p.createDevice("/dev","random",e),p.createDevice("/dev","urandom",e),p.mkdir("/dev/shm"),p.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{p.mkdir("/proc");var e=p.mkdir("/proc/self");p.mkdir("/proc/self/fd"),p.mount({mount:()=>{var t=p.createNode(e,"fd",16895,73);return t.node_ops={lookup:(n,o)=>{var s=+o,d=p.getStream(s);if(!d)throw new p.ErrnoError(8);var m={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>d.path}};return m.parent=m,m}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{i.stdin?p.createDevice("/dev","stdin",i.stdin):p.symlink("/dev/tty","/dev/stdin"),i.stdout?p.createDevice("/dev","stdout",null,i.stdout):p.symlink("/dev/tty","/dev/stdout"),i.stderr?p.createDevice("/dev","stderr",null,i.stderr):p.symlink("/dev/tty1","/dev/stderr"),p.open("/dev/stdin",0),p.open("/dev/stdout",1),p.open("/dev/stderr",1)},ensureErrnoError:()=>{p.ErrnoError||(p.ErrnoError=function(e,t){this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(e),this.message="FS error"},p.ErrnoError.prototype=new Error,p.ErrnoError.prototype.constructor=p.ErrnoError,[44].forEach(e=>{p.genericErrors[e]=new p.ErrnoError(e),p.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{p.ensureErrnoError(),p.nameTable=new Array(4096),p.mount(Pe,{},"/"),p.createDefaultDirectories(),p.createDefaultDevices(),p.createSpecialDirectories(),p.filesystems={MEMFS:Pe}},init:(e,t,n)=>{p.init.initialized=!0,p.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=n||i.stderr,p.createStandardStreams()},quit:()=>{p.init.initialized=!1;for(var e=0;e<p.streams.length;e++){var t=p.streams[e];t&&p.close(t)}},getMode:(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:(e,t)=>{var n=p.analyzePath(e,t);return n.exists?n.object:null},analyzePath:(e,t)=>{try{var n=p.lookupPath(e,{follow:!t});e=n.path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=p.lookupPath(e,{parent:!0});o.parentExists=!0,o.parentPath=n.path,o.parentObject=n.node,o.name=Ae.basename(e),n=p.lookupPath(e,{follow:!t}),o.exists=!0,o.path=n.path,o.object=n.node,o.name=n.node.name,o.isRoot=n.path==="/"}catch(s){o.error=s.errno}return o},createPath:(e,t,n,o)=>{e=typeof e=="string"?e:p.getPath(e);for(var s=t.split("/").reverse();s.length;){var d=s.pop();if(d){var m=Ae.join2(e,d);try{p.mkdir(m)}catch{}e=m}}return m},createFile:(e,t,n,o,s)=>{var d=Ae.join2(typeof e=="string"?e:p.getPath(e),t),m=p.getMode(o,s);return p.create(d,m)},createDataFile:(e,t,n,o,s,d)=>{var m=t;e&&(e=typeof e=="string"?e:p.getPath(e),m=t?Ae.join2(e,t):e);var b=p.getMode(o,s),E=p.create(m,b);if(n){if(typeof n=="string"){for(var R=new Array(n.length),A=0,B=n.length;A<B;++A)R[A]=n.charCodeAt(A);n=R}p.chmod(E,b|146);var M=p.open(E,577);p.write(M,n,0,n.length,0,d),p.close(M),p.chmod(E,b)}return E},createDevice:(e,t,n,o)=>{var s=Ae.join2(typeof e=="string"?e:p.getPath(e),t),d=p.getMode(!!n,!!o);p.createDevice.major||(p.createDevice.major=64);var m=p.makedev(p.createDevice.major++,0);return p.registerDevice(m,{open:b=>{b.seekable=!1},close:b=>{o&&o.buffer&&o.buffer.length&&o(10)},read:(b,E,R,A,B)=>{for(var M=0,K=0;K<A;K++){var ie;try{ie=n()}catch{throw new p.ErrnoError(29)}if(ie===void 0&&M===0)throw new p.ErrnoError(6);if(ie==null)break;M++,E[R+K]=ie}return M&&(b.node.timestamp=Date.now()),M},write:(b,E,R,A,B)=>{for(var M=0;M<A;M++)try{o(E[R+M])}catch{throw new p.ErrnoError(29)}return A&&(b.node.timestamp=Date.now()),M}}),p.mkdev(s,d,m)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if($)try{e.contents=Rn($(e.url),!0),e.usedBytes=e.contents.length}catch{throw new p.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,t,n,o,s)=>{function d(){this.lengthKnown=!1,this.chunks=[]}if(d.prototype.get=function(M){if(!(M>this.length-1||M<0)){var K=M%this.chunkSize,ie=M/this.chunkSize|0;return this.getter(ie)[K]}},d.prototype.setDataGetter=function(M){this.getter=M},d.prototype.cacheLength=function(){var M=new XMLHttpRequest;if(M.open("HEAD",n,!1),M.send(null),!(M.status>=200&&M.status<300||M.status===304))throw new Error("Couldn't load "+n+". Status: "+M.status);var K=Number(M.getResponseHeader("Content-length")),ie,de=(ie=M.getResponseHeader("Accept-Ranges"))&&ie==="bytes",ue=(ie=M.getResponseHeader("Content-Encoding"))&&ie==="gzip",he=1024*1024;de||(he=K);var G=(ge,Te)=>{if(ge>Te)throw new Error("invalid range ("+ge+", "+Te+") or no bytes requested!");if(Te>K-1)throw new Error("only "+K+" bytes available! programmer error!");var xe=new XMLHttpRequest;if(xe.open("GET",n,!1),K!==he&&xe.setRequestHeader("Range","bytes="+ge+"-"+Te),xe.responseType="arraybuffer",xe.overrideMimeType&&xe.overrideMimeType("text/plain; charset=x-user-defined"),xe.send(null),!(xe.status>=200&&xe.status<300||xe.status===304))throw new Error("Couldn't load "+n+". Status: "+xe.status);return xe.response!==void 0?new Uint8Array(xe.response||[]):Rn(xe.responseText||"",!0)},J=this;J.setDataGetter(ge=>{var Te=ge*he,xe=(ge+1)*he-1;if(xe=Math.min(xe,K-1),typeof J.chunks[ge]>"u"&&(J.chunks[ge]=G(Te,xe)),typeof J.chunks[ge]>"u")throw new Error("doXHR failed!");return J.chunks[ge]}),(ue||!K)&&(he=K=1,K=this.getter(0).length,he=K,X("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=K,this._chunkSize=he,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var m,b}else var b={isDevice:!1,url:n};var E=p.createFile(e,t,b,o,s);b.contents?E.contents=b.contents:b.url&&(E.contents=null,E.url=b.url),Object.defineProperties(E,{usedBytes:{get:function(){return this.contents.length}}});var R={},A=Object.keys(E.stream_ops);A.forEach(M=>{var K=E.stream_ops[M];R[M]=function(){return p.forceLoadFile(E),K.apply(null,arguments)}});function B(M,K,ie,de,ue){var he=M.node.contents;if(ue>=he.length)return 0;var G=Math.min(he.length-ue,de);if(he.slice)for(var J=0;J<G;J++)K[ie+J]=he[ue+J];else for(var J=0;J<G;J++)K[ie+J]=he.get(ue+J);return G}return R.read=(M,K,ie,de,ue)=>(p.forceLoadFile(E),B(M,K,ie,de,ue)),R.mmap=(M,K,ie,de,ue)=>{p.forceLoadFile(E);var he=wl(K);if(!he)throw new p.ErrnoError(48);return B(M,le,he,K,ie),{ptr:he,allocated:!0}},E.stream_ops=R,E},createPreloadedFile:(e,t,n,o,s,d,m,b,E,R)=>{var A=t?Xt.resolve(Ae.join2(e,t)):e;function B(M){function K(ie){R&&R(),b||p.createDataFile(e,t,ie,o,s,E),d&&d(),S()}W.handledByPreloadPlugin(M,A,K,()=>{m&&m(),S()})||K(M)}h(),typeof n=="string"?cp(n,M=>B(M),m):B(n)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var o=p.indexedDB();try{var s=o.open(p.DB_NAME(),p.DB_VERSION)}catch(d){return n(d)}s.onupgradeneeded=()=>{X("creating db");var d=s.result;d.createObjectStore(p.DB_STORE_NAME)},s.onsuccess=()=>{var d=s.result,m=d.transaction([p.DB_STORE_NAME],"readwrite"),b=m.objectStore(p.DB_STORE_NAME),E=0,R=0,A=e.length;function B(){R==0?t():n()}e.forEach(M=>{var K=b.put(p.analyzePath(M).object.contents,M);K.onsuccess=()=>{E++,E+R==A&&B()},K.onerror=()=>{R++,E+R==A&&B()}}),m.onerror=n},s.onerror=n},loadFilesFromDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var o=p.indexedDB();try{var s=o.open(p.DB_NAME(),p.DB_VERSION)}catch(d){return n(d)}s.onupgradeneeded=n,s.onsuccess=()=>{var d=s.result;try{var m=d.transaction([p.DB_STORE_NAME],"readonly")}catch(M){n(M);return}var b=m.objectStore(p.DB_STORE_NAME),E=0,R=0,A=e.length;function B(){R==0?t():n()}e.forEach(M=>{var K=b.get(M);K.onsuccess=()=>{p.analyzePath(M).exists&&p.unlink(M),p.createDataFile(Ae.dirname(M),Ae.basename(M),K.result,!0,!0,!0),E++,E+R==A&&B()},K.onerror=()=>{R++,E+R==A&&B()}}),m.onerror=n},s.onerror=n}},Ce={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(Ae.isAbs(t))return t;var o;if(e===-100)o=p.cwd();else{var s=Ce.getStreamFromFD(e);o=s.path}if(t.length==0){if(!n)throw new p.ErrnoError(44);return o}return Ae.join2(o,t)},doStat:function(e,t,n){try{var o=e(t)}catch(s){if(s&&s.node&&Ae.normalize(t)!==Ae.normalize(p.getPath(s.node)))return-54;throw s}return j[n>>2]=o.dev,j[n+8>>2]=o.ino,j[n+12>>2]=o.mode,te[n+16>>2]=o.nlink,j[n+20>>2]=o.uid,j[n+24>>2]=o.gid,j[n+28>>2]=o.rdev,l=[o.size>>>0,(C=o.size,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],j[n+40>>2]=l[0],j[n+44>>2]=l[1],j[n+48>>2]=4096,j[n+52>>2]=o.blocks,l=[Math.floor(o.atime.getTime()/1e3)>>>0,(C=Math.floor(o.atime.getTime()/1e3),+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],j[n+56>>2]=l[0],j[n+60>>2]=l[1],te[n+64>>2]=0,l=[Math.floor(o.mtime.getTime()/1e3)>>>0,(C=Math.floor(o.mtime.getTime()/1e3),+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],j[n+72>>2]=l[0],j[n+76>>2]=l[1],te[n+80>>2]=0,l=[Math.floor(o.ctime.getTime()/1e3)>>>0,(C=Math.floor(o.ctime.getTime()/1e3),+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],j[n+88>>2]=l[0],j[n+92>>2]=l[1],te[n+96>>2]=0,l=[o.ino>>>0,(C=o.ino,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],j[n+104>>2]=l[0],j[n+108>>2]=l[1],0},doMsync:function(e,t,n,o,s){if(!p.isFile(t.node.mode))throw new p.ErrnoError(43);if(o&2)return 0;var d=ae.slice(e,e+n);p.msync(t,d,s,n,o)},varargs:void 0,get:function(){Ce.varargs+=4;var e=j[Ce.varargs-4>>2];return e},getStr:function(e){var t=Ee(e);return t},getStreamFromFD:function(e){var t=p.getStream(e);if(!t)throw new p.ErrnoError(8);return t}};function fp(e,t){try{return e=Ce.getStr(e),p.chmod(e,t),0}catch(n){if(typeof p>"u"||!(n instanceof p.ErrnoError))throw n;return-n.errno}}function dp(e,t){try{return p.fchmod(e,t),0}catch(n){if(typeof p>"u"||!(n instanceof p.ErrnoError))throw n;return-n.errno}}function hp(e){return j[ql()>>2]=e,e}function pp(e,t,n){Ce.varargs=n;try{var o=Ce.getStreamFromFD(e);switch(t){case 0:{var s=Ce.get();if(s<0)return-28;var d;return d=p.createStream(o,s),d.fd}case 1:case 2:return 0;case 3:return o.flags;case 4:{var s=Ce.get();return o.flags|=s,0}case 5:{var s=Ce.get(),m=0;return De[s+m>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return hp(28),-1;default:return-28}}catch(b){if(typeof p>"u"||!(b instanceof p.ErrnoError))throw b;return-b.errno}}function mp(e,t){try{var n=Ce.getStreamFromFD(e);return Ce.doStat(p.stat,n.path,t)}catch(o){if(typeof p>"u"||!(o instanceof p.ErrnoError))throw o;return-o.errno}}function El(e,t){return t+2097152>>>0<4194305-!!e?(e>>>0)+t*4294967296:NaN}function bp(e,t,n){try{var o=El(t,n);return isNaN(o)?-61:(p.ftruncate(e,o),0)}catch(s){if(typeof p>"u"||!(s instanceof p.ErrnoError))throw s;return-s.errno}}function gp(e,t){try{if(t===0)return-28;var n=p.cwd(),o=Oe(n)+1;return t<o?-68:(_e(n,e,t),o)}catch(s){if(typeof p>"u"||!(s instanceof p.ErrnoError))throw s;return-s.errno}}function yp(e,t,n){try{var o=Ce.getStreamFromFD(e);o.getdents||(o.getdents=p.readdir(o.path));for(var s=280,d=0,m=p.llseek(o,0,1),b=Math.floor(m/s);b<o.getdents.length&&d+s<=n;){var E,R,A=o.getdents[b];if(A===".")E=o.node.id,R=4;else if(A===".."){var B=p.lookupPath(o.path,{parent:!0});E=B.node.id,R=4}else{var M=p.lookupNode(o.node,A);E=M.id,R=p.isChrdev(M.mode)?2:p.isDir(M.mode)?4:p.isLink(M.mode)?10:8}l=[E>>>0,(C=E,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],j[t+d>>2]=l[0],j[t+d+4>>2]=l[1],l=[(b+1)*s>>>0,(C=(b+1)*s,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],j[t+d+8>>2]=l[0],j[t+d+12>>2]=l[1],De[t+d+16>>1]=280,le[t+d+18>>0]=R,_e(A,t+d+19,256),d+=s,b+=1}return p.llseek(o,b*s,0),d}catch(K){if(typeof p>"u"||!(K instanceof p.ErrnoError))throw K;return-K.errno}}function _p(e,t,n){Ce.varargs=n;try{var o=Ce.getStreamFromFD(e);switch(t){case 21509:case 21505:return o.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return o.tty?0:-59;case 21519:{if(!o.tty)return-59;var s=Ce.get();return j[s>>2]=0,0}case 21520:return o.tty?-28:-59;case 21531:{var s=Ce.get();return p.ioctl(o,t,s)}case 21523:return o.tty?0:-59;case 21524:return o.tty?0:-59;default:return-28}}catch(d){if(typeof p>"u"||!(d instanceof p.ErrnoError))throw d;return-d.errno}}function vp(e,t){try{return e=Ce.getStr(e),Ce.doStat(p.lstat,e,t)}catch(n){if(typeof p>"u"||!(n instanceof p.ErrnoError))throw n;return-n.errno}}function wp(e,t,n){try{return t=Ce.getStr(t),t=Ce.calculateAt(e,t),t=Ae.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),p.mkdir(t,n,0),0}catch(o){if(typeof p>"u"||!(o instanceof p.ErrnoError))throw o;return-o.errno}}function Ep(e,t,n,o){try{t=Ce.getStr(t);var s=o&256,d=o&4096;return o=o&-4353,t=Ce.calculateAt(e,t,d),Ce.doStat(s?p.lstat:p.stat,t,n)}catch(m){if(typeof p>"u"||!(m instanceof p.ErrnoError))throw m;return-m.errno}}function Sp(e,t,n,o){Ce.varargs=o;try{t=Ce.getStr(t),t=Ce.calculateAt(e,t);var s=o?Ce.get():0;return p.open(t,n,s).fd}catch(d){if(typeof p>"u"||!(d instanceof p.ErrnoError))throw d;return-d.errno}}function Cp(e,t,n,o){try{if(t=Ce.getStr(t),t=Ce.calculateAt(e,t),o<=0)return-28;var s=p.readlink(t),d=Math.min(o,Oe(s)),m=le[n+d];return _e(s,n,o+1),le[n+d]=m,d}catch(b){if(typeof p>"u"||!(b instanceof p.ErrnoError))throw b;return-b.errno}}function Tp(e,t,n,o){try{return t=Ce.getStr(t),o=Ce.getStr(o),t=Ce.calculateAt(e,t),o=Ce.calculateAt(n,o),p.rename(t,o),0}catch(s){if(typeof p>"u"||!(s instanceof p.ErrnoError))throw s;return-s.errno}}function xp(e,t){try{return e=Ce.getStr(e),Ce.doStat(p.stat,e,t)}catch(n){if(typeof p>"u"||!(n instanceof p.ErrnoError))throw n;return-n.errno}}function Rp(e,t){try{return e=Ce.getStr(e),t=Ce.getStr(t),p.symlink(e,t),0}catch(n){if(typeof p>"u"||!(n instanceof p.ErrnoError))throw n;return-n.errno}}function kp(e,t,n){try{return t=Ce.getStr(t),t=Ce.calculateAt(e,t),n===0?p.unlink(t):n===512?p.rmdir(t):P("Invalid flags passed to unlinkat"),0}catch(o){if(typeof p>"u"||!(o instanceof p.ErrnoError))throw o;return-o.errno}}function Pp(e){}var Sl="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking";function Ap(e,t){P(Sl)}function Fp(e,t){P(Sl)}function Dp(e,t,n,o,s){}function kn(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Ip(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Cl=e}var Cl=void 0;function nt(e){for(var t="",n=e;ae[n];)t+=Cl[ae[n++]];return t}var wr={},cr={},Pn={},Lp=48,Mp=57;function An(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=Lp&&t<=Mp?"_"+e:e}function Fn(e,t){return e=An(e),new Function("body","return function "+e+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(t)}function mo(e,t){var n=Fn(t,function(o){this.name=t,this.message=o;var s=new Error(o).stack;s!==void 0&&(this.stack=this.toString()+`
`+s.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},n}var Er=void 0;function Le(e){throw new Er(e)}var Tl=void 0;function Dn(e){throw new Tl(e)}function Tt(e,t,n){e.forEach(function(b){Pn[b]=t});function o(b){var E=n(b);E.length!==e.length&&Dn("Mismatched type converter count");for(var R=0;R<e.length;++R)jt(e[R],E[R])}var s=new Array(t.length),d=[],m=0;t.forEach((b,E)=>{cr.hasOwnProperty(b)?s[E]=cr[b]:(d.push(b),wr.hasOwnProperty(b)||(wr[b]=[]),wr[b].push(()=>{s[E]=cr[b],++m,m===d.length&&o(s)}))}),d.length===0&&o(s)}function jt(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var o=t.name;if(e||Le('type "'+o+'" must have a positive integer typeid pointer'),cr.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;Le("Cannot register type '"+o+"' twice")}if(cr[e]=t,delete Pn[e],wr.hasOwnProperty(e)){var s=wr[e];delete wr[e],s.forEach(d=>d())}}function jp(e,t,n,o,s){var d=kn(n);t=nt(t),jt(e,{name:t,fromWireType:function(m){return!!m},toWireType:function(m,b){return b?o:s},argPackAdvance:8,readValueFromPointer:function(m){var b;if(n===1)b=le;else if(n===2)b=De;else if(n===4)b=j;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(b[m>>d])},destructorFunction:null})}function Np(e){if(!(this instanceof Zt)||!(e instanceof Zt))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,o=e.$$.ptrType.registeredClass,s=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;o.baseClass;)s=o.upcast(s),o=o.baseClass;return t===o&&n===s}function Bp(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function bo(e){function t(n){return n.$$.ptrType.registeredClass.name}Le(t(e)+" instance already deleted")}var go=!1;function xl(e){}function Op(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function Rl(e){e.count.value-=1;var t=e.count.value===0;t&&Op(e)}function kl(e,t,n){if(t===n)return e;if(n.baseClass===void 0)return null;var o=kl(e,t,n.baseClass);return o===null?null:n.downcast(o)}var Pl={};function Up(){return Object.keys(Ur).length}function Wp(){var e=[];for(var t in Ur)Ur.hasOwnProperty(t)&&e.push(Ur[t]);return e}var Br=[];function yo(){for(;Br.length;){var e=Br.pop();e.$$.deleteScheduled=!1,e.delete()}}var Or=void 0;function zp(e){Or=e,Br.length&&Or&&Or(yo)}function Vp(){i.getInheritedInstanceCount=Up,i.getLiveInheritedInstances=Wp,i.flushPendingDeletes=yo,i.setDelayFunction=zp}var Ur={};function Gp(e,t){for(t===void 0&&Le("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function Kp(e,t){return t=Gp(e,t),Ur[t]}function In(e,t){(!t.ptrType||!t.ptr)&&Dn("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,o=!!t.smartPtr;return n!==o&&Dn("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Wr(Object.create(e,{$$:{value:t}}))}function Xp(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Kp(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var o=n.clone();return this.destructor(e),o}function s(){return this.isSmartPointer?In(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):In(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var d=this.registeredClass.getActualType(t),m=Pl[d];if(!m)return s.call(this);var b;this.isConst?b=m.constPointerType:b=m.pointerType;var E=kl(t,this.registeredClass,b.registeredClass);return E===null?s.call(this):this.isSmartPointer?In(b.registeredClass.instancePrototype,{ptrType:b,ptr:E,smartPtrType:this,smartPtr:e}):In(b.registeredClass.instancePrototype,{ptrType:b,ptr:E})}function Wr(e){return typeof FinalizationRegistry>"u"?(Wr=t=>t,e):(go=new FinalizationRegistry(t=>{Rl(t.$$)}),Wr=t=>{var n=t.$$,o=!!n.smartPtr;if(o){var s={$$:n};go.register(t,s,t)}return t},xl=t=>go.unregister(t),Wr(e))}function $p(){if(this.$$.ptr||bo(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Wr(Object.create(Object.getPrototypeOf(this),{$$:{value:Bp(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Yp(){this.$$.ptr||bo(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Le("Object already scheduled for deletion"),xl(this),Rl(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Zp(){return!this.$$.ptr}function Hp(){return this.$$.ptr||bo(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Le("Object already scheduled for deletion"),Br.push(this),Br.length===1&&Or&&Or(yo),this.$$.deleteScheduled=!0,this}function Jp(){Zt.prototype.isAliasOf=Np,Zt.prototype.clone=$p,Zt.prototype.delete=Yp,Zt.prototype.isDeleted=Zp,Zt.prototype.deleteLater=Hp}function Zt(){}function _o(e,t,n){if(e[t].overloadTable===void 0){var o=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||Le("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[o.argCount]=o}}function vo(e,t,n){i.hasOwnProperty(e)?((n===void 0||i[e].overloadTable!==void 0&&i[e].overloadTable[n]!==void 0)&&Le("Cannot register public name '"+e+"' twice"),_o(i,e,e),i.hasOwnProperty(n)&&Le("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),i[e].overloadTable[n]=t):(i[e]=t,n!==void 0&&(i[e].numArguments=n))}function Qp(e,t,n,o,s,d,m,b){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=o,this.baseClass=s,this.getActualType=d,this.upcast=m,this.downcast=b,this.pureVirtualFunctions=[]}function Ln(e,t,n){for(;t!==n;)t.upcast||Le("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function qp(e,t){if(t===null)return this.isReference&&Le("null is not a valid "+this.name),0;t.$$||Le('Cannot pass "'+Co(t)+'" as a '+this.name),t.$$.ptr||Le("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass,o=Ln(t.$$.ptr,n,this.registeredClass);return o}function em(e,t){var n;if(t===null)return this.isReference&&Le("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;t.$$||Le('Cannot pass "'+Co(t)+'" as a '+this.name),t.$$.ptr||Le("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&Le("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var o=t.$$.ptrType.registeredClass;if(n=Ln(t.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&Le("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:Le("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var s=t.clone();n=this.rawShare(n,He.toHandle(function(){s.delete()})),e!==null&&e.push(this.rawDestructor,n)}break;default:Le("Unsupporting sharing policy")}return n}function tm(e,t){if(t===null)return this.isReference&&Le("null is not a valid "+this.name),0;t.$$||Le('Cannot pass "'+Co(t)+'" as a '+this.name),t.$$.ptr||Le("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&Le("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass,o=Ln(t.$$.ptr,n,this.registeredClass);return o}function Mn(e){return this.fromWireType(j[e>>2])}function rm(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function nm(e){this.rawDestructor&&this.rawDestructor(e)}function im(e){e!==null&&e.delete()}function om(){Nt.prototype.getPointee=rm,Nt.prototype.destructor=nm,Nt.prototype.argPackAdvance=8,Nt.prototype.readValueFromPointer=Mn,Nt.prototype.deleteObject=im,Nt.prototype.fromWireType=Xp}function Nt(e,t,n,o,s,d,m,b,E,R,A){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=o,this.isSmartPointer=s,this.pointeeType=d,this.sharingPolicy=m,this.rawGetPointee=b,this.rawConstructor=E,this.rawShare=R,this.rawDestructor=A,!s&&t.baseClass===void 0?o?(this.toWireType=qp,this.destructorFunction=null):(this.toWireType=tm,this.destructorFunction=null):this.toWireType=em}function Al(e,t,n){i.hasOwnProperty(e)||Dn("Replacing nonexistant public symbol"),i[e].overloadTable!==void 0&&n!==void 0?i[e].overloadTable[n]=t:(i[e]=t,i[e].argCount=n)}function am(e,t,n){var o=i["dynCall_"+e];return n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)}var jn=[];function Ht(e){var t=jn[e];return t||(e>=jn.length&&(jn.length=e+1),jn[e]=t=ot.get(e)),t}function sm(e,t,n){if(e.includes("j"))return am(e,t,n);var o=Ht(t).apply(null,n);return o}function lm(e,t){var n=[];return function(){return n.length=0,Object.assign(n,arguments),sm(e,t,n)}}function ht(e,t){e=nt(e);function n(){return e.includes("j")?lm(e,t):Ht(t)}var o=n();return typeof o!="function"&&Le("unknown function pointer with signature "+e+": "+t),o}var Fl=void 0;function Dl(e){var t=eu(e),n=nt(t);return Bt(t),n}function fr(e,t){var n=[],o={};function s(d){if(!o[d]&&!cr[d]){if(Pn[d]){Pn[d].forEach(s);return}n.push(d),o[d]=!0}}throw t.forEach(s),new Fl(e+": "+n.map(Dl).join([", "]))}function um(e,t,n,o,s,d,m,b,E,R,A,B,M){A=nt(A),d=ht(s,d),b&&(b=ht(m,b)),R&&(R=ht(E,R)),M=ht(B,M);var K=An(A);vo(K,function(){fr("Cannot construct "+A+" due to unbound types",[o])}),Tt([e,t,n],o?[o]:[],function(ie){ie=ie[0];var de,ue;o?(de=ie.registeredClass,ue=de.instancePrototype):ue=Zt.prototype;var he=Fn(K,function(){if(Object.getPrototypeOf(this)!==G)throw new Er("Use 'new' to construct "+A);if(J.constructor_body===void 0)throw new Er(A+" has no accessible constructor");var pe=J.constructor_body[arguments.length];if(pe===void 0)throw new Er("Tried to invoke ctor of "+A+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(J.constructor_body).toString()+") parameters instead!");return pe.apply(this,arguments)}),G=Object.create(ue,{constructor:{value:he}});he.prototype=G;var J=new Qp(A,he,G,M,de,d,b,R),ge=new Nt(A,J,!0,!1,!1),Te=new Nt(A+"*",J,!1,!1,!1),xe=new Nt(A+" const*",J,!1,!0,!1);return Pl[e]={pointerType:Te,constPointerType:xe},Al(K,he),[ge,Te,xe]})}function Il(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=Fn(e.name||"unknownFunctionName",function(){});n.prototype=e.prototype;var o=new n,s=e.apply(o,t);return s instanceof Object?s:o}function wo(e){for(;e.length;){var t=e.pop(),n=e.pop();n(t)}}function Nn(e,t,n,o,s){var d=t.length;d<2&&Le("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var m=t[1]!==null&&n!==null,b=!1,E=1;E<t.length;++E)if(t[E]!==null&&t[E].destructorFunction===void 0){b=!0;break}for(var R=t[0].name!=="void",A="",B="",E=0;E<d-2;++E)A+=(E!==0?", ":"")+"arg"+E,B+=(E!==0?", ":"")+"arg"+E+"Wired";var M="return function "+An(e)+"("+A+`) {
if (arguments.length !== `+(d-2)+`) {
throwBindingError('function `+e+" called with ' + arguments.length + ' arguments, expected "+(d-2)+` args!');
}
`;b&&(M+=`var destructors = [];
`);var K=b?"destructors":"null",ie=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],de=[Le,o,s,wo,t[0],t[1]];m&&(M+="var thisWired = classParam.toWireType("+K+`, this);
`);for(var E=0;E<d-2;++E)M+="var arg"+E+"Wired = argType"+E+".toWireType("+K+", arg"+E+"); // "+t[E+2].name+`
`,ie.push("argType"+E),de.push(t[E+2]);if(m&&(B="thisWired"+(B.length>0?", ":"")+B),M+=(R?"var rv = ":"")+"invoker(fn"+(B.length>0?", ":"")+B+`);
`,b)M+=`runDestructors(destructors);
`;else for(var E=m?1:2;E<t.length;++E){var ue=E===1?"thisWired":"arg"+(E-2)+"Wired";t[E].destructorFunction!==null&&(M+=ue+"_dtor("+ue+"); // "+t[E].name+`
`,ie.push(ue+"_dtor"),de.push(t[E].destructorFunction))}R&&(M+=`var ret = retType.fromWireType(rv);
return ret;
`),M+=`}
`,ie.push(M);var he=Il(Function,ie).apply(null,de);return he}function Bn(e,t){for(var n=[],o=0;o<e;o++)n.push(te[t+o*4>>2]);return n}function cm(e,t,n,o,s,d,m){var b=Bn(n,o);t=nt(t),d=ht(s,d),Tt([],[e],function(E){E=E[0];var R=E.name+"."+t;function A(){fr("Cannot call "+R+" due to unbound types",b)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var B=E.registeredClass.constructor;return B[t]===void 0?(A.argCount=n-1,B[t]=A):(_o(B,t,R),B[t].overloadTable[n-1]=A),Tt([],b,function(M){var K=[M[0],null].concat(M.slice(1)),ie=Nn(R,K,null,d,m);return B[t].overloadTable===void 0?(ie.argCount=n-1,B[t]=ie):B[t].overloadTable[n-1]=ie,[]}),[]})}function fm(e,t,n,o,s,d){Ne(t>0);var m=Bn(t,n);s=ht(o,s),Tt([],[e],function(b){b=b[0];var E="constructor "+b.name;if(b.registeredClass.constructor_body===void 0&&(b.registeredClass.constructor_body=[]),b.registeredClass.constructor_body[t-1]!==void 0)throw new Er("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+b.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return b.registeredClass.constructor_body[t-1]=()=>{fr("Cannot construct "+b.name+" due to unbound types",m)},Tt([],m,function(R){return R.splice(1,0,null),b.registeredClass.constructor_body[t-1]=Nn(E,R,null,s,d),[]}),[]})}function dm(e,t,n,o,s,d,m,b){var E=Bn(n,o);t=nt(t),d=ht(s,d),Tt([],[e],function(R){R=R[0];var A=R.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),b&&R.registeredClass.pureVirtualFunctions.push(t);function B(){fr("Cannot call "+A+" due to unbound types",E)}var M=R.registeredClass.instancePrototype,K=M[t];return K===void 0||K.overloadTable===void 0&&K.className!==R.name&&K.argCount===n-2?(B.argCount=n-2,B.className=R.name,M[t]=B):(_o(M,t,A),M[t].overloadTable[n-2]=B),Tt([],E,function(ie){var de=Nn(A,ie,R,d,m);return M[t].overloadTable===void 0?(de.argCount=n-2,M[t]=de):M[t].overloadTable[n-2]=de,[]}),[]})}function Ll(e,t,n){return e instanceof Object||Le(n+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||Le(n+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||Le("cannot call emscripten binding method "+n+" on deleted object"),Ln(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}function hm(e,t,n,o,s,d,m,b,E,R){t=nt(t),s=ht(o,s),Tt([],[e],function(A){A=A[0];var B=A.name+"."+t,M={get:function(){fr("Cannot access "+B+" due to unbound types",[n,m])},enumerable:!0,configurable:!0};return E?M.set=()=>{fr("Cannot access "+B+" due to unbound types",[n,m])}:M.set=K=>{Le(B+" is a read-only property")},Object.defineProperty(A.registeredClass.instancePrototype,t,M),Tt([],E?[n,m]:[n],function(K){var ie=K[0],de={get:function(){var he=Ll(this,A,B+" getter");return ie.fromWireType(s(d,he))},enumerable:!0};if(E){E=ht(b,E);var ue=K[1];de.set=function(he){var G=Ll(this,A,B+" setter"),J=[];E(R,G,ue.toWireType(J,he)),wo(J)}}return Object.defineProperty(A.registeredClass.instancePrototype,t,de),[]}),[]})}var Eo=[],xt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function So(e){e>4&&--xt[e].refcount===0&&(xt[e]=void 0,Eo.push(e))}function pm(){for(var e=0,t=5;t<xt.length;++t)xt[t]!==void 0&&++e;return e}function mm(){for(var e=5;e<xt.length;++e)if(xt[e]!==void 0)return xt[e];return null}function bm(){i.count_emval_handles=pm,i.get_first_emval=mm}var He={toValue:e=>(e||Le("Cannot use deleted val. handle = "+e),xt[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var t=Eo.length?Eo.pop():xt.length;return xt[t]={refcount:1,value:e},t}}}};function gm(e,t){t=nt(t),jt(e,{name:t,fromWireType:function(n){var o=He.toValue(n);return So(n),o},toWireType:function(n,o){return He.toHandle(o)},argPackAdvance:8,readValueFromPointer:Mn,destructorFunction:null})}function ym(e,t,n){switch(t){case 0:return function(o){var s=n?le:ae;return this.fromWireType(s[o])};case 1:return function(o){var s=n?De:Se;return this.fromWireType(s[o>>1])};case 2:return function(o){var s=n?j:te;return this.fromWireType(s[o>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function _m(e,t,n,o){var s=kn(n);t=nt(t);function d(){}d.values={},jt(e,{name:t,constructor:d,fromWireType:function(m){return this.constructor.values[m]},toWireType:function(m,b){return b.value},argPackAdvance:8,readValueFromPointer:ym(t,s,o),destructorFunction:null}),vo(t,d)}function On(e,t){var n=cr[e];return n===void 0&&Le(t+" has unknown type "+Dl(e)),n}function vm(e,t,n){var o=On(e,"enum");t=nt(t);var s=o.constructor,d=Object.create(o.constructor.prototype,{value:{value:n},constructor:{value:Fn(o.name+"_"+t,function(){})}});s.values[n]=d,s[t]=d}function Co(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function wm(e,t){switch(t){case 2:return function(n){return this.fromWireType(q[n>>2])};case 3:return function(n){return this.fromWireType(ve[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Em(e,t,n){var o=kn(n);t=nt(t),jt(e,{name:t,fromWireType:function(s){return s},toWireType:function(s,d){return d},argPackAdvance:8,readValueFromPointer:wm(t,o),destructorFunction:null})}function Sm(e,t,n,o,s,d){var m=Bn(t,n);e=nt(e),s=ht(o,s),vo(e,function(){fr("Cannot call "+e+" due to unbound types",m)},t-1),Tt([],m,function(b){var E=[b[0],null].concat(b.slice(1));return Al(e,Nn(e,E,null,s,d),t-1),[]})}function Cm(e,t,n){switch(t){case 0:return n?function(o){return le[o]}:function(o){return ae[o]};case 1:return n?function(o){return De[o>>1]}:function(o){return Se[o>>1]};case 2:return n?function(o){return j[o>>2]}:function(o){return te[o>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Tm(e,t,n,o,s){t=nt(t);var d=kn(n),m=A=>A;if(o===0){var b=32-8*n;m=A=>A<<b>>>b}var E=t.includes("unsigned"),R;E?R=function(A,B){return B>>>0}:R=function(A,B){return B},jt(e,{name:t,fromWireType:m,toWireType:R,argPackAdvance:8,readValueFromPointer:Cm(t,d,o!==0),destructorFunction:null})}function xm(e,t,n){var o=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],s=o[t];function d(m){m=m>>2;var b=te,E=b[m],R=b[m+1];return new s(Ie,R,E)}n=nt(n),jt(e,{name:n,fromWireType:d,argPackAdvance:8,readValueFromPointer:d},{ignoreDuplicateRegistrations:!0})}function Rm(e,t,n,o,s,d,m,b,E,R,A,B){n=nt(n),d=ht(s,d),b=ht(m,b),R=ht(E,R),B=ht(A,B),Tt([e],[t],function(M){M=M[0];var K=new Nt(n,M.registeredClass,!1,!1,!0,M,o,d,b,R,B);return[K]})}function km(e,t){t=nt(t);var n=t==="std::string";jt(e,{name:t,fromWireType:function(o){var s=te[o>>2],d=o+4,m;if(n)for(var b=d,E=0;E<=s;++E){var R=d+E;if(E==s||ae[R]==0){var A=R-b,B=Ee(b,A);m===void 0?m=B:(m+=String.fromCharCode(0),m+=B),b=R+1}}else{for(var M=new Array(s),E=0;E<s;++E)M[E]=String.fromCharCode(ae[d+E]);m=M.join("")}return Bt(o),m},toWireType:function(o,s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));var d,m=typeof s=="string";m||s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Int8Array||Le("Cannot pass non-string to std::string"),n&&m?d=Oe(s):d=s.length;var b=wt(4+d+1),E=b+4;if(te[b>>2]=d,n&&m)_e(s,E,d+1);else if(m)for(var R=0;R<d;++R){var A=s.charCodeAt(R);A>255&&(Bt(E),Le("String has UTF-16 code units that do not fit in 8 bits")),ae[E+R]=A}else for(var R=0;R<d;++R)ae[E+R]=s[R];return o!==null&&o.push(Bt,b),b},argPackAdvance:8,readValueFromPointer:Mn,destructorFunction:function(o){Bt(o)}})}var Ml=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function Pm(e,t){for(var n=e,o=n>>1,s=o+t/2;!(o>=s)&&Se[o];)++o;if(n=o<<1,n-e>32&&Ml)return Ml.decode(ae.subarray(e,n));for(var d="",m=0;!(m>=t/2);++m){var b=De[e+m*2>>1];if(b==0)break;d+=String.fromCharCode(b)}return d}function Am(e,t,n){if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var o=t,s=n<e.length*2?n/2:e.length,d=0;d<s;++d){var m=e.charCodeAt(d);De[t>>1]=m,t+=2}return De[t>>1]=0,t-o}function Fm(e){return e.length*2}function Dm(e,t){for(var n=0,o="";!(n>=t/4);){var s=j[e+n*4>>2];if(s==0)break;if(++n,s>=65536){var d=s-65536;o+=String.fromCharCode(55296|d>>10,56320|d&1023)}else o+=String.fromCharCode(s)}return o}function Im(e,t,n){if(n===void 0&&(n=2147483647),n<4)return 0;for(var o=t,s=o+n-4,d=0;d<e.length;++d){var m=e.charCodeAt(d);if(m>=55296&&m<=57343){var b=e.charCodeAt(++d);m=65536+((m&1023)<<10)|b&1023}if(j[t>>2]=m,t+=4,t+4>s)break}return j[t>>2]=0,t-o}function Lm(e){for(var t=0,n=0;n<e.length;++n){var o=e.charCodeAt(n);o>=55296&&o<=57343&&++n,t+=4}return t}function Mm(e,t,n){n=nt(n);var o,s,d,m,b;t===2?(o=Pm,s=Am,m=Fm,d=()=>Se,b=1):t===4&&(o=Dm,s=Im,m=Lm,d=()=>te,b=2),jt(e,{name:n,fromWireType:function(E){for(var R=te[E>>2],A=d(),B,M=E+4,K=0;K<=R;++K){var ie=E+4+K*t;if(K==R||A[ie>>b]==0){var de=ie-M,ue=o(M,de);B===void 0?B=ue:(B+=String.fromCharCode(0),B+=ue),M=ie+t}}return Bt(E),B},toWireType:function(E,R){typeof R!="string"&&Le("Cannot pass non-string to C++ string type "+n);var A=m(R),B=wt(4+A+t);return te[B>>2]=A>>b,s(R,B+4,A+t),E!==null&&E.push(Bt,B),B},argPackAdvance:8,readValueFromPointer:Mn,destructorFunction:function(E){Bt(E)}})}function jm(e,t){t=nt(t),jt(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(n,o){}})}function Nm(e){var t=Ke.xhrs[e];t&&(delete Ke.xhrs[e],t.readyState>0&&t.readyState<4&&t.abort())}var Bm=!0;function Om(){return Bm}function Um(e,t,n){e=He.toValue(e),t=On(t,"emval::as");var o=[],s=He.toHandle(o);return te[n>>2]=s,t.toWireType(o,e)}function jl(e,t){for(var n=new Array(e),o=0;o<e;++o)n[o]=On(te[t+o*me>>2],"parameter "+o);return n}function Wm(e,t,n,o){e=He.toValue(e);for(var s=jl(t,n),d=new Array(t),m=0;m<t;++m){var b=s[m];d[m]=b.readValueFromPointer(o),o+=b.argPackAdvance}var E=e.apply(void 0,d);return He.toHandle(E)}function zm(e){var t=[];return te[e>>2]=He.toHandle(t),t}var Vm={};function Un(e){var t=Vm[e];return t===void 0?nt(e):t}var Wn=[];function Gm(e,t,n,o,s){return e=Wn[e],t=He.toValue(t),n=Un(n),e(t,n,zm(o),s)}function Km(e,t,n,o){e=Wn[e],t=He.toValue(t),n=Un(n),e(t,n,null,o)}function Xm(e){var t=Wn.length;return Wn.push(e),t}var Nl=[];function $m(e,t){var n=jl(e,t),o=n[0],s=o.name+"_$"+n.slice(1).map(function(ie){return ie.name}).join("_")+"$",d=Nl[s];if(d!==void 0)return d;for(var m=["retType"],b=[o],E="",R=0;R<e-1;++R)E+=(R!==0?", ":"")+"arg"+R,m.push("argType"+R),b.push(n[1+R]);for(var A=An("methodCaller_"+s),B="return function "+A+`(handle, name, destructors, args) {
`,M=0,R=0;R<e-1;++R)B+="    var arg"+R+" = argType"+R+".readValueFromPointer(args"+(M?"+"+M:"")+`);
`,M+=n[R+1].argPackAdvance;B+="    var rv = handle[name]("+E+`);
`;for(var R=0;R<e-1;++R)n[R+1].deleteObject&&(B+="    argType"+R+".deleteObject(arg"+R+`);
`);o.isVoid||(B+=`    return retType.toWireType(destructors, rv);
`),B+=`};
`,m.push(B);var K=Il(Function,m).apply(null,b);return d=Xm(K),Nl[s]=d,d}function Ym(e){return e=Un(e),He.toHandle(i[e])}function Zm(e,t){return e=He.toValue(e),t=He.toValue(t),He.toHandle(e[t])}function Hm(e){e>4&&(xt[e].refcount+=1)}function Jm(e){return e=He.toValue(e),typeof e=="number"}function Qm(e){return He.toHandle(Un(e))}function qm(e){var t=He.toValue(e);wo(t),So(e)}function e0(e,t,n){e=He.toValue(e),t=He.toValue(t),n=He.toValue(n),e[t]=n}function t0(e,t){e=On(e,"_emval_take_value");var n=e.readValueFromPointer(t);return He.toHandle(n)}function Bl(e){return te[e>>2]+j[e+4>>2]*4294967296}function r0(e,t){var n=new Date(Bl(e)*1e3);j[t>>2]=n.getUTCSeconds(),j[t+4>>2]=n.getUTCMinutes(),j[t+8>>2]=n.getUTCHours(),j[t+12>>2]=n.getUTCDate(),j[t+16>>2]=n.getUTCMonth(),j[t+20>>2]=n.getUTCFullYear()-1900,j[t+24>>2]=n.getUTCDay();var o=Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0),s=(n.getTime()-o)/(1e3*60*60*24)|0;j[t+28>>2]=s}function zr(e){return e%4===0&&(e%100!==0||e%400===0)}var n0=[0,31,60,91,121,152,182,213,244,274,305,335],i0=[0,31,59,90,120,151,181,212,243,273,304,334];function Ol(e){var t=zr(e.getFullYear()),n=t?n0:i0,o=n[e.getMonth()]+e.getDate()-1;return o}function o0(e,t){var n=new Date(Bl(e)*1e3);j[t>>2]=n.getSeconds(),j[t+4>>2]=n.getMinutes(),j[t+8>>2]=n.getHours(),j[t+12>>2]=n.getDate(),j[t+16>>2]=n.getMonth(),j[t+20>>2]=n.getFullYear()-1900,j[t+24>>2]=n.getDay();var o=Ol(n)|0;j[t+28>>2]=o,j[t+36>>2]=-(n.getTimezoneOffset()*60);var s=new Date(n.getFullYear(),0,1),d=new Date(n.getFullYear(),6,1).getTimezoneOffset(),m=s.getTimezoneOffset(),b=(d!=m&&n.getTimezoneOffset()==Math.min(m,d))|0;j[t+32>>2]=b}function a0(e){var t=new Date(j[e+20>>2]+1900,j[e+16>>2],j[e+12>>2],j[e+8>>2],j[e+4>>2],j[e>>2],0),n=j[e+32>>2],o=t.getTimezoneOffset(),s=new Date(t.getFullYear(),0,1),d=new Date(t.getFullYear(),6,1).getTimezoneOffset(),m=s.getTimezoneOffset(),b=Math.min(m,d);if(n<0)j[e+32>>2]=+(d!=m&&b==o);else if(n>0!=(b==o)){var E=Math.max(m,d),R=n>0?b:E;t.setTime(t.getTime()+(R-o)*6e4)}j[e+24>>2]=t.getDay();var A=Ol(t)|0;return j[e+28>>2]=A,j[e>>2]=t.getSeconds(),j[e+4>>2]=t.getMinutes(),j[e+8>>2]=t.getHours(),j[e+12>>2]=t.getDate(),j[e+16>>2]=t.getMonth(),j[e+20>>2]=t.getYear(),t.getTime()/1e3|0}function s0(e,t,n,o,s,d,m){try{var b=Ce.getStreamFromFD(o),E=p.mmap(b,e,s,t,n),R=E.ptr;return j[d>>2]=E.allocated,te[m>>2]=R,0}catch(A){if(typeof p>"u"||!(A instanceof p.ErrnoError))throw A;return-A.errno}}function l0(e,t,n,o,s,d){try{var m=Ce.getStreamFromFD(s);n&2&&Ce.doMsync(e,m,t,o,d),p.munmap(m)}catch(b){if(typeof p>"u"||!(b instanceof p.ErrnoError))throw b;return-b.errno}}function zn(e){var t=Oe(e)+1,n=wt(t);return n&&ce(e,le,n,t),n}function u0(e,t,n){var o=new Date().getFullYear(),s=new Date(o,0,1),d=new Date(o,6,1),m=s.getTimezoneOffset(),b=d.getTimezoneOffset(),E=Math.max(m,b);te[e>>2]=E*60,j[t>>2]=+(m!=b);function R(ie){var de=ie.toTimeString().match(/\(([A-Za-z ]+)\)$/);return de?de[1]:"GMT"}var A=R(s),B=R(d),M=zn(A),K=zn(B);b<m?(te[n>>2]=M,te[n+4>>2]=K):(te[n>>2]=K,te[n+4>>2]=M)}function c0(){P("")}function To(e,t){if(W.mainLoop.timingMode=e,W.mainLoop.timingValue=t,!W.mainLoop.func)return 1;if(W.mainLoop.running||(W.mainLoop.running=!0),e==0)W.mainLoop.scheduler=function(){var d=Math.max(0,W.mainLoop.tickStartTime+t-Vn())|0;setTimeout(W.mainLoop.runner,d)},W.mainLoop.method="timeout";else if(e==1)W.mainLoop.scheduler=function(){W.requestAnimationFrame(W.mainLoop.runner)},W.mainLoop.method="rAF";else if(e==2){if(typeof setImmediate>"u"){var n=[],o="setimmediate",s=d=>{(d.data===o||d.data.target===o)&&(d.stopPropagation(),n.shift()())};addEventListener("message",s,!0),setImmediate=function(d){n.push(d),postMessage(o,"*")}}W.mainLoop.scheduler=function(){setImmediate(W.mainLoop.runner)},W.mainLoop.method="immediate"}return 0}var Vn;Vn=()=>performance.now();function f0(e){ye=e,mt()||(i.onExit&&i.onExit(e),Xe=!0),_(e,new ze(e))}function d0(e,t){ye=e,f0(e)}var h0=d0;function p0(e){if(e instanceof ze||e=="unwind")return ye;_(1,e)}function m0(e,t,n,o,s){Ne(!W.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),W.mainLoop.func=e,W.mainLoop.arg=o;var d=W.mainLoop.currentlyRunningMainloop;function m(){return!(d<W.mainLoop.currentlyRunningMainloop)}if(W.mainLoop.running=!1,W.mainLoop.runner=function(){if(!Xe){if(W.mainLoop.queue.length>0){var b=Date.now(),E=W.mainLoop.queue.shift();if(E.func(E.arg),W.mainLoop.remainingBlockers){var R=W.mainLoop.remainingBlockers,A=R%1==0?R-1:Math.floor(R);E.counted?W.mainLoop.remainingBlockers=A:(A=A+.5,W.mainLoop.remainingBlockers=(8*R+A)/9)}if(X('main loop blocker "'+E.name+'" took '+(Date.now()-b)+" ms"),W.mainLoop.updateStatus(),!m())return;setTimeout(W.mainLoop.runner,0);return}if(m()){if(W.mainLoop.currentFrameNumber=W.mainLoop.currentFrameNumber+1|0,W.mainLoop.timingMode==1&&W.mainLoop.timingValue>1&&W.mainLoop.currentFrameNumber%W.mainLoop.timingValue!=0){W.mainLoop.scheduler();return}else W.mainLoop.timingMode==0&&(W.mainLoop.tickStartTime=Vn());W.mainLoop.runIter(e),m()&&(typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),W.mainLoop.scheduler())}}},s||(t&&t>0?To(0,1e3/t):To(1,1),W.mainLoop.scheduler()),n)throw"unwind"}function Gn(e){if(!Xe)try{e()}catch(t){p0(t)}}function Ul(e,t){return setTimeout(function(){Gn(e)},t)}function Vr(e){Vr.shown||(Vr.shown={}),Vr.shown[e]||(Vr.shown[e]=1,we(e))}var W={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){W.mainLoop.scheduler=null,W.mainLoop.currentlyRunningMainloop++},resume:function(){W.mainLoop.currentlyRunningMainloop++;var e=W.mainLoop.timingMode,t=W.mainLoop.timingValue,n=W.mainLoop.func;W.mainLoop.func=null,m0(n,0,!1,W.mainLoop.arg,!0),To(e,t),W.mainLoop.scheduler()},updateStatus:function(){if(i.setStatus){var e=i.statusMessage||"Please wait...",t=W.mainLoop.remainingBlockers,n=W.mainLoop.expectedBlockers;t?t<n?i.setStatus(e+" ("+(n-t)+"/"+n+")"):i.setStatus(e):i.setStatus("")}},runIter:function(e){if(!Xe){if(i.preMainLoop){var t=i.preMainLoop();if(t===!1)return}Gn(e),i.postMainLoop&&i.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(i.preloadPlugins||(i.preloadPlugins=[]),W.initted)return;W.initted=!0;try{new Blob,W.hasBlobConstructor=!0}catch{W.hasBlobConstructor=!1,we("warning: no blob constructor, cannot create blobs with mimetypes")}W.BlobBuilder=typeof MozBlobBuilder<"u"?MozBlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:W.hasBlobConstructor?null:we("warning: no BlobBuilder"),W.URLObject=typeof window<"u"?window.URL?window.URL:window.webkitURL:void 0,!i.noImageDecoding&&typeof W.URLObject>"u"&&(we("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),i.noImageDecoding=!0);var e={};e.canHandle=function(s){return!i.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(s)},e.handle=function(s,d,m,b){var E=null;if(W.hasBlobConstructor)try{E=new Blob([s],{type:W.getMimetype(d)}),E.size!==s.length&&(E=new Blob([new Uint8Array(s).buffer],{type:W.getMimetype(d)}))}catch(M){Vr("Blob constructor present but fails: "+M+"; falling back to blob builder")}if(!E){var R=new W.BlobBuilder;R.append(new Uint8Array(s).buffer),E=R.getBlob()}var A=W.URLObject.createObjectURL(E),B=new Image;B.onload=()=>{Ne(B.complete,"Image "+d+" could not be decoded");var M=document.createElement("canvas");M.width=B.width,M.height=B.height;var K=M.getContext("2d");K.drawImage(B,0,0),W.URLObject.revokeObjectURL(A),m&&m(s)},B.onerror=M=>{X("Image "+A+" could not be decoded"),b&&b()},B.src=A},i.preloadPlugins.push(e);var t={};t.canHandle=function(s){return!i.noAudioDecoding&&s.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},t.handle=function(s,d,m,b){var E=!1;function R(ie){E||(E=!0,m&&m(s))}function A(){E||(E=!0,new Audio,b&&b())}if(W.hasBlobConstructor){try{var B=new Blob([s],{type:W.getMimetype(d)})}catch{return A()}var M=W.URLObject.createObjectURL(B),K=new Audio;K.addEventListener("canplaythrough",()=>R(),!1),K.onerror=function(ie){if(E)return;we("warning: browser could not fully decode audio "+d+", trying slower base64 approach");function de(ue){for(var he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G="=",J="",ge=0,Te=0,xe=0;xe<ue.length;xe++)for(ge=ge<<8|ue[xe],Te+=8;Te>=6;){var pe=ge>>Te-6&63;Te-=6,J+=he[pe]}return Te==2?(J+=he[(ge&3)<<4],J+=G+G):Te==4&&(J+=he[(ge&15)<<2],J+=G),J}K.src="data:audio/x-"+d.substr(-3)+";base64,"+de(s),R()},K.src=M,Ul(function(){R()},1e4)}else return A()},i.preloadPlugins.push(t);function n(){W.pointerLock=document.pointerLockElement===i.canvas||document.mozPointerLockElement===i.canvas||document.webkitPointerLockElement===i.canvas||document.msPointerLockElement===i.canvas}var o=i.canvas;o&&(o.requestPointerLock=o.requestPointerLock||o.mozRequestPointerLock||o.webkitRequestPointerLock||o.msRequestPointerLock||(()=>{}),o.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),o.exitPointerLock=o.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",n,!1),document.addEventListener("mozpointerlockchange",n,!1),document.addEventListener("webkitpointerlockchange",n,!1),document.addEventListener("mspointerlockchange",n,!1),i.elementPointerLock&&o.addEventListener("click",s=>{!W.pointerLock&&i.canvas.requestPointerLock&&(i.canvas.requestPointerLock(),s.preventDefault())},!1))},handledByPreloadPlugin:function(e,t,n,o){W.init();var s=!1;return i.preloadPlugins.forEach(function(d){s||d.canHandle(t)&&(d.handle(e,t,n,o),s=!0)}),s},createContext:function(e,t,n,o){if(t&&i.ctx&&e==i.canvas)return i.ctx;var s,d;if(t){var m={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext<"u"?2:1};if(o)for(var b in o)m[b]=o[b];typeof H<"u"&&(d=H.createContext(e,m),d&&(s=H.getContext(d).GLctx))}else s=e.getContext("2d");return s?(n&&(t||Ne(typeof V>"u","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),i.ctx=s,t&&H.makeContextCurrent(d),i.useWebGL=t,W.moduleContextCreatedCallbacks.forEach(function(E){E()}),W.init()),s):null},destroyContext:function(e,t,n){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(e,t){W.lockPointer=e,W.resizeCanvas=t,typeof W.lockPointer>"u"&&(W.lockPointer=!0),typeof W.resizeCanvas>"u"&&(W.resizeCanvas=!1);var n=i.canvas;function o(){W.isFullscreen=!1;var d=n.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===d?(n.exitFullscreen=W.exitFullscreen,W.lockPointer&&n.requestPointerLock(),W.isFullscreen=!0,W.resizeCanvas?W.setFullscreenCanvasSize():W.updateCanvasDimensions(n)):(d.parentNode.insertBefore(n,d),d.parentNode.removeChild(d),W.resizeCanvas?W.setWindowedCanvasSize():W.updateCanvasDimensions(n)),i.onFullScreen&&i.onFullScreen(W.isFullscreen),i.onFullscreen&&i.onFullscreen(W.isFullscreen)}W.fullscreenHandlersInstalled||(W.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",o,!1),document.addEventListener("mozfullscreenchange",o,!1),document.addEventListener("webkitfullscreenchange",o,!1),document.addEventListener("MSFullscreenChange",o,!1));var s=document.createElement("div");n.parentNode.insertBefore(s,n),s.appendChild(n),s.requestFullscreen=s.requestFullscreen||s.mozRequestFullScreen||s.msRequestFullscreen||(s.webkitRequestFullscreen?()=>s.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(s.webkitRequestFullScreen?()=>s.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),s.requestFullscreen()},exitFullscreen:function(){if(!W.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){};return e.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(W.nextRAF===0)W.nextRAF=t+1e3/60;else for(;t+2>=W.nextRAF;)W.nextRAF+=1e3/60;var n=Math.max(W.nextRAF-t,0);setTimeout(e,n)},requestAnimationFrame:function(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var t=W.fakeRequestAnimationFrame;t(e)},safeSetTimeout:function(e,t){return Ul(e,t)},safeRequestAnimationFrame:function(e){return W.requestAnimationFrame(function(){Gn(e)})},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(e){if(W.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?W.mouseMovementX=W.mouseMovementY=0:(W.mouseMovementX=W.getMovementX(e),W.mouseMovementY=W.getMovementY(e)),typeof SDL<"u"?(W.mouseX=SDL.mouseX+W.mouseMovementX,W.mouseY=SDL.mouseY+W.mouseMovementY):(W.mouseX+=W.mouseMovementX,W.mouseY+=W.mouseMovementY);else{var t=i.canvas.getBoundingClientRect(),n=i.canvas.width,o=i.canvas.height,s=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,d=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset;if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var m=e.touch;if(m===void 0)return;var b=m.pageX-(s+t.left),E=m.pageY-(d+t.top);b=b*(n/t.width),E=E*(o/t.height);var R={x:b,y:E};if(e.type==="touchstart")W.lastTouches[m.identifier]=R,W.touches[m.identifier]=R;else if(e.type==="touchend"||e.type==="touchmove"){var A=W.touches[m.identifier];A||(A=R),W.lastTouches[m.identifier]=A,W.touches[m.identifier]=R}return}var B=e.pageX-(s+t.left),M=e.pageY-(d+t.top);B=B*(n/t.width),M=M*(o/t.height),W.mouseMovementX=B-W.mouseX,W.mouseMovementY=M-W.mouseY,W.mouseX=B,W.mouseY=M}},resizeListeners:[],updateResizeListeners:function(){var e=i.canvas;W.resizeListeners.forEach(function(t){t(e.width,e.height)})},setCanvasSize:function(e,t,n){var o=i.canvas;W.updateCanvasDimensions(o,e,t),n||W.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL<"u"){var e=te[SDL.screen>>2];e=e|8388608,j[SDL.screen>>2]=e}W.updateCanvasDimensions(i.canvas),W.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL<"u"){var e=te[SDL.screen>>2];e=e&-8388609,j[SDL.screen>>2]=e}W.updateCanvasDimensions(i.canvas),W.updateResizeListeners()},updateCanvasDimensions:function(e,t,n){t&&n?(e.widthNative=t,e.heightNative=n):(t=e.widthNative,n=e.heightNative);var o=t,s=n;if(i.forcedAspectRatio&&i.forcedAspectRatio>0&&(o/s<i.forcedAspectRatio?o=Math.round(s*i.forcedAspectRatio):s=Math.round(o/i.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen<"u"){var d=Math.min(screen.width/o,screen.height/s);o=Math.round(o*d),s=Math.round(s*d)}W.resizeCanvas?(e.width!=o&&(e.width=o),e.height!=s&&(e.height=s),typeof e.style<"u"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=t&&(e.width=t),e.height!=n&&(e.height=n),typeof e.style<"u"&&(o!=t||s!=n?(e.style.setProperty("width",o+"px","important"),e.style.setProperty("height",s+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}},x={QUEUE_INTERVAL:25,QUEUE_LOOKAHEAD:.1,DEVICE_NAME:"Emscripten OpenAL",CAPTURE_DEVICE_NAME:"Emscripten OpenAL capture",ALC_EXTENSIONS:{ALC_SOFT_pause_device:!0,ALC_SOFT_HRTF:!0},AL_EXTENSIONS:{AL_EXT_float32:!0,AL_SOFT_loop_points:!0,AL_SOFT_source_length:!0,AL_EXT_source_distance_model:!0,AL_SOFT_source_spatialize:!0},_alcErr:0,alcErr:0,deviceRefCounts:{},alcStringCache:{},paused:!1,stringCache:{},contexts:{},currentCtx:null,buffers:{0:{id:0,refCount:0,audioBuf:null,frequency:0,bytesPerSample:2,channels:1,length:0}},paramArray:[],_nextId:1,newId:function(){return x.freeIds.length>0?x.freeIds.pop():x._nextId++},freeIds:[],scheduleContextAudio:function(e){if(!(W.mainLoop.timingMode===1&&document.visibilityState!="visible"))for(var t in e.sources)x.scheduleSourceAudio(e.sources[t])},scheduleSourceAudio:function(e,t){if(!(W.mainLoop.timingMode===1&&document.visibilityState!="visible")&&e.state===4114){for(var n=x.updateSourceTime(e),o=e.bufStartTime,s=e.bufOffset,d=e.bufsProcessed,m=0;m<e.audioQueue.length;m++){var b=e.audioQueue[m];o=b._startTime+b._duration,s=0,d+=b._skipCount+1}t||(t=x.QUEUE_LOOKAHEAD);for(var E=n+t,R=0;o<E;){if(d>=e.bufQueue.length)if(e.looping)d%=e.bufQueue.length;else break;var A=e.bufQueue[d%e.bufQueue.length];if(A.length===0){if(R++,R===e.bufQueue.length)break}else{var b=e.context.audioCtx.createBufferSource();b.buffer=A.audioBuf,b.playbackRate.value=e.playbackRate,(A.audioBuf._loopStart||A.audioBuf._loopEnd)&&(b.loopStart=A.audioBuf._loopStart,b.loopEnd=A.audioBuf._loopEnd);var B=0;e.type===4136&&e.looping?(B=Number.POSITIVE_INFINITY,b.loop=!0,A.audioBuf._loopStart&&(b.loopStart=A.audioBuf._loopStart),A.audioBuf._loopEnd&&(b.loopEnd=A.audioBuf._loopEnd)):B=(A.audioBuf.duration-s)/e.playbackRate,b._startOffset=s,b._duration=B,b._skipCount=R,R=0,b.connect(e.gain),typeof b.start<"u"?(o=Math.max(o,e.context.audioCtx.currentTime),b.start(o,s)):typeof b.noteOn<"u"&&(o=Math.max(o,e.context.audioCtx.currentTime),b.noteOn(o)),b._startTime=o,e.audioQueue.push(b),o+=B}s=0,d++}}},updateSourceTime:function(e){var t=e.context.audioCtx.currentTime;if(e.state!==4114)return t;isFinite(e.bufStartTime)||(e.bufStartTime=t-e.bufOffset/e.playbackRate,e.bufOffset=0);for(var n=0;e.audioQueue.length;){var o=e.audioQueue[0];if(e.bufsProcessed+=o._skipCount,n=o._startTime+o._duration,t<n)break;e.audioQueue.shift(),e.bufStartTime=n,e.bufOffset=0,e.bufsProcessed++}if(e.bufsProcessed>=e.bufQueue.length&&!e.looping)x.setSourceState(e,4116);else if(e.type===4136&&e.looping){var s=e.bufQueue[0];if(s.length===0)e.bufOffset=0;else{var d=(t-e.bufStartTime)*e.playbackRate,m=s.audioBuf._loopStart||0,b=s.audioBuf._loopEnd||s.audioBuf.duration;b<=m&&(b=s.audioBuf.duration),d<b?e.bufOffset=d:e.bufOffset=m+(d-m)%(b-m)}}else if(e.audioQueue[0])e.bufOffset=(t-e.audioQueue[0]._startTime)*e.playbackRate;else{if(e.type!==4136&&e.looping){var E=x.sourceDuration(e)/e.playbackRate;E>0&&(e.bufStartTime+=Math.floor((t-e.bufStartTime)/E)*E)}for(var R=0;R<e.bufQueue.length;R++){if(e.bufsProcessed>=e.bufQueue.length)if(e.looping)e.bufsProcessed%=e.bufQueue.length;else{x.setSourceState(e,4116);break}var s=e.bufQueue[e.bufsProcessed];if(s.length>0){if(n=e.bufStartTime+s.audioBuf.duration/e.playbackRate,t<n){e.bufOffset=(t-e.bufStartTime)*e.playbackRate;break}e.bufStartTime=n}e.bufOffset=0,e.bufsProcessed++}}return t},cancelPendingSourceAudio:function(e){x.updateSourceTime(e);for(var t=1;t<e.audioQueue.length;t++){var n=e.audioQueue[t];n.stop()}e.audioQueue.length>1&&(e.audioQueue.length=1)},stopSourceAudio:function(e){for(var t=0;t<e.audioQueue.length;t++)e.audioQueue[t].stop();e.audioQueue.length=0},setSourceState:function(e,t){t===4114?((e.state===4114||e.state==4116)&&(e.bufsProcessed=0,e.bufOffset=0),x.stopSourceAudio(e),e.state=4114,e.bufStartTime=Number.NEGATIVE_INFINITY,x.scheduleSourceAudio(e)):t===4115?e.state===4114&&(x.updateSourceTime(e),x.stopSourceAudio(e),e.state=4115):t===4116?e.state!==4113&&(e.state=4116,e.bufsProcessed=e.bufQueue.length,e.bufStartTime=Number.NEGATIVE_INFINITY,e.bufOffset=0,x.stopSourceAudio(e)):t===4113&&e.state!==4113&&(e.state=4113,e.bufsProcessed=0,e.bufStartTime=Number.NEGATIVE_INFINITY,e.bufOffset=0,x.stopSourceAudio(e))},initSourcePanner:function(e){if(e.type!==4144){for(var t=x.buffers[0],n=0;n<e.bufQueue.length;n++)if(e.bufQueue[n].id!==0){t=e.bufQueue[n];break}if(e.spatialize===1||e.spatialize===2&&t.channels===1){if(e.panner)return;e.panner=e.context.audioCtx.createPanner(),x.updateSourceGlobal(e),x.updateSourceSpace(e),e.panner.connect(e.context.gain),e.gain.disconnect(),e.gain.connect(e.panner)}else{if(!e.panner)return;e.panner.disconnect(),e.gain.disconnect(),e.gain.connect(e.context.gain),e.panner=null}}},updateContextGlobal:function(e){for(var t in e.sources)x.updateSourceGlobal(e.sources[t])},updateSourceGlobal:function(e){var t=e.panner;if(t){t.refDistance=e.refDistance,t.maxDistance=e.maxDistance,t.rolloffFactor=e.rolloffFactor,t.panningModel=e.context.hrtf?"HRTF":"equalpower";var n=e.context.sourceDistanceModel?e.distanceModel:e.context.distanceModel;switch(n){case 0:t.distanceModel="inverse",t.refDistance=340282e33;break;case 53249:case 53250:t.distanceModel="inverse";break;case 53251:case 53252:t.distanceModel="linear";break;case 53253:case 53254:t.distanceModel="exponential";break}}},updateListenerSpace:function(e){var t=e.audioCtx.listener;t.positionX?(t.positionX.value=e.listener.position[0],t.positionY.value=e.listener.position[1],t.positionZ.value=e.listener.position[2]):t.setPosition(e.listener.position[0],e.listener.position[1],e.listener.position[2]),t.forwardX?(t.forwardX.value=e.listener.direction[0],t.forwardY.value=e.listener.direction[1],t.forwardZ.value=e.listener.direction[2],t.upX.value=e.listener.up[0],t.upY.value=e.listener.up[1],t.upZ.value=e.listener.up[2]):t.setOrientation(e.listener.direction[0],e.listener.direction[1],e.listener.direction[2],e.listener.up[0],e.listener.up[1],e.listener.up[2]);for(var n in e.sources)x.updateSourceSpace(e.sources[n])},updateSourceSpace:function(e){if(e.panner){var t=e.panner,n=e.position[0],o=e.position[1],s=e.position[2],d=e.direction[0],m=e.direction[1],b=e.direction[2],E=e.context.listener,R=E.position[0],A=E.position[1],B=E.position[2];if(e.relative){var M=-E.direction[0],K=-E.direction[1],ie=-E.direction[2],de=E.up[0],ue=E.up[1],he=E.up[2],G=function(au,su,lu){var uu=Math.sqrt(au*au+su*su+lu*lu);return uu<Number.EPSILON?0:1/uu},J=G(M,K,ie);M*=J,K*=J,ie*=J,J=G(de,ue,he),de*=J,ue*=J,he*=J;var ge=ue*ie-he*K,Te=he*M-de*ie,xe=de*K-ue*M;J=G(ge,Te,xe),ge*=J,Te*=J,xe*=J,de=K*xe-ie*Te,ue=ie*ge-M*xe,he=M*Te-K*ge;var pe=d,Et=m,Ue=b;d=pe*ge+Et*de+Ue*M,m=pe*Te+Et*ue+Ue*K,b=pe*xe+Et*he+Ue*ie,pe=n,Et=o,Ue=s,n=pe*ge+Et*de+Ue*M,o=pe*Te+Et*ue+Ue*K,s=pe*xe+Et*he+Ue*ie,n+=R,o+=A,s+=B}t.positionX?(n!=t.positionX.value&&(t.positionX.value=n),o!=t.positionY.value&&(t.positionY.value=o),s!=t.positionZ.value&&(t.positionZ.value=s)):t.setPosition(n,o,s),t.orientationX?(d!=t.orientationX.value&&(t.orientationX.value=d),m!=t.orientationY.value&&(t.orientationY.value=m),b!=t.orientationZ.value&&(t.orientationZ.value=b)):t.setOrientation(d,m,b);var St=e.dopplerShift,Rt=e.velocity[0],Tr=e.velocity[1],kt=e.velocity[2],Ot=E.velocity[0],dr=E.velocity[1],Je=E.velocity[2];if(n===R&&o===A&&s===B||Rt===Ot&&Tr===dr&&kt===Je)e.dopplerShift=1;else{var pt=e.context.speedOfSound,bt=e.context.dopplerFactor,Qn=R-n,qn=A-o,ei=B-s,ou=Math.sqrt(Qn*Qn+qn*qn+ei*ei),Do=(Qn*Ot+qn*dr+ei*Je)/ou,Io=(Qn*Rt+qn*Tr+ei*kt)/ou;Do=Math.min(Do,pt/bt),Io=Math.min(Io,pt/bt),e.dopplerShift=(pt-bt*Do)/(pt-bt*Io)}e.dopplerShift!==St&&x.updateSourceRate(e)}},updateSourceRate:function(e){if(e.state===4114){x.cancelPendingSourceAudio(e);var t=e.audioQueue[0];if(!t)return;var n;e.type===4136&&e.looping?n=Number.POSITIVE_INFINITY:n=(t.buffer.duration-t._startOffset)/e.playbackRate,t._duration=n,t.playbackRate.value=e.playbackRate,x.scheduleSourceAudio(e)}},sourceDuration:function(e){for(var t=0,n=0;n<e.bufQueue.length;n++){var o=e.bufQueue[n].audioBuf;t+=o?o.duration:0}return t},sourceTell:function(e){x.updateSourceTime(e);for(var t=0,n=0;n<e.bufsProcessed;n++)e.bufQueue[n].audioBuf&&(t+=e.bufQueue[n].audioBuf.duration);return t+=e.bufOffset,t},sourceSeek:function(e,t){var n=e.state==4114;if(n&&x.setSourceState(e,4113),e.bufQueue[e.bufsProcessed].audioBuf!==null){for(e.bufsProcessed=0;t>e.bufQueue[e.bufsProcessed].audioBuf.duration;)t-=e.bufQueue[e.bufsProcessed].audiobuf.duration,e.bufsProcessed++;e.bufOffset=t}n&&x.setSourceState(e,4114)},getGlobalParam:function(e,t){if(!x.currentCtx)return null;switch(t){case 49152:return x.currentCtx.dopplerFactor;case 49155:return x.currentCtx.speedOfSound;case 53248:return x.currentCtx.distanceModel;default:return x.currentCtx.err=40962,null}},setGlobalParam:function(e,t,n){if(x.currentCtx)switch(t){case 49152:if(!Number.isFinite(n)||n<0){x.currentCtx.err=40963;return}x.currentCtx.dopplerFactor=n,x.updateListenerSpace(x.currentCtx);break;case 49155:if(!Number.isFinite(n)||n<=0){x.currentCtx.err=40963;return}x.currentCtx.speedOfSound=n,x.updateListenerSpace(x.currentCtx);break;case 53248:switch(n){case 0:case 53249:case 53250:case 53251:case 53252:case 53253:case 53254:x.currentCtx.distanceModel=n,x.updateContextGlobal(x.currentCtx);break;default:x.currentCtx.err=40963;return}break;default:x.currentCtx.err=40962;return}},getListenerParam:function(e,t){if(!x.currentCtx)return null;switch(t){case 4100:return x.currentCtx.listener.position;case 4102:return x.currentCtx.listener.velocity;case 4111:return x.currentCtx.listener.direction.concat(x.currentCtx.listener.up);case 4106:return x.currentCtx.gain.gain.value;default:return x.currentCtx.err=40962,null}},setListenerParam:function(e,t,n){if(x.currentCtx){if(n===null){x.currentCtx.err=40962;return}var o=x.currentCtx.listener;switch(t){case 4100:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])){x.currentCtx.err=40963;return}o.position[0]=n[0],o.position[1]=n[1],o.position[2]=n[2],x.updateListenerSpace(x.currentCtx);break;case 4102:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])){x.currentCtx.err=40963;return}o.velocity[0]=n[0],o.velocity[1]=n[1],o.velocity[2]=n[2],x.updateListenerSpace(x.currentCtx);break;case 4106:if(!Number.isFinite(n)||n<0){x.currentCtx.err=40963;return}x.currentCtx.gain.gain.value=n;break;case 4111:if(!Number.isFinite(n[0])||!Number.isFinite(n[1])||!Number.isFinite(n[2])||!Number.isFinite(n[3])||!Number.isFinite(n[4])||!Number.isFinite(n[5])){x.currentCtx.err=40963;return}o.direction[0]=n[0],o.direction[1]=n[1],o.direction[2]=n[2],o.up[0]=n[3],o.up[1]=n[4],o.up[2]=n[5],x.updateListenerSpace(x.currentCtx);break;default:x.currentCtx.err=40962;return}}},getBufferParam:function(e,t,n){if(x.currentCtx){var o=x.buffers[t];if(!o||t===0){x.currentCtx.err=40961;return}switch(n){case 8193:return o.frequency;case 8194:return o.bytesPerSample*8;case 8195:return o.channels;case 8196:return o.length*o.bytesPerSample*o.channels;case 8213:return o.length===0?[0,0]:[(o.audioBuf._loopStart||0)*o.frequency,(o.audioBuf._loopEnd||o.length)*o.frequency];default:return x.currentCtx.err=40962,null}}},setBufferParam:function(e,t,n,o){if(x.currentCtx){var s=x.buffers[t];if(!s||t===0){x.currentCtx.err=40961;return}if(o===null){x.currentCtx.err=40962;return}switch(n){case 8196:if(o!==0){x.currentCtx.err=40963;return}break;case 8213:if(o[0]<0||o[0]>s.length||o[1]<0||o[1]>s.Length||o[0]>=o[1]){x.currentCtx.err=40963;return}if(s.refCount>0){x.currentCtx.err=40964;return}s.audioBuf&&(s.audioBuf._loopStart=o[0]/s.frequency,s.audioBuf._loopEnd=o[1]/s.frequency);break;default:x.currentCtx.err=40962;return}}},getSourceParam:function(e,t,n){if(!x.currentCtx)return null;var o=x.currentCtx.sources[t];if(!o)return x.currentCtx.err=40961,null;switch(n){case 514:return o.relative;case 4097:return o.coneInnerAngle;case 4098:return o.coneOuterAngle;case 4099:return o.pitch;case 4100:return o.position;case 4101:return o.direction;case 4102:return o.velocity;case 4103:return o.looping;case 4105:return o.type===4136?o.bufQueue[0].id:0;case 4106:return o.gain.gain.value;case 4109:return o.minGain;case 4110:return o.maxGain;case 4112:return o.state;case 4117:return o.bufQueue.length===1&&o.bufQueue[0].id===0?0:o.bufQueue.length;case 4118:return o.bufQueue.length===1&&o.bufQueue[0].id===0||o.looping?0:o.bufsProcessed;case 4128:return o.refDistance;case 4129:return o.rolloffFactor;case 4130:return o.coneOuterGain;case 4131:return o.maxDistance;case 4132:return x.sourceTell(o);case 4133:var s=x.sourceTell(o);return s>0&&(s*=o.bufQueue[0].frequency),s;case 4134:var s=x.sourceTell(o);return s>0&&(s*=o.bufQueue[0].frequency*o.bufQueue[0].bytesPerSample),s;case 4135:return o.type;case 4628:return o.spatialize;case 8201:for(var d=0,m=0,b=0;b<o.bufQueue.length;b++)d+=o.bufQueue[b].length,o.bufQueue[b].id!==0&&(m=o.bufQueue[b].bytesPerSample*o.bufQueue[b].channels);return d*m;case 8202:for(var d=0,b=0;b<o.bufQueue.length;b++)d+=o.bufQueue[b].length;return d;case 8203:return x.sourceDuration(o);case 53248:return o.distanceModel;default:return x.currentCtx.err=40962,null}},setSourceParam:function(e,t,n,o){if(x.currentCtx){var s=x.currentCtx.sources[t];if(!s){x.currentCtx.err=40961;return}if(o===null){x.currentCtx.err=40962;return}switch(n){case 514:if(o===1)s.relative=!0,x.updateSourceSpace(s);else if(o===0)s.relative=!1,x.updateSourceSpace(s);else{x.currentCtx.err=40963;return}break;case 4097:if(!Number.isFinite(o)){x.currentCtx.err=40963;return}s.coneInnerAngle=o,s.panner&&(s.panner.coneInnerAngle=o%360);break;case 4098:if(!Number.isFinite(o)){x.currentCtx.err=40963;return}s.coneOuterAngle=o,s.panner&&(s.panner.coneOuterAngle=o%360);break;case 4099:if(!Number.isFinite(o)||o<=0){x.currentCtx.err=40963;return}if(s.pitch===o)break;s.pitch=o,x.updateSourceRate(s);break;case 4100:if(!Number.isFinite(o[0])||!Number.isFinite(o[1])||!Number.isFinite(o[2])){x.currentCtx.err=40963;return}s.position[0]=o[0],s.position[1]=o[1],s.position[2]=o[2],x.updateSourceSpace(s);break;case 4101:if(!Number.isFinite(o[0])||!Number.isFinite(o[1])||!Number.isFinite(o[2])){x.currentCtx.err=40963;return}s.direction[0]=o[0],s.direction[1]=o[1],s.direction[2]=o[2],x.updateSourceSpace(s);break;case 4102:if(!Number.isFinite(o[0])||!Number.isFinite(o[1])||!Number.isFinite(o[2])){x.currentCtx.err=40963;return}s.velocity[0]=o[0],s.velocity[1]=o[1],s.velocity[2]=o[2],x.updateSourceSpace(s);break;case 4103:if(o===1){if(s.looping=!0,x.updateSourceTime(s),s.type===4136&&s.audioQueue.length>0){var d=s.audioQueue[0];d.loop=!0,d._duration=Number.POSITIVE_INFINITY}}else if(o===0){s.looping=!1;var m=x.updateSourceTime(s);if(s.type===4136&&s.audioQueue.length>0){var d=s.audioQueue[0];d.loop=!1,d._duration=s.bufQueue[0].audioBuf.duration/s.playbackRate,d._startTime=m-s.bufOffset/s.playbackRate}}else{x.currentCtx.err=40963;return}break;case 4105:if(s.state===4114||s.state===4115){x.currentCtx.err=40964;return}if(o===0){for(var b in s.bufQueue)s.bufQueue[b].refCount--;s.bufQueue.length=1,s.bufQueue[0]=x.buffers[0],s.bufsProcessed=0,s.type=4144}else{var E=x.buffers[o];if(!E){x.currentCtx.err=40963;return}for(var b in s.bufQueue)s.bufQueue[b].refCount--;s.bufQueue.length=0,E.refCount++,s.bufQueue=[E],s.bufsProcessed=0,s.type=4136}x.initSourcePanner(s),x.scheduleSourceAudio(s);break;case 4106:if(!Number.isFinite(o)||o<0){x.currentCtx.err=40963;return}s.gain.gain.value=o;break;case 4109:if(!Number.isFinite(o)||o<0||o>Math.min(s.maxGain,1)){x.currentCtx.err=40963;return}s.minGain=o;break;case 4110:if(!Number.isFinite(o)||o<Math.max(0,s.minGain)||o>1){x.currentCtx.err=40963;return}s.maxGain=o;break;case 4128:if(!Number.isFinite(o)||o<0){x.currentCtx.err=40963;return}s.refDistance=o,s.panner&&(s.panner.refDistance=o);break;case 4129:if(!Number.isFinite(o)||o<0){x.currentCtx.err=40963;return}s.rolloffFactor=o,s.panner&&(s.panner.rolloffFactor=o);break;case 4130:if(!Number.isFinite(o)||o<0||o>1){x.currentCtx.err=40963;return}s.coneOuterGain=o,s.panner&&(s.panner.coneOuterGain=o);break;case 4131:if(!Number.isFinite(o)||o<0){x.currentCtx.err=40963;return}s.maxDistance=o,s.panner&&(s.panner.maxDistance=o);break;case 4132:if(o<0||o>x.sourceDuration(s)){x.currentCtx.err=40963;return}x.sourceSeek(s,o);break;case 4133:var B=x.sourceDuration(s);if(B>0){var R;for(var A in s.bufQueue)if(A){R=s.bufQueue[A].frequency;break}o/=R}if(o<0||o>B){x.currentCtx.err=40963;return}x.sourceSeek(s,o);break;case 4134:var B=x.sourceDuration(s);if(B>0){var M;for(var A in s.bufQueue)if(A){var E=s.bufQueue[A];M=E.frequency*E.bytesPerSample*E.channels;break}o/=M}if(o<0||o>B){x.currentCtx.err=40963;return}x.sourceSeek(s,o);break;case 4628:if(o!==0&&o!==1&&o!==2){x.currentCtx.err=40963;return}s.spatialize=o,x.initSourcePanner(s);break;case 8201:case 8202:case 8203:x.currentCtx.err=40964;break;case 53248:switch(o){case 0:case 53249:case 53250:case 53251:case 53252:case 53253:case 53254:s.distanceModel=o,x.currentCtx.sourceDistanceModel&&x.updateContextGlobal(x.currentCtx);break;default:x.currentCtx.err=40963;return}break;default:x.currentCtx.err=40962;return}}},captures:{},sharedCaptureAudioCtx:null,requireValidCaptureDevice:function(e,t){if(e===0)return x.alcErr=40961,null;var n=x.captures[e];if(!n)return x.alcErr=40961,null;var o=n.mediaStreamError;return o?(x.alcErr=40961,null):n}};function b0(e,t,n,o,s){if(x.currentCtx){var d=x.buffers[e];if(!d){x.currentCtx.err=40963;return}if(s<=0){x.currentCtx.err=40963;return}var m=null;try{switch(t){case 4352:if(o>0){m=x.currentCtx.audioCtx.createBuffer(1,o,s);for(var b=m.getChannelData(0),E=0;E<o;++E)b[E]=ae[n++]*.0078125-1}d.bytesPerSample=1,d.channels=1,d.length=o;break;case 4353:if(o>0){m=x.currentCtx.audioCtx.createBuffer(1,o>>1,s);var b=m.getChannelData(0);n>>=1;for(var E=0;E<o>>1;++E)b[E]=De[n++]*30517578125e-15}d.bytesPerSample=2,d.channels=1,d.length=o>>1;break;case 4354:if(o>0){m=x.currentCtx.audioCtx.createBuffer(2,o>>1,s);for(var b=m.getChannelData(0),R=m.getChannelData(1),E=0;E<o>>1;++E)b[E]=ae[n++]*.0078125-1,R[E]=ae[n++]*.0078125-1}d.bytesPerSample=1,d.channels=2,d.length=o>>1;break;case 4355:if(o>0){m=x.currentCtx.audioCtx.createBuffer(2,o>>2,s);var b=m.getChannelData(0),R=m.getChannelData(1);n>>=1;for(var E=0;E<o>>2;++E)b[E]=De[n++]*30517578125e-15,R[E]=De[n++]*30517578125e-15}d.bytesPerSample=2,d.channels=2,d.length=o>>2;break;case 65552:if(o>0){m=x.currentCtx.audioCtx.createBuffer(1,o>>2,s);var b=m.getChannelData(0);n>>=2;for(var E=0;E<o>>2;++E)b[E]=q[n++]}d.bytesPerSample=4,d.channels=1,d.length=o>>2;break;case 65553:if(o>0){m=x.currentCtx.audioCtx.createBuffer(2,o>>3,s);var b=m.getChannelData(0),R=m.getChannelData(1);n>>=2;for(var E=0;E<o>>3;++E)b[E]=q[n++],R[E]=q[n++]}d.bytesPerSample=4,d.channels=2,d.length=o>>3;break;default:x.currentCtx.err=40963;return}d.frequency=s,d.audioBuf=m}catch{x.currentCtx.err=40963;return}}}function g0(e,t){if(x.currentCtx){for(var n=0;n<e;++n){var o=j[t+n*4>>2];if(o!==0){if(!x.buffers[o]){x.currentCtx.err=40961;return}if(x.buffers[o].refCount){x.currentCtx.err=40964;return}}}for(var n=0;n<e;++n){var o=j[t+n*4>>2];o!==0&&(x.deviceRefCounts[x.buffers[o].deviceId]--,delete x.buffers[o],x.freeIds.push(o))}}}function Wl(e,t,n){switch(t){case 514:case 4097:case 4098:case 4103:case 4105:case 4128:case 4129:case 4131:case 4132:case 4133:case 4134:case 4628:case 8201:case 8202:case 53248:x.setSourceParam("alSourcei",e,t,n);break;default:x.setSourceParam("alSourcei",e,t,null);break}}function y0(e,t){if(x.currentCtx){for(var n=0;n<e;++n){var o=j[t+n*4>>2];if(!x.currentCtx.sources[o]){x.currentCtx.err=40961;return}}for(var n=0;n<e;++n){var o=j[t+n*4>>2];x.setSourceState(x.currentCtx.sources[o],4116),Wl(o,4105,0),delete x.currentCtx.sources[o],x.freeIds.push(o)}}}function _0(e,t){if(x.currentCtx)for(var n=0;n<e;++n){var o={deviceId:x.currentCtx.deviceId,id:x.newId(),refCount:0,audioBuf:null,frequency:0,bytesPerSample:2,channels:1,length:0};x.deviceRefCounts[o.deviceId]++,x.buffers[o.id]=o,j[t+n*4>>2]=o.id}}function v0(e,t){if(x.currentCtx)for(var n=0;n<e;++n){var o=x.currentCtx.audioCtx.createGain();o.connect(x.currentCtx.gain);var s={context:x.currentCtx,id:x.newId(),type:4144,state:4113,bufQueue:[x.buffers[0]],audioQueue:[],looping:!1,pitch:1,dopplerShift:1,gain:o,minGain:0,maxGain:1,panner:null,bufsProcessed:0,bufStartTime:Number.NEGATIVE_INFINITY,bufOffset:0,relative:!1,refDistance:1,maxDistance:340282e33,rolloffFactor:1,position:[0,0,0],velocity:[0,0,0],direction:[0,0,0],coneOuterGain:0,coneInnerAngle:360,coneOuterAngle:360,distanceModel:53250,spatialize:2,get playbackRate(){return this.pitch*this.dopplerShift}};x.currentCtx.sources[s.id]=s,j[t+n*4>>2]=s.id}}function w0(){if(!x.currentCtx)return 40964;var e=x.currentCtx.err;return x.currentCtx.err=0,e}function E0(e,t,n){var o=x.getSourceParam("alGetSourcei",e,t);if(o!==null){if(!n){x.currentCtx.err=40963;return}switch(t){case 514:case 4097:case 4098:case 4103:case 4105:case 4112:case 4117:case 4118:case 4128:case 4129:case 4131:case 4132:case 4133:case 4134:case 4135:case 4628:case 8201:case 8202:case 53248:j[n>>2]=o;break;default:x.currentCtx.err=40962;return}}}function S0(e){if(x.stringCache[e])return x.stringCache[e];var t;switch(e){case 0:t="No Error";break;case 40961:t="Invalid Name";break;case 40962:t="Invalid Enum";break;case 40963:t="Invalid Value";break;case 40964:t="Invalid Operation";break;case 40965:t="Out of Memory";break;case 45057:t="Emscripten";break;case 45058:t="1.1";break;case 45059:t="WebAudio";break;case 45060:t="";for(var n in x.AL_EXTENSIONS)t=t.concat(n),t=t.concat(" ");t=t.trim();break;default:return x.currentCtx&&(x.currentCtx.err=40962),0}return t=zn(t),x.stringCache[e]=t,t}function C0(e){if(x.currentCtx){var t=x.currentCtx.sources[e];if(!t){x.currentCtx.err=40961;return}x.setSourceState(t,4115)}}function T0(e){if(x.currentCtx){var t=x.currentCtx.sources[e];if(!t){x.currentCtx.err=40961;return}x.setSourceState(t,4114)}}function x0(e){if(x.currentCtx){var t=x.currentCtx.sources[e];if(!t){x.currentCtx.err=40961;return}x.setSourceState(t,4116)}}function R0(e,t,n){switch(t){case 4097:case 4098:case 4099:case 4106:case 4109:case 4110:case 4128:case 4129:case 4130:case 4131:case 4132:case 4133:case 4134:case 8203:x.setSourceParam("alSourcef",e,t,n);break;default:x.setSourceParam("alSourcef",e,t,null);break}}function k0(e){return!(e in x.deviceRefCounts)||x.deviceRefCounts[e]>0?0:(delete x.deviceRefCounts[e],x.freeIds.push(e),1)}function P0(e,t,n){e.addEventListener(t,n,{once:!0})}function zl(e,t){t||(t=[document,document.getElementById("canvas")]),["keydown","mousedown","touchstart"].forEach(function(n){t.forEach(function(o){o&&P0(o,n,()=>{e.state==="suspended"&&e.resume()})})})}function A0(e,t){if(!(e in x.deviceRefCounts))return x.alcErr=40961,0;var n=null,o=[],s=null;if(t>>=2,t)for(var d=0,m=0;d=j[t++],o.push(d),d!==0;)switch(m=j[t++],o.push(m),d){case 4103:n||(n={}),n.sampleRate=m;break;case 4112:case 4113:break;case 6546:switch(m){case 0:s=!1;break;case 1:s=!0;break;case 2:break;default:return x.alcErr=40964,0}break;case 6550:if(m!==0)return x.alcErr=40964,0;break;default:return x.alcErr=40964,0}var b=window.AudioContext||window.webkitAudioContext,E=null;try{n?E=new b(n):E=new b}catch(K){return K.name==="NotSupportedError"?x.alcErr=40964:x.alcErr=40961,0}zl(E),typeof E.createGain>"u"&&(E.createGain=E.createGainNode);var R=E.createGain();R.connect(E.destination);var A={deviceId:e,id:x.newId(),attrs:o,audioCtx:E,listener:{position:[0,0,0],velocity:[0,0,0],direction:[0,0,0],up:[0,0,0]},sources:[],interval:setInterval(function(){x.scheduleContextAudio(A)},x.QUEUE_INTERVAL),gain:R,distanceModel:53250,speedOfSound:343.3,dopplerFactor:1,sourceDistanceModel:!1,hrtf:s||!1,_err:0,get err(){return this._err},set err(K){(this._err===0||K===0)&&(this._err=K)}};if(x.deviceRefCounts[e]++,x.contexts[A.id]=A,s!==null)for(var B in x.contexts){var M=x.contexts[B];M.deviceId===e&&(M.hrtf=s,x.updateContextGlobal(M))}return A.id}function F0(e){var t=x.contexts[e];if(x.currentCtx===t){x.alcErr=40962;return}x.contexts[e].interval&&clearInterval(x.contexts[e].interval),x.deviceRefCounts[t.deviceId]--,delete x.contexts[e],x.freeIds.push(e)}function D0(e){var t=x.alcErr;return x.alcErr=0,t}function I0(e,t){if(x.alcStringCache[t])return x.alcStringCache[t];var n;switch(t){case 0:n="No Error";break;case 40961:n="Invalid Device";break;case 40962:n="Invalid Context";break;case 40963:n="Invalid Enum";break;case 40964:n="Invalid Value";break;case 40965:n="Out of Memory";break;case 4100:if(typeof AudioContext<"u"||typeof webkitAudioContext<"u")n=x.DEVICE_NAME;else return 0;break;case 4101:typeof AudioContext<"u"||typeof webkitAudioContext<"u"?n=x.DEVICE_NAME.concat("\0"):n="\0";break;case 785:n=x.CAPTURE_DEVICE_NAME;break;case 784:if(e===0)n=x.CAPTURE_DEVICE_NAME.concat("\0");else{var o=x.requireValidCaptureDevice(e,"alcGetString");if(!o)return 0;n=o.deviceName}break;case 4102:if(!e)return x.alcErr=40961,0;n="";for(var s in x.ALC_EXTENSIONS)n=n.concat(s),n=n.concat(" ");n=n.trim();break;default:return x.alcErr=40963,0}return n=zn(n),x.alcStringCache[t]=n,n}function L0(e){return e===0?x.currentCtx=null:x.currentCtx=x.contexts[e],1}function M0(e){if(e){var t=Ee(e);if(t!==x.DEVICE_NAME)return 0}if(typeof AudioContext<"u"||typeof webkitAudioContext<"u"){var n=x.newId();return x.deviceRefCounts[n]=0,n}return 0}function j0(){return Date.now()}function Vl(){return 2147483648}function N0(){return Vl()}function B0(){return!I}function O0(e,t,n){ae.copyWithin(e,t,t+n)}function U0(e){try{return Fe.grow(e-Ie.byteLength+65535>>>16),ke(Fe.buffer),1}catch{}}function W0(e){var t=ae.length;e=e>>>0;var n=Vl();if(e>n)return!1;let o=(E,R)=>E+(R-E%R)%R;for(var s=1;s<=4;s*=2){var d=t*(1+.2/s);d=Math.min(d,e+100663296);var m=Math.min(n,o(Math.max(e,d),65536)),b=U0(m);if(b)return!0}return!1}var Ke={xhrs:{},setu64:function(e,t){te[e>>2]=t,te[e+4>>2]=t/4294967296|0},openDatabase:function(e,t,n,o){try{var s=indexedDB.open(e,t)}catch(d){return o(d)}s.onupgradeneeded=d=>{var m=d.target.result;m.objectStoreNames.contains("FILES")&&m.deleteObjectStore("FILES"),m.createObjectStore("FILES")},s.onsuccess=d=>n(d.target.result),s.onerror=d=>o(d)},staticInit:function(){var e=n=>{Ke.dbInstance=n,S()},t=()=>{Ke.dbInstance=!1,S()};Ke.openDatabase("emscripten_filesystem",1,e,t),(typeof ENVIRONMENT_IS_FETCH_WORKER>"u"||!ENVIRONMENT_IS_FETCH_WORKER)&&h()}};function xo(e,t,n,o,s){var d=te[e+8>>2];if(!d){n(e,0,"no url specified!");return}var m=Ee(d),b=e+112,E=Ee(b);E||(E="GET");var R=te[b+52>>2],A=te[b+56>>2],B=!!te[b+60>>2],M=te[b+68>>2],K=te[b+72>>2],ie=te[b+76>>2],de=te[b+80>>2],ue=te[b+84>>2],he=te[b+88>>2],G=!!(R&1),J=!!(R&2),ge=!!(R&64),Te=M?Ee(M):void 0,xe=K?Ee(K):void 0,pe=new XMLHttpRequest;if(pe.withCredentials=B,pe.open(E,m,!ge,Te,xe),ge||(pe.timeout=A),pe.url_=m,pe.responseType="arraybuffer",de){var Et=Ee(de);pe.overrideMimeType(Et)}if(ie)for(;;){var Ue=te[ie>>2];if(!Ue)break;var St=te[ie+4>>2];if(!St)break;ie+=8;var Rt=Ee(Ue),Tr=Ee(St);pe.setRequestHeader(Rt,Tr)}var kt=te[e+0>>2];Ke.xhrs[kt]=pe;var Ot=ue&&he?ae.slice(ue,ue+he):null;function dr(){var Je=0,pt=0;pe.response&&G&&te[e+12>>2]===0&&(pt=pe.response.byteLength),pt>0&&(Je=wt(pt),ae.set(new Uint8Array(pe.response),Je)),te[e+12>>2]=Je,Ke.setu64(e+16,pt),Ke.setu64(e+24,0);var bt=pe.response?pe.response.byteLength:0;bt&&Ke.setu64(e+32,bt),Se[e+40>>1]=pe.readyState,Se[e+42>>1]=pe.status,pe.statusText&&_e(pe.statusText,e+44,64)}pe.onload=Je=>{kt in Ke.xhrs&&(dr(),pe.status>=200&&pe.status<300?t&&t(e,pe,Je):n&&n(e,pe,Je))},pe.onerror=Je=>{kt in Ke.xhrs&&(dr(),n&&n(e,pe,Je))},pe.ontimeout=Je=>{kt in Ke.xhrs&&n&&n(e,pe,Je)},pe.onprogress=Je=>{if(kt in Ke.xhrs){var pt=G&&J&&pe.response?pe.response.byteLength:0,bt=0;pt>0&&G&&J&&(bt=wt(pt),ae.set(new Uint8Array(pe.response),bt)),te[e+12>>2]=bt,Ke.setu64(e+16,pt),Ke.setu64(e+24,Je.loaded-pt),Ke.setu64(e+32,Je.total),Se[e+40>>1]=pe.readyState,pe.readyState>=3&&pe.status===0&&Je.loaded>0&&(pe.status=200),Se[e+42>>1]=pe.status,pe.statusText&&_e(pe.statusText,e+44,64),o&&o(e,pe,Je),bt&&Bt(bt)}},pe.onreadystatechange=Je=>{kt in Ke.xhrs&&(Se[e+40>>1]=pe.readyState,pe.readyState>=2&&(Se[e+42>>1]=pe.status),s&&s(e,pe,Je))};try{pe.send(Ot)}catch(Je){n&&n(e,pe,Je)}}function Gl(e,t,n,o,s){if(!e){s(t,0,"IndexedDB not available!");return}var d=t+112,m=te[d+64>>2];m||(m=te[t+8>>2]);var b=Ee(m);try{var E=e.transaction(["FILES"],"readwrite"),R=E.objectStore("FILES"),A=R.put(n,b);A.onsuccess=B=>{Se[t+40>>1]=4,Se[t+42>>1]=200,_e("OK",t+44,64),o(t,0,b)},A.onerror=B=>{Se[t+40>>1]=4,Se[t+42>>1]=413,_e("Payload Too Large",t+44,64),s(t,0,B)}}catch(B){s(t,0,B)}}function z0(e,t,n,o){if(!e){o(t,0,"IndexedDB not available!");return}var s=t+112,d=te[s+64>>2];d||(d=te[t+8>>2]);var m=Ee(d);try{var b=e.transaction(["FILES"],"readonly"),E=b.objectStore("FILES"),R=E.get(m);R.onsuccess=A=>{if(A.target.result){var B=A.target.result,M=B.byteLength||B.length,K=wt(M);ae.set(new Uint8Array(B),K),te[t+12>>2]=K,Ke.setu64(t+16,M),Ke.setu64(t+24,0),Ke.setu64(t+32,M),Se[t+40>>1]=4,Se[t+42>>1]=200,_e("OK",t+44,64),n(t,0,B)}else Se[t+40>>1]=4,Se[t+42>>1]=404,_e("Not Found",t+44,64),o(t,0,"no data")},R.onerror=A=>{Se[t+40>>1]=4,Se[t+42>>1]=404,_e("Not Found",t+44,64),o(t,0,A)}}catch(A){o(t,0,A)}}function V0(e,t,n,o){if(!e){o(t,0,"IndexedDB not available!");return}var s=t+112,d=te[s+64>>2];d||(d=te[t+8>>2]);var m=Ee(d);try{var b=e.transaction(["FILES"],"readwrite"),E=b.objectStore("FILES"),R=E.delete(m);R.onsuccess=A=>{var B=A.target.result;te[t+12>>2]=0,Ke.setu64(t+16,0),Ke.setu64(t+24,0),Ke.setu64(t+32,0),Se[t+40>>1]=4,Se[t+42>>1]=200,_e("OK",t+44,64),n(t,0,B)},R.onerror=A=>{Se[t+40>>1]=4,Se[t+42>>1]=404,_e("Not Found",t+44,64),o(t,0,A)}}catch(A){o(t,0,A)}}function G0(e,t,n,o,s){var d=e+112,m=Ee(d),b=te[d+36>>2],E=te[d+40>>2],R=te[d+44>>2],A=te[d+48>>2],B=te[d+52>>2],M=!!(B&4),K=!!(B&32),ie=!!(B&16),de=!!(B&64);function ue(Ue){de?Ue():Gn(Ue)}var he=(Ue,St,Rt)=>{ue(()=>{b?Ht(b)(Ue):t&&t(Ue)})},G=(Ue,St,Rt)=>{ue(()=>{R?Ht(R)(Ue):o&&o(Ue)})},J=(Ue,St,Rt)=>{ue(()=>{E?Ht(E)(Ue):n&&n(Ue)})},ge=(Ue,St,Rt)=>{ue(()=>{A?Ht(A)(Ue):s&&s(Ue)})},Te=(Ue,St,Rt)=>{xo(Ue,he,J,G,ge)},xe=(Ue,St,Rt)=>{var Tr=(Ot,dr,Je)=>{ue(()=>{b?Ht(b)(Ot):t&&t(Ot)})},kt=(Ot,dr,Je)=>{ue(()=>{b?Ht(b)(Ot):t&&t(Ot)})};Gl(Ke.dbInstance,Ue,St.response,Tr,kt)},pe=(Ue,St,Rt)=>{xo(Ue,xe,J,G,ge)};if(m==="EM_IDB_STORE"){var Et=te[d+84>>2];Gl(Ke.dbInstance,e,ae.slice(Et,Et+te[d+88>>2]),he,J)}else if(m==="EM_IDB_DELETE")V0(Ke.dbInstance,e,he,J);else if(!ie)z0(Ke.dbInstance,e,he,K?J:M?pe:Te);else if(!K)xo(e,M?xe:he,J,G,ge);else return 0;return e}var Ro={};function K0(){return w||"./this.program"}function Gr(){if(!Gr.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:K0()};for(var n in Ro)Ro[n]===void 0?delete t[n]:t[n]=Ro[n];var o=[];for(var n in t)o.push(n+"="+t[n]);Gr.strings=o}return Gr.strings}function X0(e,t,n){for(var o=0;o<e.length;++o)le[t++>>0]=e.charCodeAt(o);n||(le[t>>0]=0)}function $0(e,t){var n=0;return Gr().forEach(function(o,s){var d=t+n;te[e+s*4>>2]=d,X0(o,d),n+=o.length+1}),0}function Y0(e,t){var n=Gr();te[e>>2]=n.length;var o=0;return n.forEach(function(s){o+=s.length+1}),te[t>>2]=o,0}function Z0(e){try{var t=Ce.getStreamFromFD(e);return p.close(t),0}catch(n){if(typeof p>"u"||!(n instanceof p.ErrnoError))throw n;return n.errno}}function H0(e,t){try{var n=Ce.getStreamFromFD(e),o=n.tty?2:p.isDir(n.mode)?3:p.isLink(n.mode)?7:4;return le[t>>0]=o,0}catch(s){if(typeof p>"u"||!(s instanceof p.ErrnoError))throw s;return s.errno}}function J0(e,t,n,o){for(var s=0,d=0;d<n;d++){var m=te[t>>2],b=te[t+4>>2];t+=8;var E=p.read(e,le,m,b,o);if(E<0)return-1;if(s+=E,E<b)break}return s}function Q0(e,t,n,o){try{var s=Ce.getStreamFromFD(e),d=J0(s,t,n);return te[o>>2]=d,0}catch(m){if(typeof p>"u"||!(m instanceof p.ErrnoError))throw m;return m.errno}}function q0(e,t,n,o,s){try{var d=El(t,n);if(isNaN(d))return 61;var m=Ce.getStreamFromFD(e);return p.llseek(m,d,o),l=[m.position>>>0,(C=m.position,+Math.abs(C)>=1?C>0?(Math.min(+Math.floor(C/4294967296),4294967295)|0)>>>0:~~+Math.ceil((C-+(~~C>>>0))/4294967296)>>>0:0)],j[s>>2]=l[0],j[s+4>>2]=l[1],m.getdents&&d===0&&o===0&&(m.getdents=null),0}catch(b){if(typeof p>"u"||!(b instanceof p.ErrnoError))throw b;return b.errno}}function eb(e){try{var t=Ce.getStreamFromFD(e);return t.stream_ops&&t.stream_ops.fsync?t.stream_ops.fsync(t):0}catch(n){if(typeof p>"u"||!(n instanceof p.ErrnoError))throw n;return n.errno}}function tb(e,t,n,o){for(var s=0,d=0;d<n;d++){var m=te[t>>2],b=te[t+4>>2];t+=8;var E=p.write(e,le,m,b,o);if(E<0)return-1;s+=E}return s}function rb(e,t,n,o){try{var s=Ce.getStreamFromFD(e),d=tb(s,t,n);return te[o>>2]=d,0}catch(m){if(typeof p>"u"||!(m instanceof p.ErrnoError))throw m;return m.errno}}function Kn(e){for(var t=e.split("."),n=0;n<4;n++){var o=Number(t[n]);if(isNaN(o))return null;t[n]=o}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0}function Kr(e){return parseInt(e)}function ko(e){var t,n,o,s,d=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,m=[];if(!d.test(e))return null;if(e==="::")return[0,0,0,0,0,0,0,0];for(e.startsWith("::")?e=e.replace("::","Z:"):e=e.replace("::",":Z:"),e.indexOf(".")>0?(e=e.replace(new RegExp("[.]","g"),":"),t=e.split(":"),t[t.length-4]=Kr(t[t.length-4])+Kr(t[t.length-3])*256,t[t.length-3]=Kr(t[t.length-2])+Kr(t[t.length-1])*256,t=t.slice(0,t.length-2)):t=e.split(":"),o=0,s=0,n=0;n<t.length;n++)if(typeof t[n]=="string")if(t[n]==="Z"){for(s=0;s<8-t.length+1;s++)m[n+s]=0;o=s-1}else m[n+o]=Hn(parseInt(t[n],16));else m[n+o]=t[n];return[m[1]<<16|m[0],m[3]<<16|m[2],m[5]<<16|m[4],m[7]<<16|m[6]]}var Jt={address_map:{id:1,addrs:{},names:{}},lookup_name:function(e){var t=Kn(e);if(t!==null||(t=ko(e),t!==null))return e;var n;if(Jt.address_map.addrs[e])n=Jt.address_map.addrs[e];else{var o=Jt.address_map.id++;Ne(o<65535,"exceeded max address mappings of 65535"),n="172.29."+(o&255)+"."+(o&65280),Jt.address_map.names[n]=e,Jt.address_map.addrs[e]=n}return n},lookup_addr:function(e){return Jt.address_map.names[e]?Jt.address_map.names[e]:null}};function Kl(e){return(e&255)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255)}function nb(e){var t="",n=0,o=0,s=0,d=0,m=0,b=0,E=[e[0]&65535,e[0]>>16,e[1]&65535,e[1]>>16,e[2]&65535,e[2]>>16,e[3]&65535,e[3]>>16],R=!0,A="";for(b=0;b<5;b++)if(E[b]!==0){R=!1;break}if(R){if(A=Kl(E[6]|E[7]<<16),E[5]===-1)return t="::ffff:",t+=A,t;if(E[5]===0)return t="::",A==="0.0.0.0"&&(A=""),A==="0.0.0.1"&&(A="1"),t+=A,t}for(n=0;n<8;n++)E[n]===0&&(n-s>1&&(m=0),s=n,m++),m>o&&(o=m,d=n-o+1);for(n=0;n<8;n++){if(o>1&&E[n]===0&&n>=d&&n<d+o){n===d&&(t+=":",d===0&&(t+=":"));continue}t+=Number(ru(E[n]&65535)).toString(16),t+=n<7?":":""}return t}function ib(e,t,n,o,s){switch(t){case 2:n=Kn(n),po(e,16),s&&(j[s>>2]=16),De[e>>1]=t,j[e+4>>2]=n,De[e+2>>1]=Hn(o);break;case 10:n=ko(n),po(e,28),s&&(j[s>>2]=28),j[e>>2]=t,j[e+8>>2]=n[0],j[e+12>>2]=n[1],j[e+16>>2]=n[2],j[e+20>>2]=n[3],De[e+2>>1]=Hn(o);break;default:return 5}return 0}function ob(e,t,n,o){var s=0,d=0,m=0,b=0,E=0,R=0,A;function B(M,K,ie,de,ue,he){var G,J,ge,Te;return J=M===10?28:16,ue=M===10?nb(ue):Kl(ue),G=wt(J),Te=ib(G,M,ue,he),Ne(!Te),ge=wt(32),j[ge+4>>2]=M,j[ge+8>>2]=K,j[ge+12>>2]=ie,j[ge+24>>2]=de,te[ge+20>>2]=G,M===10?j[ge+16>>2]=28:j[ge+16>>2]=16,j[ge+28>>2]=0,ge}if(n&&(m=j[n>>2],b=j[n+4>>2],E=j[n+8>>2],R=j[n+12>>2]),E&&!R&&(R=E===2?17:6),!E&&R&&(E=R===17?2:1),R===0&&(R=6),E===0&&(E=1),!e&&!t)return-2;if(m&-1088||n!==0&&j[n>>2]&2&&!e)return-1;if(m&32)return-2;if(E!==0&&E!==1&&E!==2)return-7;if(b!==0&&b!==2&&b!==10)return-6;if(t&&(t=Ee(t),d=parseInt(t,10),isNaN(d)))return m&1024?-2:-8;if(!e)return b===0&&(b=2),m&1||(b===2?s=Zn(2130706433):s=[0,0,0,1]),A=B(b,E,R,null,s,d),te[o>>2]=A,0;if(e=Ee(e),s=Kn(e),s!==null)if(b===0||b===2)b=2;else if(b===10&&m&8)s=[0,0,Zn(65535),s],b=10;else return-2;else if(s=ko(e),s!==null)if(b===0||b===10)b=10;else return-2;return s!=null?(A=B(b,E,R,e,s,d),te[o>>2]=A,0):m&4?-2:(e=Jt.lookup_name(e),s=Kn(e),b===0?b=2:b===10&&(s=[0,0,Zn(65535),s]),A=B(b,E,R,null,s,d),te[o>>2]=A,0)}function Xn(e,t){Xn.randomDevice||(Xn.randomDevice=vt());for(var n=0;n<t;n++)le[e+n>>0]=Xn.randomDevice();return 0}var H={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(e){H.lastError||(H.lastError=e)},getNewId:function(e){for(var t=H.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,o){for(var s="",d=0;d<t;++d){var m=o?j[o+d*4>>2]:-1;s+=Ee(j[n+d*4>>2],m<0?void 0:m)}return s},createContext:function(e,t){if(!e.getContextSafariWebGL2Fixed){let s=function(d,m){var b=e.getContextSafariWebGL2Fixed(d,m);return d=="webgl"==b instanceof WebGLRenderingContext?b:null};e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=s}var n=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t);if(!n)return 0;var o=H.registerContext(n,t);return o},registerContext:function(e,t){var n=H.getNewId(H.contexts),o={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=o),H.contexts[n]=o,n},makeContextCurrent:function(e){return H.currentContext=H.contexts[e],i.ctx=V=H.currentContext&&H.currentContext.GLctx,!(e&&!V)},getContext:function(e){return H.contexts[e]},deleteContext:function(e){H.currentContext===H.contexts[e]&&(H.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(H.contexts[e].GLctx.canvas),H.contexts[e]&&H.contexts[e].GLctx.canvas&&(H.contexts[e].GLctx.canvas.GLctxObject=void 0),H.contexts[e]=null}};function ab(e){V.activeTexture(e)}function sb(e,t){V.attachShader(H.programs[e],H.shaders[t])}function lb(e,t){e==35051?V.currentPixelPackBufferBinding=t:e==35052&&(V.currentPixelUnpackBufferBinding=t),V.bindBuffer(e,H.buffers[t])}function ub(e,t,n,o,s){V.bindBufferRange(e,t,H.buffers[n],o,s)}function cb(e,t){V.bindFramebuffer(e,H.framebuffers[t])}function fb(e,t){V.bindRenderbuffer(e,H.renderbuffers[t])}function db(e,t){V.bindTexture(e,H.textures[t])}function hb(e){V.bindVertexArray(H.vaos[e])}function pb(e){V.blendEquation(e)}function mb(e,t){V.blendFunc(e,t)}function bb(e,t,n,o){V.blendFuncSeparate(e,t,n,o)}function gb(e,t,n,o,s,d,m,b,E,R){V.blitFramebuffer(e,t,n,o,s,d,m,b,E,R)}function yb(e,t,n,o){H.currentContext.version>=2?n&&t?V.bufferData(e,ae,o,n,t):V.bufferData(e,t,o):V.bufferData(e,n?ae.subarray(n,n+t):t,o)}function _b(e,t,n,o){if(H.currentContext.version>=2){n&&V.bufferSubData(e,t,ae,o,n);return}V.bufferSubData(e,t,ae.subarray(o,o+n))}function vb(e,t,n){V.clearBufferfv(e,t,q,n>>2)}function wb(e,t,n,o){V.colorMask(!!e,!!t,!!n,!!o)}function Eb(e){V.compileShader(H.shaders[e])}function Sb(e,t,n,o,s,d,m,b){if(H.currentContext.version>=2){V.currentPixelUnpackBufferBinding||!m?V.compressedTexImage2D(e,t,n,o,s,d,m,b):V.compressedTexImage2D(e,t,n,o,s,d,ae,b,m);return}V.compressedTexImage2D(e,t,n,o,s,d,b?ae.subarray(b,b+m):null)}function Cb(e,t,n,o,s,d,m,b,E){V.currentPixelUnpackBufferBinding?V.compressedTexImage3D(e,t,n,o,s,d,m,b,E):V.compressedTexImage3D(e,t,n,o,s,d,m,ae,E,b)}function Tb(e,t,n,o,s,d,m,b){V.copyTexSubImage2D(e,t,n,o,s,d,m,b)}function xb(){var e=H.getNewId(H.programs),t=V.createProgram();return t.name=e,t.maxUniformLength=t.maxAttributeLength=t.maxUniformBlockNameLength=0,t.uniformIdCounter=1,H.programs[e]=t,e}function Rb(e){var t=H.getNewId(H.shaders);return H.shaders[t]=V.createShader(e),t}function kb(e,t){for(var n=0;n<e;n++){var o=j[t+n*4>>2],s=H.buffers[o];s&&(V.deleteBuffer(s),s.name=0,H.buffers[o]=null,o==V.currentPixelPackBufferBinding&&(V.currentPixelPackBufferBinding=0),o==V.currentPixelUnpackBufferBinding&&(V.currentPixelUnpackBufferBinding=0))}}function Pb(e,t){for(var n=0;n<e;++n){var o=j[t+n*4>>2],s=H.framebuffers[o];s&&(V.deleteFramebuffer(s),s.name=0,H.framebuffers[o]=null)}}function Ab(e){if(e){var t=H.programs[e];if(!t){H.recordError(1281);return}V.deleteProgram(t),t.name=0,H.programs[e]=null}}function Fb(e,t){for(var n=0;n<e;n++){var o=j[t+n*4>>2],s=H.renderbuffers[o];s&&(V.deleteRenderbuffer(s),s.name=0,H.renderbuffers[o]=null)}}function Db(e){if(e){var t=H.shaders[e];if(!t){H.recordError(1281);return}V.deleteShader(t),H.shaders[e]=null}}function Ib(e,t){for(var n=0;n<e;n++){var o=j[t+n*4>>2],s=H.textures[o];s&&(V.deleteTexture(s),s.name=0,H.textures[o]=null)}}function Lb(e,t){for(var n=0;n<e;n++){var o=j[t+n*4>>2];V.deleteVertexArray(H.vaos[o]),H.vaos[o]=null}}function Mb(e){V.depthFunc(e)}function jb(e){V.depthMask(!!e)}function Ob(e){V.disable(e)}function Ub(e,t,n){V.drawArrays(e,t,n)}function Wb(e,t,n,o){V.drawArraysInstanced(e,t,n,o)}var Po=[];function zb(e,t){for(var n=Po[e],o=0;o<e;o++)n[o]=j[t+o*4>>2];V.drawBuffers(n)}function Vb(e,t,n,o){V.drawElements(e,t,n,o)}function Gb(e,t,n,o,s){V.drawElementsInstanced(e,t,n,o,s)}function Kb(e){V.enable(e)}function Xb(e){V.enableVertexAttribArray(e)}function $b(e,t,n,o){V.framebufferRenderbuffer(e,t,n,H.renderbuffers[o])}function Yb(e,t,n,o,s){V.framebufferTexture2D(e,t,n,H.textures[o],s)}function Zb(e){V.frontFace(e)}function Xr(e,t,n,o){for(var s=0;s<e;s++){var d=V[n](),m=d&&H.getNewId(o);d?(d.name=m,o[m]=d):H.recordError(1282),j[t+s*4>>2]=m}}function Hb(e,t){Xr(e,t,"createBuffer",H.buffers)}function Jb(e,t){Xr(e,t,"createFramebuffer",H.framebuffers)}function Qb(e,t){Xr(e,t,"createRenderbuffer",H.renderbuffers)}function qb(e,t){Xr(e,t,"createTexture",H.textures)}function eg(e,t){Xr(e,t,"createVertexArray",H.vaos)}function tg(e){V.generateMipmap(e)}function rg(){var e=V.getError()||H.lastError;return H.lastError=0,e}function ng(e,t){te[e>>2]=t,te[e+4>>2]=(t-te[e>>2])/4294967296}function ig(e,t,n){if(!t){H.recordError(1281);return}var o=void 0;switch(e){case 36346:o=1;break;case 36344:n!=0&&n!=1&&H.recordError(1280);return;case 34814:case 36345:o=0;break;case 34466:var s=V.getParameter(34467);o=s?s.length:0;break;case 33309:if(H.currentContext.version<2){H.recordError(1282);return}var d=V.getSupportedExtensions()||[];o=2*d.length;break;case 33307:case 33308:if(H.currentContext.version<2){H.recordError(1280);return}o=e==33307?3:0;break}if(o===void 0){var m=V.getParameter(e);switch(typeof m){case"number":o=m;break;case"boolean":o=m?1:0;break;case"string":H.recordError(1280);return;case"object":if(m===null)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{o=0;break}default:{H.recordError(1280);return}}else if(m instanceof Float32Array||m instanceof Uint32Array||m instanceof Int32Array||m instanceof Array){for(var b=0;b<m.length;++b)switch(n){case 0:j[t+b*4>>2]=m[b];break;case 2:q[t+b*4>>2]=m[b];break;case 4:le[t+b>>0]=m[b]?1:0;break}return}else try{o=m.name|0}catch(E){H.recordError(1280),we("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+E+")");return}break;default:H.recordError(1280),we("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+e+") and it returns "+m+" of type "+typeof m+"!");return}}switch(n){case 1:ng(t,o);break;case 0:j[t>>2]=o;break;case 2:q[t>>2]=o;break;case 4:le[t>>0]=o?1:0;break}}function og(e,t){ig(e,t,0)}function ag(e,t,n,o){var s=V.getProgramInfoLog(H.programs[e]);s===null&&(s="(unknown error)");var d=t>0&&o?_e(s,o,t):0;n&&(j[n>>2]=d)}function sg(e,t,n){if(!n){H.recordError(1281);return}if(e>=H.counter){H.recordError(1281);return}if(e=H.programs[e],t==35716){var o=V.getProgramInfoLog(e);o===null&&(o="(unknown error)"),j[n>>2]=o.length+1}else if(t==35719){if(!e.maxUniformLength)for(var s=0;s<V.getProgramParameter(e,35718);++s)e.maxUniformLength=Math.max(e.maxUniformLength,V.getActiveUniform(e,s).name.length+1);j[n>>2]=e.maxUniformLength}else if(t==35722){if(!e.maxAttributeLength)for(var s=0;s<V.getProgramParameter(e,35721);++s)e.maxAttributeLength=Math.max(e.maxAttributeLength,V.getActiveAttrib(e,s).name.length+1);j[n>>2]=e.maxAttributeLength}else if(t==35381){if(!e.maxUniformBlockNameLength)for(var s=0;s<V.getProgramParameter(e,35382);++s)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,V.getActiveUniformBlockName(e,s).length+1);j[n>>2]=e.maxUniformBlockNameLength}else j[n>>2]=V.getProgramParameter(e,t)}function lg(e,t,n,o){var s=V.getShaderInfoLog(H.shaders[e]);s===null&&(s="(unknown error)");var d=t>0&&o?_e(s,o,t):0;n&&(j[n>>2]=d)}function ug(e,t,n){if(!n){H.recordError(1281);return}if(t==35716){var o=V.getShaderInfoLog(H.shaders[e]);o===null&&(o="(unknown error)");var s=o?o.length+1:0;j[n>>2]=s}else if(t==35720){var d=V.getShaderSource(H.shaders[e]),m=d?d.length+1:0;j[n>>2]=m}else j[n>>2]=V.getShaderParameter(H.shaders[e],t)}function Xl(e){return e.slice(-1)=="]"&&e.lastIndexOf("[")}function cg(e){var t=e.uniformLocsById,n=e.uniformSizeAndIdsByName,o,s;if(!t)for(e.uniformLocsById=t={},e.uniformArrayNamesById={},o=0;o<V.getProgramParameter(e,35718);++o){var d=V.getActiveUniform(e,o),m=d.name,b=d.size,E=Xl(m),R=E>0?m.slice(0,E):m,A=e.uniformIdCounter;for(e.uniformIdCounter+=b,n[R]=[b,A],s=0;s<b;++s)t[A]=s,e.uniformArrayNamesById[A++]=R}}function fg(e,t){if(t=Ee(t),e=H.programs[e]){cg(e);var n=e.uniformLocsById,o=0,s=t,d=Xl(t);d>0&&(o=Kr(t.slice(d+1))>>>0,s=t.slice(0,d));var m=e.uniformSizeAndIdsByName[s];if(m&&o<m[0]&&(o+=m[1],n[o]=n[o]||V.getUniformLocation(e,t)))return o}else H.recordError(1281);return-1}function dg(e,t,n){for(var o=Po[t],s=0;s<t;s++)o[s]=j[n+s*4>>2];V.invalidateFramebuffer(e,o)}function hg(e){e=H.programs[e],V.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}}function pg(e,t){e==3317&&(H.unpackAlignment=t),V.pixelStorei(e,t)}function mg(e,t,n,o){function s(b,E){return b+E-1&-E}var d=e*n,m=s(d,o);return t*m}function bg(e){var t={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return t[e-6402]||1}function Sr(e){return e-=5120,e==0?le:e==1?ae:e==2?De:e==4?j:e==6?q:e==5||e==28922||e==28520||e==30779||e==30782?te:Se}function Cr(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}function Ao(e,t,n,o,s,d){var m=Sr(e),b=Cr(m),E=1<<b,R=bg(t)*E,A=mg(n,o,R,H.unpackAlignment);return m.subarray(s>>b,s+A>>b)}function gg(e,t,n,o,s,d,m){if(H.currentContext.version>=2){if(V.currentPixelPackBufferBinding)V.readPixels(e,t,n,o,s,d,m);else{var b=Sr(d);V.readPixels(e,t,n,o,s,d,b,m>>Cr(b))}return}var E=Ao(d,s,n,o,m);if(!E){H.recordError(1280);return}V.readPixels(e,t,n,o,s,d,E)}function yg(e,t,n,o){V.renderbufferStorage(e,t,n,o)}function _g(e,t,n,o,s){V.renderbufferStorageMultisample(e,t,n,o,s)}function vg(e,t,n,o){var s=H.getSource(e,t,n,o);V.shaderSource(H.shaders[e],s)}function wg(e,t,n,o,s,d,m,b,E){if(H.currentContext.version>=2){if(V.currentPixelUnpackBufferBinding)V.texImage2D(e,t,n,o,s,d,m,b,E);else if(E){var R=Sr(b);V.texImage2D(e,t,n,o,s,d,m,b,R,E>>Cr(R))}else V.texImage2D(e,t,n,o,s,d,m,b,null);return}V.texImage2D(e,t,n,o,s,d,m,b,E?Ao(b,m,o,s,E):null)}function Eg(e,t,n,o,s,d,m,b,E,R){if(V.currentPixelUnpackBufferBinding)V.texImage3D(e,t,n,o,s,d,m,b,E,R);else if(R){var A=Sr(E);V.texImage3D(e,t,n,o,s,d,m,b,E,A,R>>Cr(A))}else V.texImage3D(e,t,n,o,s,d,m,b,E,null)}function Sg(e,t,n){V.texParameteri(e,t,n)}function Cg(e,t,n,o,s){V.texStorage2D(e,t,n,o,s)}function Tg(e,t,n,o,s,d){V.texStorage3D(e,t,n,o,s,d)}function xg(e,t,n,o,s,d,m,b,E){if(H.currentContext.version>=2){if(V.currentPixelUnpackBufferBinding)V.texSubImage2D(e,t,n,o,s,d,m,b,E);else if(E){var R=Sr(b);V.texSubImage2D(e,t,n,o,s,d,m,b,R,E>>Cr(R))}else V.texSubImage2D(e,t,n,o,s,d,m,b,null);return}var A=null;E&&(A=Ao(b,m,s,d,E)),V.texSubImage2D(e,t,n,o,s,d,m,b,A)}function Rg(e,t,n,o,s,d,m,b,E,R,A){if(V.currentPixelUnpackBufferBinding)V.texSubImage3D(e,t,n,o,s,d,m,b,E,R,A);else if(A){var B=Sr(R);V.texSubImage3D(e,t,n,o,s,d,m,b,E,R,B,A>>Cr(B))}else V.texSubImage3D(e,t,n,o,s,d,m,b,E,R,null)}function Qt(e){var t=V.currentProgram;if(t){var n=t.uniformLocsById[e];return typeof n=="number"&&(t.uniformLocsById[e]=n=V.getUniformLocation(t,t.uniformArrayNamesById[e]+(n>0?"["+n+"]":""))),n}else H.recordError(1282)}function kg(e,t){V.uniform1f(Qt(e),t)}function Pg(e,t){V.uniform1i(Qt(e),t)}function Ag(e,t){V.uniform1ui(Qt(e),t)}function Fg(e,t,n){V.uniform2f(Qt(e),t,n)}var Fo=[];function Dg(e,t,n){if(H.currentContext.version>=2){t&&V.uniform2fv(Qt(e),q,n>>2,t*2);return}if(t<=144)for(var s=Fo[2*t-1],o=0;o<2*t;o+=2)s[o]=q[n+4*o>>2],s[o+1]=q[n+(4*o+4)>>2];else var s=q.subarray(n>>2,n+t*8>>2);V.uniform2fv(Qt(e),s)}function Ig(e,t,n){if(H.currentContext.version>=2){t&&V.uniform4fv(Qt(e),q,n>>2,t*4);return}if(t<=72){var m=Fo[4*t-1],o=q;n>>=2;for(var s=0;s<4*t;s+=4){var d=n+s;m[s]=o[d],m[s+1]=o[d+1],m[s+2]=o[d+2],m[s+3]=o[d+3]}}else var m=q.subarray(n>>2,n+t*16>>2);V.uniform4fv(Qt(e),m)}function Lg(e){e=H.programs[e],V.useProgram(e),V.currentProgram=e}function Mg(e,t,n,o,s){V.vertexAttribIPointer(e,t,n,o,s)}function jg(e,t,n,o,s,d){V.vertexAttribPointer(e,t,n,!!o,s,d)}function Ng(e,t,n,o){V.viewport(e,t,n,o)}function Bg(e,t){for(var n=0,o=0;o<=t;n+=e[o++]);return n}var $l=[31,29,31,30,31,30,31,31,30,31,30,31],Yl=[31,28,31,30,31,30,31,31,30,31,30,31];function Og(e,t){for(var n=new Date(e.getTime());t>0;){var o=zr(n.getFullYear()),s=n.getMonth(),d=(o?$l:Yl)[s];if(t>d-n.getDate())t-=d-n.getDate()+1,n.setDate(1),s<11?n.setMonth(s+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n}function Ug(e,t){le.set(e,t)}function Zl(e,t,n,o){var s=j[o+40>>2],d={tm_sec:j[o>>2],tm_min:j[o+4>>2],tm_hour:j[o+8>>2],tm_mday:j[o+12>>2],tm_mon:j[o+16>>2],tm_year:j[o+20>>2],tm_wday:j[o+24>>2],tm_yday:j[o+28>>2],tm_isdst:j[o+32>>2],tm_gmtoff:j[o+36>>2],tm_zone:s?Ee(s):""},m=Ee(n),b={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var E in b)m=m.replace(new RegExp(E,"g"),b[E]);var R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A=["January","February","March","April","May","June","July","August","September","October","November","December"];function B(G,J,ge){for(var Te=typeof G=="number"?G.toString():G||"";Te.length<J;)Te=ge[0]+Te;return Te}function M(G,J){return B(G,J,"0")}function K(G,J){function ge(xe){return xe<0?-1:xe>0?1:0}var Te;return(Te=ge(G.getFullYear()-J.getFullYear()))===0&&(Te=ge(G.getMonth()-J.getMonth()))===0&&(Te=ge(G.getDate()-J.getDate())),Te}function ie(G){switch(G.getDay()){case 0:return new Date(G.getFullYear()-1,11,29);case 1:return G;case 2:return new Date(G.getFullYear(),0,3);case 3:return new Date(G.getFullYear(),0,2);case 4:return new Date(G.getFullYear(),0,1);case 5:return new Date(G.getFullYear()-1,11,31);case 6:return new Date(G.getFullYear()-1,11,30)}}function de(G){var J=Og(new Date(G.tm_year+1900,0,1),G.tm_yday),ge=new Date(J.getFullYear(),0,4),Te=new Date(J.getFullYear()+1,0,4),xe=ie(ge),pe=ie(Te);return K(xe,J)<=0?K(pe,J)<=0?J.getFullYear()+1:J.getFullYear():J.getFullYear()-1}var ue={"%a":function(G){return R[G.tm_wday].substring(0,3)},"%A":function(G){return R[G.tm_wday]},"%b":function(G){return A[G.tm_mon].substring(0,3)},"%B":function(G){return A[G.tm_mon]},"%C":function(G){var J=G.tm_year+1900;return M(J/100|0,2)},"%d":function(G){return M(G.tm_mday,2)},"%e":function(G){return B(G.tm_mday,2," ")},"%g":function(G){return de(G).toString().substring(2)},"%G":function(G){return de(G)},"%H":function(G){return M(G.tm_hour,2)},"%I":function(G){var J=G.tm_hour;return J==0?J=12:J>12&&(J-=12),M(J,2)},"%j":function(G){return M(G.tm_mday+Bg(zr(G.tm_year+1900)?$l:Yl,G.tm_mon-1),3)},"%m":function(G){return M(G.tm_mon+1,2)},"%M":function(G){return M(G.tm_min,2)},"%n":function(){return`
`},"%p":function(G){return G.tm_hour>=0&&G.tm_hour<12?"AM":"PM"},"%S":function(G){return M(G.tm_sec,2)},"%t":function(){return"	"},"%u":function(G){return G.tm_wday||7},"%U":function(G){var J=G.tm_yday+7-G.tm_wday;return M(Math.floor(J/7),2)},"%V":function(G){var J=Math.floor((G.tm_yday+7-(G.tm_wday+6)%7)/7);if((G.tm_wday+371-G.tm_yday-2)%7<=2&&J++,J){if(J==53){var ge=(G.tm_wday+371-G.tm_yday)%7;ge!=4&&(ge!=3||!zr(G.tm_year))&&(J=1)}}else{J=52;var Te=(G.tm_wday+7-G.tm_yday-1)%7;(Te==4||Te==5&&zr(G.tm_year%400-1))&&J++}return M(J,2)},"%w":function(G){return G.tm_wday},"%W":function(G){var J=G.tm_yday+7-(G.tm_wday+6)%7;return M(Math.floor(J/7),2)},"%y":function(G){return(G.tm_year+1900).toString().substring(2)},"%Y":function(G){return G.tm_year+1900},"%z":function(G){var J=G.tm_gmtoff,ge=J>=0;return J=Math.abs(J)/60,J=J/60*100+J%60,(ge?"+":"-")+("0000"+J).slice(-4)},"%Z":function(G){return G.tm_zone},"%%":function(){return"%"}};m=m.replace(/%%/g,"\0\0");for(var E in ue)m.includes(E)&&(m=m.replace(new RegExp(E,"g"),ue[E](d)));m=m.replace(/\0\0/g,"%");var he=Rn(m,!1);return he.length>t?0:(Ug(he,e),he.length-1)}function Wg(e,t,n,o,s){return Zl(e,t,n,o)}function Hl(e){var t=Oe(e)+1,n=wt(t);return _e(e,n,t),n}var Jl=function(e,t,n,o){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=p.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=o},$n=365,Yn=146;Object.defineProperties(Jl.prototype,{read:{get:function(){return(this.mode&$n)===$n},set:function(e){e?this.mode|=$n:this.mode&=~$n}},write:{get:function(){return(this.mode&Yn)===Yn},set:function(e){e?this.mode|=Yn:this.mode&=~Yn}},isFolder:{get:function(){return p.isDir(this.mode)}},isDevice:{get:function(){return p.isChrdev(this.mode)}}}),p.FSNode=Jl,p.staticInit(),i.FS_createPath=p.createPath,i.FS_createDataFile=p.createDataFile,i.FS_createPreloadedFile=p.createPreloadedFile,i.FS_unlink=p.unlink,i.FS_createLazyFile=p.createLazyFile,i.FS_createDevice=p.createDevice,Ip(),Er=i.BindingError=mo(Error,"BindingError"),Tl=i.InternalError=mo(Error,"InternalError"),Jp(),Vp(),om(),Fl=i.UnboundTypeError=mo(Error,"UnboundTypeError"),bm(),i.requestFullscreen=function(e,t){W.requestFullscreen(e,t)},i.requestAnimationFrame=function(e){W.requestAnimationFrame(e)},i.setCanvasSize=function(e,t,n){W.setCanvasSize(e,t,n)},i.pauseMainLoop=function(){W.mainLoop.pause()},i.resumeMainLoop=function(){W.mainLoop.resume()},i.getUserMedia=function(){W.getUserMedia()},i.createContext=function(e,t,n,o){return W.createContext(e,t,n,o)},Ke.staticInit();for(var V,qt=0;qt<32;++qt)Po.push(new Array(qt));for(var zg=new Float32Array(288),qt=0;qt<288;++qt)Fo[qt]=zg.subarray(0,qt+1);var Ql={__cxa_allocate_exception:$e,__cxa_throw:lr,__syscall_chmod:fp,__syscall_fchmod:dp,__syscall_fcntl64:pp,__syscall_fstat64:mp,__syscall_ftruncate64:bp,__syscall_getcwd:gp,__syscall_getdents64:yp,__syscall_ioctl:_p,__syscall_lstat64:vp,__syscall_mkdirat:wp,__syscall_newfstatat:Ep,__syscall_openat:Sp,__syscall_readlinkat:Cp,__syscall_renameat:Tp,__syscall_stat64:xp,__syscall_symlink:Rp,__syscall_unlinkat:kp,_dlinit:Pp,_dlopen_js:Ap,_dlsym_js:Fp,_embind_register_bigint:Dp,_embind_register_bool:jp,_embind_register_class:um,_embind_register_class_class_function:cm,_embind_register_class_constructor:fm,_embind_register_class_function:dm,_embind_register_class_property:hm,_embind_register_emval:gm,_embind_register_enum:_m,_embind_register_enum_value:vm,_embind_register_float:Em,_embind_register_function:Sm,_embind_register_integer:Tm,_embind_register_memory_view:xm,_embind_register_smart_ptr:Rm,_embind_register_std_string:km,_embind_register_std_wstring:Mm,_embind_register_void:jm,_emscripten_fetch_free:Nm,_emscripten_get_now_is_monotonic:Om,_emval_as:Um,_emval_call:Wm,_emval_call_method:Gm,_emval_call_void_method:Km,_emval_decref:So,_emval_get_method_caller:$m,_emval_get_module_property:Ym,_emval_get_property:Zm,_emval_incref:Hm,_emval_is_number:Jm,_emval_new_cstring:Qm,_emval_run_destructors:qm,_emval_set_property:e0,_emval_take_value:t0,_gmtime_js:r0,_localtime_js:o0,_mktime_js:a0,_mmap_js:s0,_munmap_js:l0,_tzset_js:u0,abort:c0,alBufferData:b0,alDeleteBuffers:g0,alDeleteSources:y0,alGenBuffers:_0,alGenSources:v0,alGetError:w0,alGetSourcei:E0,alGetString:S0,alSourcePause:C0,alSourcePlay:T0,alSourceStop:x0,alSourcef:R0,alSourcei:Wl,alcCloseDevice:k0,alcCreateContext:A0,alcDestroyContext:F0,alcGetError:D0,alcGetString:I0,alcMakeContextCurrent:L0,alcOpenDevice:M0,bnb_get_random_value:We,bnb_randombytes_init_if_needed:Qe,create_video:k,delete_video:L,emscripten_date_now:j0,emscripten_get_heap_max:N0,emscripten_get_now:Vn,emscripten_is_main_browser_thread:B0,emscripten_memcpy_big:O0,emscripten_resize_heap:W0,emscripten_start_fetch:G0,environ_get:$0,environ_sizes_get:Y0,exit:h0,fd_close:Z0,fd_fdstat_get:H0,fd_read:Q0,fd_seek:q0,fd_sync:eb,fd_write:rb,get_current_hostname:g,get_user_id_web:ne,getaddrinfo:ob,getentropy:Xn,glActiveTexture:ab,glAttachShader:sb,glBindBuffer:lb,glBindBufferRange:ub,glBindFramebuffer:cb,glBindRenderbuffer:fb,glBindTexture:db,glBindVertexArray:hb,glBlendEquation:pb,glBlendFunc:mb,glBlendFuncSeparate:bb,glBlitFramebuffer:gb,glBufferData:yb,glBufferSubData:_b,glClearBufferfv:vb,glColorMask:wb,glCompileShader:Eb,glCompressedTexImage2D:Sb,glCompressedTexImage3D:Cb,glCopyTexSubImage2D:Tb,glCreateProgram:xb,glCreateShader:Rb,glDeleteBuffers:kb,glDeleteFramebuffers:Pb,glDeleteProgram:Ab,glDeleteRenderbuffers:Fb,glDeleteShader:Db,glDeleteTextures:Ib,glDeleteVertexArrays:Lb,glDepthFunc:Mb,glDepthMask:jb,glDisable:Ob,glDrawArrays:Ub,glDrawArraysInstanced:Wb,glDrawBuffers:zb,glDrawElements:Vb,glDrawElementsInstanced:Gb,glEnable:Kb,glEnableVertexAttribArray:Xb,glFramebufferRenderbuffer:$b,glFramebufferTexture2D:Yb,glFrontFace:Zb,glGenBuffers:Hb,glGenFramebuffers:Jb,glGenRenderbuffers:Qb,glGenTextures:qb,glGenVertexArrays:eg,glGenerateMipmap:tg,glGetError:rg,glGetIntegerv:og,glGetProgramInfoLog:ag,glGetProgramiv:sg,glGetShaderInfoLog:lg,glGetShaderiv:ug,glGetUniformLocation:fg,glInvalidateFramebuffer:dg,glLinkProgram:hg,glPixelStorei:pg,glReadPixels:gg,glRenderbufferStorage:yg,glRenderbufferStorageMultisample:_g,glShaderSource:vg,glTexImage2D:wg,glTexImage3D:Eg,glTexParameteri:Sg,glTexStorage2D:Cg,glTexStorage3D:Tg,glTexSubImage2D:xg,glTexSubImage3D:Rg,glUniform1f:kg,glUniform1i:Pg,glUniform1ui:Ag,glUniform2f:Fg,glUniform2fv:Dg,glUniform4fv:Ig,glUseProgram:Lg,glVertexAttribIPointer:Mg,glVertexAttribPointer:jg,glViewport:Ng,is_electron:f,strftime:Zl,strftime_l:Wg,xnnLoadWasmModuleJS:z};T(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)};var wt=i._malloc=function(){return(wt=i._malloc=i.asm.malloc).apply(null,arguments)},ql=i.___errno_location=function(){return(ql=i.___errno_location=i.asm.__errno_location).apply(null,arguments)},Bt=i._free=function(){return(Bt=i._free=i.asm.free).apply(null,arguments)},eu=i.___getTypeName=function(){return(eu=i.___getTypeName=i.asm.__getTypeName).apply(null,arguments)};i.__embind_initialize_bindings=function(){return(i.__embind_initialize_bindings=i.asm._embind_initialize_bindings).apply(null,arguments)};var Zn=i._htonl=function(){return(Zn=i._htonl=i.asm.htonl).apply(null,arguments)},Hn=i._htons=function(){return(Hn=i._htons=i.asm.htons).apply(null,arguments)},tu=i._emscripten_builtin_memalign=function(){return(tu=i._emscripten_builtin_memalign=i.asm.emscripten_builtin_memalign).apply(null,arguments)},ru=i._ntohs=function(){return(ru=i._ntohs=i.asm.ntohs).apply(null,arguments)},nu=i.___cxa_is_pointer_type=function(){return(nu=i.___cxa_is_pointer_type=i.asm.__cxa_is_pointer_type).apply(null,arguments)};i.dynCall_jii=function(){return(i.dynCall_jii=i.asm.dynCall_jii).apply(null,arguments)},i.dynCall_jiii=function(){return(i.dynCall_jiii=i.asm.dynCall_jiii).apply(null,arguments)},i.dynCall_viiij=function(){return(i.dynCall_viiij=i.asm.dynCall_viiij).apply(null,arguments)},i.dynCall_viijjiii=function(){return(i.dynCall_viijjiii=i.asm.dynCall_viijjiii).apply(null,arguments)},i.dynCall_iiiiji=function(){return(i.dynCall_iiiiji=i.asm.dynCall_iiiiji).apply(null,arguments)},i.dynCall_iiiijii=function(){return(i.dynCall_iiiijii=i.asm.dynCall_iiiijii).apply(null,arguments)},i.dynCall_iijjj=function(){return(i.dynCall_iijjj=i.asm.dynCall_iijjj).apply(null,arguments)},i.dynCall_viij=function(){return(i.dynCall_viij=i.asm.dynCall_viij).apply(null,arguments)},i.dynCall_ji=function(){return(i.dynCall_ji=i.asm.dynCall_ji).apply(null,arguments)},i.dynCall_iiffj=function(){return(i.dynCall_iiffj=i.asm.dynCall_iiffj).apply(null,arguments)},i.dynCall_vijjiii=function(){return(i.dynCall_vijjiii=i.asm.dynCall_vijjiii).apply(null,arguments)},i.dynCall_viiiji=function(){return(i.dynCall_viiiji=i.asm.dynCall_viiiji).apply(null,arguments)},i.dynCall_viiijii=function(){return(i.dynCall_viiijii=i.asm.dynCall_viiijii).apply(null,arguments)},i.dynCall_vij=function(){return(i.dynCall_vij=i.asm.dynCall_vij).apply(null,arguments)},i.dynCall_iiiiiij=function(){return(i.dynCall_iiiiiij=i.asm.dynCall_iiiiiij).apply(null,arguments)},i.dynCall_viijji=function(){return(i.dynCall_viijji=i.asm.dynCall_viijji).apply(null,arguments)},i.dynCall_viiiij=function(){return(i.dynCall_viiiij=i.asm.dynCall_viiiij).apply(null,arguments)},i.dynCall_viiiiji=function(){return(i.dynCall_viiiiji=i.asm.dynCall_viiiiji).apply(null,arguments)},i.dynCall_iiiji=function(){return(i.dynCall_iiiji=i.asm.dynCall_iiiji).apply(null,arguments)},i.dynCall_jijjiii=function(){return(i.dynCall_jijjiii=i.asm.dynCall_jijjiii).apply(null,arguments)},i.dynCall_jijiii=function(){return(i.dynCall_jijiii=i.asm.dynCall_jijiii).apply(null,arguments)},i.dynCall_jijiiii=function(){return(i.dynCall_jijiiii=i.asm.dynCall_jijiiii).apply(null,arguments)},i.dynCall_jijii=function(){return(i.dynCall_jijii=i.asm.dynCall_jijii).apply(null,arguments)},i.dynCall_jijiiiiii=function(){return(i.dynCall_jijiiiiii=i.asm.dynCall_jijiiiiii).apply(null,arguments)},i.dynCall_jijj=function(){return(i.dynCall_jijj=i.asm.dynCall_jijj).apply(null,arguments)},i.dynCall_viji=function(){return(i.dynCall_viji=i.asm.dynCall_viji).apply(null,arguments)},i.dynCall_iijijjji=function(){return(i.dynCall_iijijjji=i.asm.dynCall_iijijjji).apply(null,arguments)},i.dynCall_iiji=function(){return(i.dynCall_iiji=i.asm.dynCall_iiji).apply(null,arguments)},i.dynCall_iiiij=function(){return(i.dynCall_iiiij=i.asm.dynCall_iiiij).apply(null,arguments)},i.dynCall_jijij=function(){return(i.dynCall_jijij=i.asm.dynCall_jijij).apply(null,arguments)},i.dynCall_iijijji=function(){return(i.dynCall_iijijji=i.asm.dynCall_iijijji).apply(null,arguments)},i.dynCall_jiiii=function(){return(i.dynCall_jiiii=i.asm.dynCall_jiiii).apply(null,arguments)},i.dynCall_jij=function(){return(i.dynCall_jij=i.asm.dynCall_jij).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.dynCall_viiijj=function(){return(i.dynCall_viiijj=i.asm.dynCall_viiijj).apply(null,arguments)},i.dynCall_iiij=function(){return(i.dynCall_iiij=i.asm.dynCall_iiij).apply(null,arguments)},i.dynCall_iijii=function(){return(i.dynCall_iijii=i.asm.dynCall_iijii).apply(null,arguments)},i.dynCall_iiijiji=function(){return(i.dynCall_iiijiji=i.asm.dynCall_iiijiji).apply(null,arguments)},i.dynCall_iiijiii=function(){return(i.dynCall_iiijiii=i.asm.dynCall_iiijiii).apply(null,arguments)},i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.dynCall_viijii).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.dynCall_iiiiij).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.dynCall_iiiiijj).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.dynCall_iiiiiijj).apply(null,arguments)},i.dynCall_jjj=function(){return(i.dynCall_jjj=i.asm.dynCall_jjj).apply(null,arguments)},i.dynCall_iiiijj=function(){return(i.dynCall_iiiijj=i.asm.dynCall_iiiijj).apply(null,arguments)},i.dynCall_viijj=function(){return(i.dynCall_viijj=i.asm.dynCall_viijj).apply(null,arguments)},i.dynCall_viiijjj=function(){return(i.dynCall_viiijjj=i.asm.dynCall_viiijjj).apply(null,arguments)},i.dynCall_iiijj=function(){return(i.dynCall_iiijj=i.asm.dynCall_iiijj).apply(null,arguments)},i.dynCall_viijjj=function(){return(i.dynCall_viijjj=i.asm.dynCall_viijjj).apply(null,arguments)},i.___start_em_js=1345796,i.___stop_em_js=1348948,i.addRunDependency=h,i.removeRunDependency=S,i.FS_createPath=p.createPath,i.FS_createDataFile=p.createDataFile,i.FS_createPreloadedFile=p.createPreloadedFile,i.FS_createLazyFile=p.createLazyFile,i.FS_createDevice=p.createDevice,i.FS_unlink=p.unlink,i.stringToNewUTF8=Hl,i.FS=p,i.GL=H;var Jn;Z=function e(){Jn||iu(),Jn||(Z=e)};function iu(e){if(N>0||(rt(),N>0))return;function t(){Jn||(Jn=!0,i.calledRun=!0,!Xe&&(st(),c(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Mt()))}i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),t()},1)):t()}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return iu(),zl=function(){},i.ready}})();const qu=Qu,ec=()=>{const r=document.createElement("canvas");return r.style.maxWidth="100%",r.style.objectFit="cover",r},ha=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),tc=r=>(r!==""&&!r.endsWith("/")&&(r+="/"),a=>r+a),rc=r=>a=>r[a],nc=async(r,a={})=>{if(await ha())a.info?.('The platform supports SIMD. Going to use "BanubaSDK.simd.wasm"');else return a.info?.('The platform does not support SIMD. Using "BanubaSDK.wasm"'),r;const i=r("BanubaSDK.simd.wasm");return i?await fetch(i,{method:"HEAD"}).then(c=>c.ok)?c=>{const[y,v]=c.split(".");if(v!=="wasm")return r(c);const w=[y,"simd",v].join(".");return r(w)}:(a.warn?.(`Unable to fetch "BanubaSDK.simd.wasm" from the "${i}". Using "BanubaSDK.wasm" as a fallback`),r):(a.warn?.('"BanubaSDK.simd.wasm" is missing in the "locateFile" option. Using "BanubaSDK.wasm" as a fallback'),r)},ic=(()=>{try{return new URL(".",document.currentScript.src).toString()}catch{return""}})(),oc=async(r,a)=>(typeof r>"u"&&(r=ic),typeof r=="string"&&(r=tc(r)),typeof r=="object"&&(r=rc(r)),r=await nc(r,a),r);var Pr=(r=>(r.ERROR="error",r.WARNING="warn",r.INFO="info",r.DEBUG="debug",r))(Pr||{});function ac(r){const a=Object.keys(Pr).reverse().find(c=>typeof r[Pr[c]]=="function")??"ERROR",i=c=>{for(const v in Pr)if(c.includes(v)){const w=r[Pr[v]];if(typeof w=="function"){w.call(r,c);return}}const y=r.debug;typeof y=="function"&&y.call(r,c)};return{logLevel:a,print:i,printErr:i}}const sc=["isAliasOf","clone","delete","isDeleted","deleteLater"],lc=["size","get","set","push_back"],pa=r=>{if(r==null||typeof r!="function")return!1;const{prototype:a}=r;return a?sc.every(i=>i in a):!1},ma=r=>r==null||typeof r!="object"?!1:pa(r.constructor),ba=r=>ma(r)&&lc.every(a=>a in r),uc=(r,a)=>new Proxy(r,{get(i,c){const y=i[c];return typeof y=="function"?ga(y,a):y}}),ga=(r,a)=>new Proxy(r,{apply(i,c,y){try{const v=i.apply(c,y);return ma(v)?uc(v,a):v}catch(v){throw typeof v=="number"&&(v=new Error(a(v))),v}}}),cc=(r,a)=>new Proxy(r,{construct(i,c){try{return new i(...c)}catch(y){throw typeof y=="number"&&(y=new Error(a(y))),y}},get(i,c){const y=i[c];return typeof y=="function"?ga(y,a):y}}),fc=(r,a)=>{for(const[i,c]of Object.entries(r))pa(c)&&Object.defineProperty(r,i,{value:cc(c,a)})},dc="recognizer_features_update";async function ya({clientToken:r,locateFile:a,canvas:i=ec(),logger:c={warn:console.warn,error:console.error},...y}){const v=await oc(a,c),{logLevel:w,print:_,printErr:D}=ac(c),I=await new Promise((O,ee)=>qu({locateFile:v,print:_,printErr:D,onAbort:$=>{$ instanceof WebAssembly.CompileError&&ee(new Error(`Failed to compile "BanubaSDK.wasm": the file "${v("BanubaSDK.wasm")}" is invalid. This error is usually caused by misconfigured "locateFile" option, see https://docs.banuba.com/face-ar-sdk-v1/generated/typedoc/modules.html#SDKOptions. Original Error: `+$))},...y}).then(O,ee));return fc(I,O=>I.getExceptionMessage(O)),I.UtilityManager.initialize(new I.VectorString,r),I.UtilityManager.setLogLevel(I.SeverityLevel[w]),I.setCanvasSize=(O,ee)=>{Object.assign(i,{width:O,height:ee})},I.createContext(i,!0,!0,{alpha:!0,antialias:!1,depth:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!1}),I.canvas=i,_a(I.ctx),I}function _a(r){const a=["EXT_color_buffer_half_float","EXT_color_buffer_float"];for(const i of a)r.getExtension(i)}var lt=(r=>(r[r.Running=0]="Running",r[r.Idle=1]="Idle",r[r.Paused=2]="Paused",r))(lt||{}),va={exports:{}},pi={exports:{}},$t={},Ar={};Ar.byteLength=mc,Ar.toByteArray=gc,Ar.fromByteArray=vc;for(var Pt=[],gt=[],hc=typeof Uint8Array<"u"?Uint8Array:Array,mi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hr=0,pc=mi.length;hr<pc;++hr)Pt[hr]=mi[hr],gt[mi.charCodeAt(hr)]=hr;gt["-".charCodeAt(0)]=62,gt["_".charCodeAt(0)]=63;function wa(r){var a=r.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=r.indexOf("=");i===-1&&(i=a);var c=i===a?0:4-i%4;return[i,c]}function mc(r){var a=wa(r),i=a[0],c=a[1];return(i+c)*3/4-c}function bc(r,a,i){return(a+i)*3/4-i}function gc(r){var a,i=wa(r),c=i[0],y=i[1],v=new hc(bc(r,c,y)),w=0,_=y>0?c-4:c,D;for(D=0;D<_;D+=4)a=gt[r.charCodeAt(D)]<<18|gt[r.charCodeAt(D+1)]<<12|gt[r.charCodeAt(D+2)]<<6|gt[r.charCodeAt(D+3)],v[w++]=a>>16&255,v[w++]=a>>8&255,v[w++]=a&255;return y===2&&(a=gt[r.charCodeAt(D)]<<2|gt[r.charCodeAt(D+1)]>>4,v[w++]=a&255),y===1&&(a=gt[r.charCodeAt(D)]<<10|gt[r.charCodeAt(D+1)]<<4|gt[r.charCodeAt(D+2)]>>2,v[w++]=a>>8&255,v[w++]=a&255),v}function yc(r){return Pt[r>>18&63]+Pt[r>>12&63]+Pt[r>>6&63]+Pt[r&63]}function _c(r,a,i){for(var c,y=[],v=a;v<i;v+=3)c=(r[v]<<16&16711680)+(r[v+1]<<8&65280)+(r[v+2]&255),y.push(yc(c));return y.join("")}function vc(r){for(var a,i=r.length,c=i%3,y=[],v=16383,w=0,_=i-c;w<_;w+=v)y.push(_c(r,w,w+v>_?_:w+v));return c===1?(a=r[i-1],y.push(Pt[a>>2]+Pt[a<<4&63]+"==")):c===2&&(a=(r[i-2]<<8)+r[i-1],y.push(Pt[a>>10]+Pt[a>>4&63]+Pt[a<<2&63]+"=")),y.join("")}var en={};en.read=function(r,a,i,c,y){var v,w,_=y*8-c-1,D=(1<<_)-1,I=D>>1,O=-7,ee=i?y-1:0,$=i?-1:1,re=r[a+ee];for(ee+=$,v=re&(1<<-O)-1,re>>=-O,O+=_;O>0;v=v*256+r[a+ee],ee+=$,O-=8);for(w=v&(1<<-O)-1,v>>=-O,O+=c;O>0;w=w*256+r[a+ee],ee+=$,O-=8);if(v===0)v=1-I;else{if(v===D)return w?NaN:(re?-1:1)*(1/0);w=w+Math.pow(2,c),v=v-I}return(re?-1:1)*w*Math.pow(2,v-c)},en.write=function(r,a,i,c,y,v){var w,_,D,I=v*8-y-1,O=(1<<I)-1,ee=O>>1,$=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=c?0:v-1,X=c?1:-1,we=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(_=isNaN(a)?1:0,w=O):(w=Math.floor(Math.log(a)/Math.LN2),a*(D=Math.pow(2,-w))<1&&(w--,D*=2),w+ee>=1?a+=$/D:a+=$*Math.pow(2,1-ee),a*D>=2&&(w++,D/=2),w+ee>=O?(_=0,w=O):w+ee>=1?(_=(a*D-1)*Math.pow(2,y),w=w+ee):(_=a*Math.pow(2,ee-1)*Math.pow(2,y),w=0));y>=8;r[i+re]=_&255,re+=X,_/=256,y-=8);for(w=w<<y|_,I+=y;I>0;r[i+re]=w&255,re+=X,w/=256,I-=8);r[i+re-X]|=we*128};(function(r){const a=Ar,i=en,c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=_,r.SlowBuffer=Q,r.INSPECT_MAX_BYTES=50;const y=2147483647;r.kMaxLength=y,_.TYPED_ARRAY_SUPPORT=v(),!_.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{const l=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(l,f),l.foo()===42}catch{return!1}}Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}});function w(l){if(l>y)throw new RangeError('The value "'+l+'" is invalid for option "size"');const f=new Uint8Array(l);return Object.setPrototypeOf(f,_.prototype),f}function _(l,f,g){if(typeof l=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ee(l)}return D(l,f,g)}_.poolSize=8192;function D(l,f,g){if(typeof l=="string")return $(l,f);if(ArrayBuffer.isView(l))return X(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(se(l,ArrayBuffer)||l&&se(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(se(l,SharedArrayBuffer)||l&&se(l.buffer,SharedArrayBuffer)))return we(l,f,g);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=l.valueOf&&l.valueOf();if(k!=null&&k!==l)return _.from(k,f,g);const L=me(l);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return _.from(l[Symbol.toPrimitive]("string"),f,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}_.from=function(l,f,g){return D(l,f,g)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array);function I(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function O(l,f,g){return I(l),l<=0?w(l):f!==void 0?typeof g=="string"?w(l).fill(f,g):w(l).fill(f):w(l)}_.alloc=function(l,f,g){return O(l,f,g)};function ee(l){return I(l),w(l<0?0:be(l)|0)}_.allocUnsafe=function(l){return ee(l)},_.allocUnsafeSlow=function(l){return ee(l)};function $(l,f){if((typeof f!="string"||f==="")&&(f="utf8"),!_.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const g=Fe(l,f)|0;let k=w(g);const L=k.write(l,f);return L!==g&&(k=k.slice(0,L)),k}function re(l){const f=l.length<0?0:be(l.length)|0,g=w(f);for(let k=0;k<f;k+=1)g[k]=l[k]&255;return g}function X(l){if(se(l,Uint8Array)){const f=new Uint8Array(l);return we(f.buffer,f.byteOffset,f.byteLength)}return re(l)}function we(l,f,g){if(f<0||l.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<f+(g||0))throw new RangeError('"length" is outside of buffer bounds');let k;return f===void 0&&g===void 0?k=new Uint8Array(l):g===void 0?k=new Uint8Array(l,f):k=new Uint8Array(l,f,g),Object.setPrototypeOf(k,_.prototype),k}function me(l){if(_.isBuffer(l)){const f=be(l.length)|0,g=w(f);return g.length===0||l.copy(g,0,0,f),g}if(l.length!==void 0)return typeof l.length!="number"||Re(l.length)?w(0):re(l);if(l.type==="Buffer"&&Array.isArray(l.data))return re(l.data)}function be(l){if(l>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return l|0}function Q(l){return+l!=l&&(l=0),_.alloc(+l)}_.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==_.prototype},_.compare=function(l,f){if(se(l,Uint8Array)&&(l=_.from(l,l.offset,l.byteLength)),se(f,Uint8Array)&&(f=_.from(f,f.offset,f.byteLength)),!_.isBuffer(l)||!_.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===f)return 0;let g=l.length,k=f.length;for(let L=0,z=Math.min(g,k);L<z;++L)if(l[L]!==f[L]){g=l[L],k=f[L];break}return g<k?-1:k<g?1:0},_.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(l,f){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return _.alloc(0);let g;if(f===void 0)for(f=0,g=0;g<l.length;++g)f+=l[g].length;const k=_.allocUnsafe(f);let L=0;for(g=0;g<l.length;++g){let z=l[g];if(se(z,Uint8Array))L+z.length>k.length?(_.isBuffer(z)||(z=_.from(z)),z.copy(k,L)):Uint8Array.prototype.set.call(k,z,L);else if(_.isBuffer(z))z.copy(k,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=z.length}return k};function Fe(l,f){if(_.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||se(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const g=l.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&g===0)return 0;let L=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return h(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return U(l).length;default:if(L)return k?-1:h(l).length;f=(""+f).toLowerCase(),L=!0}}_.byteLength=Fe;function Xe(l,f,g){let k=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,f>>>=0,g<=f))return"";for(l||(l="utf8");;)switch(l){case"hex":return te(this,f,g);case"utf8":case"utf-8":return le(this,f,g);case"ascii":return Se(this,f,g);case"latin1":case"binary":return j(this,f,g);case"base64":return Ie(this,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,f,g);default:if(k)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),k=!0}}_.prototype._isBuffer=!0;function ye(l,f,g){const k=l[f];l[f]=l[g],l[g]=k}_.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<l;f+=2)ye(this,f,f+1);return this},_.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<l;f+=4)ye(this,f,f+3),ye(this,f+1,f+2);return this},_.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<l;f+=8)ye(this,f,f+7),ye(this,f+1,f+6),ye(this,f+2,f+5),ye(this,f+3,f+4);return this},_.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?le(this,0,l):Xe.apply(this,arguments)},_.prototype.toLocaleString=_.prototype.toString,_.prototype.equals=function(l){if(!_.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:_.compare(this,l)===0},_.prototype.inspect=function(){let l="";const f=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(l+=" ... "),"<Buffer "+l+">"},c&&(_.prototype[c]=_.prototype.inspect),_.prototype.compare=function(l,f,g,k,L){if(se(l,Uint8Array)&&(l=_.from(l,l.offset,l.byteLength)),!_.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(f===void 0&&(f=0),g===void 0&&(g=l?l.length:0),k===void 0&&(k=0),L===void 0&&(L=this.length),f<0||g>l.length||k<0||L>this.length)throw new RangeError("out of range index");if(k>=L&&f>=g)return 0;if(k>=L)return-1;if(f>=g)return 1;if(f>>>=0,g>>>=0,k>>>=0,L>>>=0,this===l)return 0;let z=L-k,ne=g-f;const We=Math.min(z,ne),Qe=this.slice(k,L),ze=l.slice(f,g);for(let Me=0;Me<We;++Me)if(Qe[Me]!==ze[Me]){z=Qe[Me],ne=ze[Me];break}return z<ne?-1:ne<z?1:0};function Ne(l,f,g,k,L){if(l.length===0)return-1;if(typeof g=="string"?(k=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,Re(g)&&(g=L?0:l.length-1),g<0&&(g=l.length+g),g>=l.length){if(L)return-1;g=l.length-1}else if(g<0)if(L)g=0;else return-1;if(typeof f=="string"&&(f=_.from(f,k)),_.isBuffer(f))return f.length===0?-1:Be(l,f,g,k,L);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(l,f,g):Uint8Array.prototype.lastIndexOf.call(l,f,g):Be(l,[f],g,k,L);throw new TypeError("val must be string, number or Buffer")}function Be(l,f,g,k,L){let z=1,ne=l.length,We=f.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(l.length<2||f.length<2)return-1;z=2,ne/=2,We/=2,g/=2}function Qe(Me,$e){return z===1?Me[$e]:Me.readUInt16BE($e*z)}let ze;if(L){let Me=-1;for(ze=g;ze<ne;ze++)if(Qe(l,ze)===Qe(f,Me===-1?0:ze-Me)){if(Me===-1&&(Me=ze),ze-Me+1===We)return Me*z}else Me!==-1&&(ze-=ze-Me),Me=-1}else for(g+We>ne&&(g=ne-We),ze=g;ze>=0;ze--){let Me=!0;for(let $e=0;$e<We;$e++)if(Qe(l,ze+$e)!==Qe(f,$e)){Me=!1;break}if(Me)return ze}return-1}_.prototype.includes=function(l,f,g){return this.indexOf(l,f,g)!==-1},_.prototype.indexOf=function(l,f,g){return Ne(this,l,f,g,!0)},_.prototype.lastIndexOf=function(l,f,g){return Ne(this,l,f,g,!1)};function Ve(l,f,g,k){g=Number(g)||0;const L=l.length-g;k?(k=Number(k),k>L&&(k=L)):k=L;const z=f.length;k>z/2&&(k=z/2);let ne;for(ne=0;ne<k;++ne){const We=parseInt(f.substr(ne*2,2),16);if(Re(We))return ne;l[g+ne]=We}return ne}function Ee(l,f,g,k){return Y(h(f,l.length-g),l,g,k)}function ce(l,f,g,k){return Y(S(f),l,g,k)}function _e(l,f,g,k){return Y(U(f),l,g,k)}function Oe(l,f,g,k){return Y(P(f,l.length-g),l,g,k)}_.prototype.write=function(l,f,g,k){if(f===void 0)k="utf8",g=this.length,f=0;else if(g===void 0&&typeof f=="string")k=f,g=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(g)?(g=g>>>0,k===void 0&&(k="utf8")):(k=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-f;if((g===void 0||g>L)&&(g=L),l.length>0&&(g<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");let z=!1;for(;;)switch(k){case"hex":return Ve(this,l,f,g);case"utf8":case"utf-8":return Ee(this,l,f,g);case"ascii":case"latin1":case"binary":return ce(this,l,f,g);case"base64":return _e(this,l,f,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,l,f,g);default:if(z)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),z=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ie(l,f,g){return f===0&&g===l.length?a.fromByteArray(l):a.fromByteArray(l.slice(f,g))}function le(l,f,g){g=Math.min(l.length,g);const k=[];let L=f;for(;L<g;){const z=l[L];let ne=null,We=z>239?4:z>223?3:z>191?2:1;if(L+We<=g){let Qe,ze,Me,$e;switch(We){case 1:z<128&&(ne=z);break;case 2:Qe=l[L+1],(Qe&192)===128&&($e=(z&31)<<6|Qe&63,$e>127&&(ne=$e));break;case 3:Qe=l[L+1],ze=l[L+2],(Qe&192)===128&&(ze&192)===128&&($e=(z&15)<<12|(Qe&63)<<6|ze&63,$e>2047&&($e<55296||$e>57343)&&(ne=$e));break;case 4:Qe=l[L+1],ze=l[L+2],Me=l[L+3],(Qe&192)===128&&(ze&192)===128&&(Me&192)===128&&($e=(z&15)<<18|(Qe&63)<<12|(ze&63)<<6|Me&63,$e>65535&&$e<1114112&&(ne=$e))}}ne===null?(ne=65533,We=1):ne>65535&&(ne-=65536,k.push(ne>>>10&1023|55296),ne=56320|ne&1023),k.push(ne),L+=We}return De(k)}const ae=4096;function De(l){const f=l.length;if(f<=ae)return String.fromCharCode.apply(String,l);let g="",k=0;for(;k<f;)g+=String.fromCharCode.apply(String,l.slice(k,k+=ae));return g}function Se(l,f,g){let k="";g=Math.min(l.length,g);for(let L=f;L<g;++L)k+=String.fromCharCode(l[L]&127);return k}function j(l,f,g){let k="";g=Math.min(l.length,g);for(let L=f;L<g;++L)k+=String.fromCharCode(l[L]);return k}function te(l,f,g){const k=l.length;(!f||f<0)&&(f=0),(!g||g<0||g>k)&&(g=k);let L="";for(let z=f;z<g;++z)L+=Ze[l[z]];return L}function q(l,f,g){const k=l.slice(f,g);let L="";for(let z=0;z<k.length-1;z+=2)L+=String.fromCharCode(k[z]+k[z+1]*256);return L}_.prototype.slice=function(l,f){const g=this.length;l=~~l,f=f===void 0?g:~~f,l<0?(l+=g,l<0&&(l=0)):l>g&&(l=g),f<0?(f+=g,f<0&&(f=0)):f>g&&(f=g),f<l&&(f=l);const k=this.subarray(l,f);return Object.setPrototypeOf(k,_.prototype),k};function ve(l,f,g){if(l%1!==0||l<0)throw new RangeError("offset is not uint");if(l+f>g)throw new RangeError("Trying to access beyond buffer length")}_.prototype.readUintLE=_.prototype.readUIntLE=function(l,f,g){l=l>>>0,f=f>>>0,g||ve(l,f,this.length);let k=this[l],L=1,z=0;for(;++z<f&&(L*=256);)k+=this[l+z]*L;return k},_.prototype.readUintBE=_.prototype.readUIntBE=function(l,f,g){l=l>>>0,f=f>>>0,g||ve(l,f,this.length);let k=this[l+--f],L=1;for(;f>0&&(L*=256);)k+=this[l+--f]*L;return k},_.prototype.readUint8=_.prototype.readUInt8=function(l,f){return l=l>>>0,f||ve(l,1,this.length),this[l]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(l,f){return l=l>>>0,f||ve(l,2,this.length),this[l]|this[l+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(l,f){return l=l>>>0,f||ve(l,2,this.length),this[l]<<8|this[l+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(l,f){return l=l>>>0,f||ve(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(l,f){return l=l>>>0,f||ve(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},_.prototype.readBigUInt64LE=T(function(l){l=l>>>0,F(l,"offset");const f=this[l],g=this[l+7];(f===void 0||g===void 0)&&N(l,this.length-8);const k=f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,L=this[++l]+this[++l]*2**8+this[++l]*2**16+g*2**24;return BigInt(k)+(BigInt(L)<<BigInt(32))}),_.prototype.readBigUInt64BE=T(function(l){l=l>>>0,F(l,"offset");const f=this[l],g=this[l+7];(f===void 0||g===void 0)&&N(l,this.length-8);const k=f*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],L=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+g;return(BigInt(k)<<BigInt(32))+BigInt(L)}),_.prototype.readIntLE=function(l,f,g){l=l>>>0,f=f>>>0,g||ve(l,f,this.length);let k=this[l],L=1,z=0;for(;++z<f&&(L*=256);)k+=this[l+z]*L;return L*=128,k>=L&&(k-=Math.pow(2,8*f)),k},_.prototype.readIntBE=function(l,f,g){l=l>>>0,f=f>>>0,g||ve(l,f,this.length);let k=f,L=1,z=this[l+--k];for(;k>0&&(L*=256);)z+=this[l+--k]*L;return L*=128,z>=L&&(z-=Math.pow(2,8*f)),z},_.prototype.readInt8=function(l,f){return l=l>>>0,f||ve(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},_.prototype.readInt16LE=function(l,f){l=l>>>0,f||ve(l,2,this.length);const g=this[l]|this[l+1]<<8;return g&32768?g|4294901760:g},_.prototype.readInt16BE=function(l,f){l=l>>>0,f||ve(l,2,this.length);const g=this[l+1]|this[l]<<8;return g&32768?g|4294901760:g},_.prototype.readInt32LE=function(l,f){return l=l>>>0,f||ve(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},_.prototype.readInt32BE=function(l,f){return l=l>>>0,f||ve(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},_.prototype.readBigInt64LE=T(function(l){l=l>>>0,F(l,"offset");const f=this[l],g=this[l+7];(f===void 0||g===void 0)&&N(l,this.length-8);const k=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(g<<24);return(BigInt(k)<<BigInt(32))+BigInt(f+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),_.prototype.readBigInt64BE=T(function(l){l=l>>>0,F(l,"offset");const f=this[l],g=this[l+7];(f===void 0||g===void 0)&&N(l,this.length-8);const k=(f<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(k)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+g)}),_.prototype.readFloatLE=function(l,f){return l=l>>>0,f||ve(l,4,this.length),i.read(this,l,!0,23,4)},_.prototype.readFloatBE=function(l,f){return l=l>>>0,f||ve(l,4,this.length),i.read(this,l,!1,23,4)},_.prototype.readDoubleLE=function(l,f){return l=l>>>0,f||ve(l,8,this.length),i.read(this,l,!0,52,8)},_.prototype.readDoubleBE=function(l,f){return l=l>>>0,f||ve(l,8,this.length),i.read(this,l,!1,52,8)};function ke(l,f,g,k,L,z){if(!_.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>L||f<z)throw new RangeError('"value" argument is out of bounds');if(g+k>l.length)throw new RangeError("Index out of range")}_.prototype.writeUintLE=_.prototype.writeUIntLE=function(l,f,g,k){if(l=+l,f=f>>>0,g=g>>>0,!k){const ne=Math.pow(2,8*g)-1;ke(this,l,f,g,ne,0)}let L=1,z=0;for(this[f]=l&255;++z<g&&(L*=256);)this[f+z]=l/L&255;return f+g},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(l,f,g,k){if(l=+l,f=f>>>0,g=g>>>0,!k){const ne=Math.pow(2,8*g)-1;ke(this,l,f,g,ne,0)}let L=g-1,z=1;for(this[f+L]=l&255;--L>=0&&(z*=256);)this[f+L]=l/z&255;return f+g},_.prototype.writeUint8=_.prototype.writeUInt8=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,1,255,0),this[f]=l&255,f+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,2,65535,0),this[f]=l&255,this[f+1]=l>>>8,f+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,2,65535,0),this[f]=l>>>8,this[f+1]=l&255,f+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,4,4294967295,0),this[f+3]=l>>>24,this[f+2]=l>>>16,this[f+1]=l>>>8,this[f]=l&255,f+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,4,4294967295,0),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4};function ot(l,f,g,k,L){ct(f,k,L,l,g,7);let z=Number(f&BigInt(4294967295));l[g++]=z,z=z>>8,l[g++]=z,z=z>>8,l[g++]=z,z=z>>8,l[g++]=z;let ne=Number(f>>BigInt(32)&BigInt(4294967295));return l[g++]=ne,ne=ne>>8,l[g++]=ne,ne=ne>>8,l[g++]=ne,ne=ne>>8,l[g++]=ne,g}function dt(l,f,g,k,L){ct(f,k,L,l,g,7);let z=Number(f&BigInt(4294967295));l[g+7]=z,z=z>>8,l[g+6]=z,z=z>>8,l[g+5]=z,z=z>>8,l[g+4]=z;let ne=Number(f>>BigInt(32)&BigInt(4294967295));return l[g+3]=ne,ne=ne>>8,l[g+2]=ne,ne=ne>>8,l[g+1]=ne,ne=ne>>8,l[g]=ne,g+8}_.prototype.writeBigUInt64LE=T(function(l,f=0){return ot(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeBigUInt64BE=T(function(l,f=0){return dt(this,l,f,BigInt(0),BigInt("0xffffffffffffffff"))}),_.prototype.writeIntLE=function(l,f,g,k){if(l=+l,f=f>>>0,!k){const We=Math.pow(2,8*g-1);ke(this,l,f,g,We-1,-We)}let L=0,z=1,ne=0;for(this[f]=l&255;++L<g&&(z*=256);)l<0&&ne===0&&this[f+L-1]!==0&&(ne=1),this[f+L]=(l/z>>0)-ne&255;return f+g},_.prototype.writeIntBE=function(l,f,g,k){if(l=+l,f=f>>>0,!k){const We=Math.pow(2,8*g-1);ke(this,l,f,g,We-1,-We)}let L=g-1,z=1,ne=0;for(this[f+L]=l&255;--L>=0&&(z*=256);)l<0&&ne===0&&this[f+L+1]!==0&&(ne=1),this[f+L]=(l/z>>0)-ne&255;return f+g},_.prototype.writeInt8=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,1,127,-128),l<0&&(l=255+l+1),this[f]=l&255,f+1},_.prototype.writeInt16LE=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,2,32767,-32768),this[f]=l&255,this[f+1]=l>>>8,f+2},_.prototype.writeInt16BE=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,2,32767,-32768),this[f]=l>>>8,this[f+1]=l&255,f+2},_.prototype.writeInt32LE=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,4,2147483647,-2147483648),this[f]=l&255,this[f+1]=l>>>8,this[f+2]=l>>>16,this[f+3]=l>>>24,f+4},_.prototype.writeInt32BE=function(l,f,g){return l=+l,f=f>>>0,g||ke(this,l,f,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[f]=l>>>24,this[f+1]=l>>>16,this[f+2]=l>>>8,this[f+3]=l&255,f+4},_.prototype.writeBigInt64LE=T(function(l,f=0){return ot(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),_.prototype.writeBigInt64BE=T(function(l,f=0){return dt(this,l,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function at(l,f,g,k,L,z){if(g+k>l.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Ct(l,f,g,k,L){return f=+f,g=g>>>0,L||at(l,f,g,4),i.write(l,f,g,k,23,4),g+4}_.prototype.writeFloatLE=function(l,f,g){return Ct(this,l,f,!0,g)},_.prototype.writeFloatBE=function(l,f,g){return Ct(this,l,f,!1,g)};function mt(l,f,g,k,L){return f=+f,g=g>>>0,L||at(l,f,g,8),i.write(l,f,g,k,52,8),g+8}_.prototype.writeDoubleLE=function(l,f,g){return mt(this,l,f,!0,g)},_.prototype.writeDoubleBE=function(l,f,g){return mt(this,l,f,!1,g)},_.prototype.copy=function(l,f,g,k){if(!_.isBuffer(l))throw new TypeError("argument should be a Buffer");if(g||(g=0),!k&&k!==0&&(k=this.length),f>=l.length&&(f=l.length),f||(f=0),k>0&&k<g&&(k=g),k===g||l.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),l.length-f<k-g&&(k=l.length-f+g);const L=k-g;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,g,k):Uint8Array.prototype.set.call(l,this.subarray(g,k),f),L},_.prototype.fill=function(l,f,g,k){if(typeof l=="string"){if(typeof f=="string"?(k=f,f=0,g=this.length):typeof g=="string"&&(k=g,g=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!_.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(l.length===1){const z=l.charCodeAt(0);(k==="utf8"&&z<128||k==="latin1")&&(l=z)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(f<0||this.length<f||this.length<g)throw new RangeError("Out of range index");if(g<=f)return this;f=f>>>0,g=g===void 0?this.length:g>>>0,l||(l=0);let L;if(typeof l=="number")for(L=f;L<g;++L)this[L]=l;else{const z=_.isBuffer(l)?l:_.from(l,k),ne=z.length;if(ne===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(L=0;L<g-f;++L)this[L+f]=z[L%ne]}return this};const rt={};function st(l,f,g){rt[l]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,delete this.name}get code(){return l}set code(k){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:k,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}st("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),st("ERR_INVALID_ARG_TYPE",function(l,f){return`The "${l}" argument must be of type number. Received type ${typeof f}`},TypeError),st("ERR_OUT_OF_RANGE",function(l,f,g){let k=`The value of "${l}" is out of range.`,L=g;return Number.isInteger(g)&&Math.abs(g)>2**32?L=Mt(String(g)):typeof g=="bigint"&&(L=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(L=Mt(L)),L+="n"),k+=` It must be ${f}. Received ${L}`,k},RangeError);function Mt(l){let f="",g=l.length;const k=l[0]==="-"?1:0;for(;g>=k+4;g-=3)f=`_${l.slice(g-3,g)}${f}`;return`${l.slice(0,g)}${f}`}function _t(l,f,g){F(f,"offset"),(l[f]===void 0||l[f+g]===void 0)&&N(f,l.length-(g+1))}function ct(l,f,g,k,L,z){if(l>g||l<f){const ne=typeof f=="bigint"?"n":"";let We;throw z>3?f===0||f===BigInt(0)?We=`>= 0${ne} and < 2${ne} ** ${(z+1)*8}${ne}`:We=`>= -(2${ne} ** ${(z+1)*8-1}${ne}) and < 2 ** ${(z+1)*8-1}${ne}`:We=`>= ${f}${ne} and <= ${g}${ne}`,new rt.ERR_OUT_OF_RANGE("value",We,l)}_t(k,L,z)}function F(l,f){if(typeof l!="number")throw new rt.ERR_INVALID_ARG_TYPE(f,"number",l)}function N(l,f,g){throw Math.floor(l)!==l?(F(l,g),new rt.ERR_OUT_OF_RANGE(g||"offset","an integer",l)):f<0?new rt.ERR_BUFFER_OUT_OF_BOUNDS:new rt.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${f}`,l)}const Z=/[^+/0-9A-Za-z-_]/g;function u(l){if(l=l.split("=")[0],l=l.trim().replace(Z,""),l.length<2)return"";for(;l.length%4!==0;)l=l+"=";return l}function h(l,f){f=f||1/0;let g;const k=l.length;let L=null;const z=[];for(let ne=0;ne<k;++ne){if(g=l.charCodeAt(ne),g>55295&&g<57344){if(!L){if(g>56319){(f-=3)>-1&&z.push(239,191,189);continue}else if(ne+1===k){(f-=3)>-1&&z.push(239,191,189);continue}L=g;continue}if(g<56320){(f-=3)>-1&&z.push(239,191,189),L=g;continue}g=(L-55296<<10|g-56320)+65536}else L&&(f-=3)>-1&&z.push(239,191,189);if(L=null,g<128){if((f-=1)<0)break;z.push(g)}else if(g<2048){if((f-=2)<0)break;z.push(g>>6|192,g&63|128)}else if(g<65536){if((f-=3)<0)break;z.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((f-=4)<0)break;z.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return z}function S(l){const f=[];for(let g=0;g<l.length;++g)f.push(l.charCodeAt(g)&255);return f}function P(l,f){let g,k,L;const z=[];for(let ne=0;ne<l.length&&!((f-=2)<0);++ne)g=l.charCodeAt(ne),k=g>>8,L=g%256,z.push(L),z.push(k);return z}function U(l){return a.toByteArray(u(l))}function Y(l,f,g,k){let L;for(L=0;L<k&&!(L+g>=f.length||L>=l.length);++L)f[L+g]=l[L];return L}function se(l,f){return l instanceof f||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===f.name}function Re(l){return l!==l}const Ze=function(){const l="0123456789abcdef",f=new Array(256);for(let g=0;g<16;++g){const k=g*16;for(let L=0;L<16;++L)f[k+L]=l[g]+l[L]}return f}();function T(l){return typeof BigInt>"u"?C:l}function C(){throw new Error("BigInt not supported")}})($t);var tt={ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,a){return r.includes(a)},ArrayPrototypeIndexOf(r,a){return r.indexOf(a)},ArrayPrototypeJoin(r,a){return r.join(a)},ArrayPrototypeMap(r,a){return r.map(a)},ArrayPrototypePop(r,a){return r.pop(a)},ArrayPrototypePush(r,a){return r.push(a)},ArrayPrototypeSlice(r,a,i){return r.slice(a,i)},Error,FunctionPrototypeCall(r,a,...i){return r.call(a,...i)},FunctionPrototypeSymbolHasInstance(r,a){return Function.prototype[Symbol.hasInstance].call(r,a)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,a){return Object.defineProperties(r,a)},ObjectDefineProperty(r,a,i){return Object.defineProperty(r,a,i)},ObjectGetOwnPropertyDescriptor(r,a){return Object.getOwnPropertyDescriptor(r,a)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,a){return Object.setPrototypeOf(r,a)},Promise,PromisePrototypeCatch(r,a){return r.catch(a)},PromisePrototypeThen(r,a,i){return r.then(a,i)},PromiseReject(r){return Promise.reject(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,a){return r.test(a)},SafeSet:Set,String,StringPrototypeSlice(r,a,i){return r.slice(a,i)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(r,a,i){return r.set(a,i)},Uint8Array},Ea={exports:{}};(function(r){const a=$t,i=Object.getPrototypeOf(async function(){}).constructor,c=globalThis.Blob||a.Blob,y=typeof c<"u"?function(w){return w instanceof c}:function(w){return!1};class v extends Error{constructor(_){if(!Array.isArray(_))throw new TypeError(`Expected input to be an Array, got ${typeof _}`);let D="";for(let I=0;I<_.length;I++)D+=`    ${_[I].stack}
`;super(D),this.name="AggregateError",this.errors=_}}r.exports={AggregateError:v,kEmptyObject:Object.freeze({}),once(w){let _=!1;return function(...D){_||(_=!0,w.apply(this,D))}},createDeferredPromise:function(){let w,_;return{promise:new Promise((D,I)=>{w=D,_=I}),resolve:w,reject:_}},promisify(w){return new Promise((_,D)=>{w((I,...O)=>I?D(I):_(...O))})},debuglog(){return function(){}},format(w,..._){return w.replace(/%([sdifj])/g,function(...[D,I]){const O=_.shift();return I==="f"?O.toFixed(6):I==="j"?JSON.stringify(O):I==="s"&&typeof O=="object"?`${O.constructor!==Object?O.constructor.name:""} {}`.trim():O.toString()})},inspect(w){switch(typeof w){case"string":if(w.includes("'"))if(w.includes('"')){if(!w.includes("`")&&!w.includes("${"))return`\`${w}\``}else return`"${w}"`;return`'${w}'`;case"number":return isNaN(w)?"NaN":Object.is(w,-0)?String(w):w;case"bigint":return`${String(w)}n`;case"boolean":case"undefined":return String(w);case"object":return"{}"}},types:{isAsyncFunction(w){return w instanceof i},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:y},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Ea);var Ut=Ea.exports,bi={},Fr={exports:{}},Sa;function gi(){if(Sa)return Fr.exports;Sa=1;const{AbortController:r,AbortSignal:a}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Fr.exports=r,Fr.exports.AbortSignal=a,Fr.exports.default=r,Fr.exports}const{format:wc,inspect:tn,AggregateError:Ec}=Ut,Sc=globalThis.AggregateError||Ec,Cc=Symbol("kIsNodeError"),Tc=["string","function","number","object","Function","Object","boolean","bigint","symbol"],xc=/^([A-Z][a-z0-9]*)+$/,Rc="__node_internal_",rn={};function er(r,a){if(!r)throw new rn.ERR_INTERNAL_ASSERTION(a)}function Ca(r){let a="",i=r.length;const c=r[0]==="-"?1:0;for(;i>=c+4;i-=3)a=`_${r.slice(i-3,i)}${a}`;return`${r.slice(0,i)}${a}`}function kc(r,a,i){if(typeof a=="function")return er(a.length<=i.length,`Code: ${r}; The provided arguments length (${i.length}) does not match the required ones (${a.length}).`),a(...i);const c=(a.match(/%[dfijoOs]/g)||[]).length;return er(c===i.length,`Code: ${r}; The provided arguments length (${i.length}) does not match the required ones (${c}).`),i.length===0?a:wc(a,...i)}function it(r,a,i){i||(i=Error);class c extends i{constructor(...v){super(kc(r,a,v))}toString(){return`${this.name} [${r}]: ${this.message}`}}Object.defineProperties(c.prototype,{name:{value:i.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${r}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),c.prototype.code=r,c.prototype[Cc]=!0,rn[r]=c}function Ta(r){const a=Rc+r.name;return Object.defineProperty(r,"name",{value:a}),r}function Pc(r,a){if(r&&a&&r!==a){if(Array.isArray(a.errors))return a.errors.push(r),a;const i=new Sc([a,r],a.message);return i.code=a.code,i}return r||a}let Ac=class extends Error{constructor(r="The operation was aborted",a=void 0){if(a!==void 0&&typeof a!="object")throw new rn.ERR_INVALID_ARG_TYPE("options","Object",a);super(r,a),this.code="ABORT_ERR",this.name="AbortError"}};it("ERR_ASSERTION","%s",Error),it("ERR_INVALID_ARG_TYPE",(r,a,i)=>{er(typeof r=="string","'name' must be a string"),Array.isArray(a)||(a=[a]);let c="The ";r.endsWith(" argument")?c+=`${r} `:c+=`"${r}" ${r.includes(".")?"property":"argument"} `,c+="must be ";const y=[],v=[],w=[];for(const D of a)er(typeof D=="string","All expected entries have to be of type string"),Tc.includes(D)?y.push(D.toLowerCase()):xc.test(D)?v.push(D):(er(D!=="object",'The value "object" should be written as "Object"'),w.push(D));if(v.length>0){const D=y.indexOf("object");D!==-1&&(y.splice(y,D,1),v.push("Object"))}if(y.length>0){switch(y.length){case 1:c+=`of type ${y[0]}`;break;case 2:c+=`one of type ${y[0]} or ${y[1]}`;break;default:{const D=y.pop();c+=`one of type ${y.join(", ")}, or ${D}`}}(v.length>0||w.length>0)&&(c+=" or ")}if(v.length>0){switch(v.length){case 1:c+=`an instance of ${v[0]}`;break;case 2:c+=`an instance of ${v[0]} or ${v[1]}`;break;default:{const D=v.pop();c+=`an instance of ${v.join(", ")}, or ${D}`}}w.length>0&&(c+=" or ")}switch(w.length){case 0:break;case 1:w[0].toLowerCase()!==w[0]&&(c+="an "),c+=`${w[0]}`;break;case 2:c+=`one of ${w[0]} or ${w[1]}`;break;default:{const D=w.pop();c+=`one of ${w.join(", ")}, or ${D}`}}if(i==null)c+=`. Received ${i}`;else if(typeof i=="function"&&i.name)c+=`. Received function ${i.name}`;else if(typeof i=="object"){var _;if((_=i.constructor)!==null&&_!==void 0&&_.name)c+=`. Received an instance of ${i.constructor.name}`;else{const D=tn(i,{depth:-1});c+=`. Received ${D}`}}else{let D=tn(i,{colors:!1});D.length>25&&(D=`${D.slice(0,25)}...`),c+=`. Received type ${typeof i} (${D})`}return c},TypeError),it("ERR_INVALID_ARG_VALUE",(r,a,i="is invalid")=>{let c=tn(a);return c.length>128&&(c=c.slice(0,128)+"..."),`The ${r.includes(".")?"property":"argument"} '${r}' ${i}. Received ${c}`},TypeError),it("ERR_INVALID_RETURN_VALUE",(r,a,i)=>{var c;const y=i!=null&&(c=i.constructor)!==null&&c!==void 0&&c.name?`instance of ${i.constructor.name}`:`type ${typeof i}`;return`Expected ${r} to be returned from the "${a}" function but got ${y}.`},TypeError),it("ERR_MISSING_ARGS",(...r)=>{er(r.length>0,"At least one arg needs to be specified");let a;const i=r.length;switch(r=(Array.isArray(r)?r:[r]).map(c=>`"${c}"`).join(" or "),i){case 1:a+=`The ${r[0]} argument`;break;case 2:a+=`The ${r[0]} and ${r[1]} arguments`;break;default:{const c=r.pop();a+=`The ${r.join(", ")}, and ${c} arguments`}break}return`${a} must be specified`},TypeError),it("ERR_OUT_OF_RANGE",(r,a,i)=>{er(a,'Missing "range" argument');let c;return Number.isInteger(i)&&Math.abs(i)>2**32?c=Ca(String(i)):typeof i=="bigint"?(c=String(i),(i>2n**32n||i<-(2n**32n))&&(c=Ca(c)),c+="n"):c=tn(i),`The value of "${r}" is out of range. It must be ${a}. Received ${c}`},RangeError),it("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),it("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),it("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),it("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),it("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),it("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),it("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),it("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),it("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),it("ERR_STREAM_WRITE_AFTER_END","write after end",Error),it("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var ft={AbortError:Ac,aggregateTwoErrors:Ta(Pc),hideStackFrames:Ta,codes:rn};const{ArrayIsArray:yi,ArrayPrototypeIncludes:xa,ArrayPrototypeJoin:Ra,ArrayPrototypeMap:Fc,NumberIsInteger:_i,NumberIsNaN:Dc,NumberMAX_SAFE_INTEGER:Ic,NumberMIN_SAFE_INTEGER:Lc,NumberParseInt:Mc,ObjectPrototypeHasOwnProperty:jc,RegExpPrototypeExec:ka,String:Nc,StringPrototypeToUpperCase:Bc,StringPrototypeTrim:Oc}=tt,{hideStackFrames:yt,codes:{ERR_SOCKET_BAD_PORT:Uc,ERR_INVALID_ARG_TYPE:ut,ERR_INVALID_ARG_VALUE:pr,ERR_OUT_OF_RANGE:tr,ERR_UNKNOWN_SIGNAL:Pa}}=ft,{normalizeEncoding:Wc}=Ut,{isAsyncFunction:zc,isArrayBufferView:Vc}=Ut.types,Aa={};function Gc(r){return r===(r|0)}function Kc(r){return r===r>>>0}const Xc=/^[0-7]+$/,$c="must be a 32-bit unsigned integer or an octal string";function Yc(r,a,i){if(typeof r>"u"&&(r=i),typeof r=="string"){if(ka(Xc,r)===null)throw new pr(a,r,$c);r=Mc(r,8)}return Fa(r,a),r}const Zc=yt((r,a,i=Lc,c=Ic)=>{if(typeof r!="number")throw new ut(a,"number",r);if(!_i(r))throw new tr(a,"an integer",r);if(r<i||r>c)throw new tr(a,`>= ${i} && <= ${c}`,r)}),Hc=yt((r,a,i=-2147483648,c=2147483647)=>{if(typeof r!="number")throw new ut(a,"number",r);if(!_i(r))throw new tr(a,"an integer",r);if(r<i||r>c)throw new tr(a,`>= ${i} && <= ${c}`,r)}),Fa=yt((r,a,i=!1)=>{if(typeof r!="number")throw new ut(a,"number",r);if(!_i(r))throw new tr(a,"an integer",r);const c=i?1:0,y=4294967295;if(r<c||r>y)throw new tr(a,`>= ${c} && <= ${y}`,r)});function vi(r,a){if(typeof r!="string")throw new ut(a,"string",r)}function Jc(r,a,i=void 0,c){if(typeof r!="number")throw new ut(a,"number",r);if(i!=null&&r<i||c!=null&&r>c||(i!=null||c!=null)&&Dc(r))throw new tr(a,`${i!=null?`>= ${i}`:""}${i!=null&&c!=null?" && ":""}${c!=null?`<= ${c}`:""}`,r)}const Qc=yt((r,a,i)=>{if(!xa(i,r)){const c="must be one of: "+Ra(Fc(i,y=>typeof y=="string"?`'${y}'`:Nc(y)),", ");throw new pr(a,r,c)}});function Da(r,a){if(typeof r!="boolean")throw new ut(a,"boolean",r)}function wi(r,a,i){return r==null||!jc(r,a)?i:r[a]}const qc=yt((r,a,i=null)=>{const c=wi(i,"allowArray",!1),y=wi(i,"allowFunction",!1);if(!wi(i,"nullable",!1)&&r===null||!c&&yi(r)||typeof r!="object"&&(!y||typeof r!="function"))throw new ut(a,"Object",r)}),ef=yt((r,a)=>{if(r!=null&&typeof r!="object"&&typeof r!="function")throw new ut(a,"a dictionary",r)}),Ei=yt((r,a,i=0)=>{if(!yi(r))throw new ut(a,"Array",r);if(r.length<i){const c=`must be longer than ${i}`;throw new pr(a,r,c)}});function tf(r,a){Ei(r,a);for(let i=0;i<r.length;i++)vi(r[i],`${a}[${i}]`)}function rf(r,a){Ei(r,a);for(let i=0;i<r.length;i++)Da(r[i],`${a}[${i}]`)}function nf(r,a="signal"){if(vi(r,a),Aa[r]===void 0)throw Aa[Bc(r)]!==void 0?new Pa(r+" (signals must use all capital letters)"):new Pa(r)}const of=yt((r,a="buffer")=>{if(!Vc(r))throw new ut(a,["Buffer","TypedArray","DataView"],r)});function af(r,a){const i=Wc(a),c=r.length;if(i==="hex"&&c%2!==0)throw new pr("encoding",a,`is invalid for data of length ${c}`)}function sf(r,a="Port",i=!0){if(typeof r!="number"&&typeof r!="string"||typeof r=="string"&&Oc(r).length===0||+r!==+r>>>0||r>65535||r===0&&!i)throw new Uc(a,r,i);return r|0}const lf=yt((r,a)=>{if(r!==void 0&&(r===null||typeof r!="object"||!("aborted"in r)))throw new ut(a,"AbortSignal",r)}),uf=yt((r,a)=>{if(typeof r!="function")throw new ut(a,"Function",r)}),cf=yt((r,a)=>{if(typeof r!="function"||zc(r))throw new ut(a,"Function",r)}),ff=yt((r,a)=>{if(r!==void 0)throw new ut(a,"undefined",r)});function df(r,a,i){if(!xa(i,r))throw new ut(a,`('${Ra(i,"|")}')`,r)}const hf=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Ia(r,a){if(typeof r>"u"||!ka(hf,r))throw new pr(a,r,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function pf(r){if(typeof r=="string")return Ia(r,"hints"),r;if(yi(r)){const a=r.length;let i="";if(a===0)return i;for(let c=0;c<a;c++){const y=r[c];Ia(y,"hints"),i+=y,c!==a-1&&(i+=", ")}return i}throw new pr("hints",r,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var nn={isInt32:Gc,isUint32:Kc,parseFileMode:Yc,validateArray:Ei,validateStringArray:tf,validateBooleanArray:rf,validateBoolean:Da,validateBuffer:of,validateDictionary:ef,validateEncoding:af,validateFunction:uf,validateInt32:Hc,validateInteger:Zc,validateNumber:Jc,validateObject:qc,validateOneOf:Qc,validatePlainFunction:cf,validatePort:sf,validateSignalName:nf,validateString:vi,validateUint32:Fa,validateUndefined:ff,validateUnion:df,validateAbortSignal:lf,validateLinkHeaderValue:pf},Si={exports:{}},La={exports:{}},qe=La.exports={},At,Ft;function Ci(){throw new Error("setTimeout has not been defined")}function Ti(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?At=setTimeout:At=Ci}catch{At=Ci}try{typeof clearTimeout=="function"?Ft=clearTimeout:Ft=Ti}catch{Ft=Ti}})();function Ma(r){if(At===setTimeout)return setTimeout(r,0);if((At===Ci||!At)&&setTimeout)return At=setTimeout,setTimeout(r,0);try{return At(r,0)}catch{try{return At.call(null,r,0)}catch{return At.call(this,r,0)}}}function mf(r){if(Ft===clearTimeout)return clearTimeout(r);if((Ft===Ti||!Ft)&&clearTimeout)return Ft=clearTimeout,clearTimeout(r);try{return Ft(r)}catch{try{return Ft.call(null,r)}catch{return Ft.call(this,r)}}}var Wt=[],mr=!1,rr,on=-1;function bf(){!mr||!rr||(mr=!1,rr.length?Wt=rr.concat(Wt):on=-1,Wt.length&&ja())}function ja(){if(!mr){var r=Ma(bf);mr=!0;for(var a=Wt.length;a;){for(rr=Wt,Wt=[];++on<a;)rr&&rr[on].run();on=-1,a=Wt.length}rr=null,mr=!1,mf(r)}}qe.nextTick=function(r){var a=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)a[i-1]=arguments[i];Wt.push(new Na(r,a)),Wt.length===1&&!mr&&Ma(ja)};function Na(r,a){this.fun=r,this.array=a}Na.prototype.run=function(){this.fun.apply(null,this.array)},qe.title="browser",qe.browser=!0,qe.env={},qe.argv=[],qe.version="",qe.versions={};function zt(){}qe.on=zt,qe.addListener=zt,qe.once=zt,qe.off=zt,qe.removeListener=zt,qe.removeAllListeners=zt,qe.emit=zt,qe.prependListener=zt,qe.prependOnceListener=zt,qe.listeners=function(r){return[]},qe.binding=function(r){throw new Error("process.binding is not supported")},qe.cwd=function(){return"/"},qe.chdir=function(r){throw new Error("process.chdir is not supported")},qe.umask=function(){return 0};var nr=La.exports;const{Symbol:an,SymbolAsyncIterator:Ba,SymbolIterator:Oa,SymbolFor:Ua}=tt,Wa=an("kDestroyed"),za=an("kIsErrored"),xi=an("kIsReadable"),Va=an("kIsDisturbed"),gf=Ua("nodejs.webstream.isClosedPromise"),yf=Ua("nodejs.webstream.controllerErrorFunction");function sn(r,a=!1){var i;return!!(r&&typeof r.pipe=="function"&&typeof r.on=="function"&&(!a||typeof r.pause=="function"&&typeof r.resume=="function")&&(!r._writableState||((i=r._readableState)===null||i===void 0?void 0:i.readable)!==!1)&&(!r._writableState||r._readableState))}function ln(r){var a;return!!(r&&typeof r.write=="function"&&typeof r.on=="function"&&(!r._readableState||((a=r._writableState)===null||a===void 0?void 0:a.writable)!==!1))}function _f(r){return!!(r&&typeof r.pipe=="function"&&r._readableState&&typeof r.on=="function"&&typeof r.write=="function")}function Dt(r){return r&&(r._readableState||r._writableState||typeof r.write=="function"&&typeof r.on=="function"||typeof r.pipe=="function"&&typeof r.on=="function")}function Ga(r){return!!(r&&!Dt(r)&&typeof r.pipeThrough=="function"&&typeof r.getReader=="function"&&typeof r.cancel=="function")}function Ka(r){return!!(r&&!Dt(r)&&typeof r.getWriter=="function"&&typeof r.abort=="function")}function Xa(r){return!!(r&&!Dt(r)&&typeof r.readable=="object"&&typeof r.writable=="object")}function vf(r){return Ga(r)||Ka(r)||Xa(r)}function wf(r,a){return r==null?!1:a===!0?typeof r[Ba]=="function":a===!1?typeof r[Oa]=="function":typeof r[Ba]=="function"||typeof r[Oa]=="function"}function un(r){if(!Dt(r))return null;const a=r._writableState,i=r._readableState,c=a||i;return!!(r.destroyed||r[Wa]||c!=null&&c.destroyed)}function $a(r){if(!ln(r))return null;if(r.writableEnded===!0)return!0;const a=r._writableState;return a!=null&&a.errored?!1:typeof a?.ended!="boolean"?null:a.ended}function Ef(r,a){if(!ln(r))return null;if(r.writableFinished===!0)return!0;const i=r._writableState;return i!=null&&i.errored?!1:typeof i?.finished!="boolean"?null:!!(i.finished||a===!1&&i.ended===!0&&i.length===0)}function Sf(r){if(!sn(r))return null;if(r.readableEnded===!0)return!0;const a=r._readableState;return!a||a.errored?!1:typeof a?.ended!="boolean"?null:a.ended}function Ya(r,a){if(!sn(r))return null;const i=r._readableState;return i!=null&&i.errored?!1:typeof i?.endEmitted!="boolean"?null:!!(i.endEmitted||a===!1&&i.ended===!0&&i.length===0)}function Za(r){return r&&r[xi]!=null?r[xi]:typeof r?.readable!="boolean"?null:un(r)?!1:sn(r)&&r.readable&&!Ya(r)}function Ha(r){return typeof r?.writable!="boolean"?null:un(r)?!1:ln(r)&&r.writable&&!$a(r)}function Cf(r,a){return Dt(r)?un(r)?!0:!(a?.readable!==!1&&Za(r)||a?.writable!==!1&&Ha(r)):null}function Tf(r){var a,i;return Dt(r)?r.writableErrored?r.writableErrored:(a=(i=r._writableState)===null||i===void 0?void 0:i.errored)!==null&&a!==void 0?a:null:null}function xf(r){var a,i;return Dt(r)?r.readableErrored?r.readableErrored:(a=(i=r._readableState)===null||i===void 0?void 0:i.errored)!==null&&a!==void 0?a:null:null}function Rf(r){if(!Dt(r))return null;if(typeof r.closed=="boolean")return r.closed;const a=r._writableState,i=r._readableState;return typeof a?.closed=="boolean"||typeof i?.closed=="boolean"?a?.closed||i?.closed:typeof r._closed=="boolean"&&Ja(r)?r._closed:null}function Ja(r){return typeof r._closed=="boolean"&&typeof r._defaultKeepAlive=="boolean"&&typeof r._removedConnection=="boolean"&&typeof r._removedContLen=="boolean"}function Qa(r){return typeof r._sent100=="boolean"&&Ja(r)}function kf(r){var a;return typeof r._consuming=="boolean"&&typeof r._dumped=="boolean"&&((a=r.req)===null||a===void 0?void 0:a.upgradeOrConnect)===void 0}function Pf(r){if(!Dt(r))return null;const a=r._writableState,i=r._readableState,c=a||i;return!c&&Qa(r)||!!(c&&c.autoDestroy&&c.emitClose&&c.closed===!1)}function Af(r){var a;return!!(r&&((a=r[Va])!==null&&a!==void 0?a:r.readableDidRead||r.readableAborted))}function Ff(r){var a,i,c,y,v,w,_,D,I,O;return!!(r&&((a=(i=(c=(y=(v=(w=r[za])!==null&&w!==void 0?w:r.readableErrored)!==null&&v!==void 0?v:r.writableErrored)!==null&&y!==void 0?y:(_=r._readableState)===null||_===void 0?void 0:_.errorEmitted)!==null&&c!==void 0?c:(D=r._writableState)===null||D===void 0?void 0:D.errorEmitted)!==null&&i!==void 0?i:(I=r._readableState)===null||I===void 0?void 0:I.errored)!==null&&a!==void 0?a:!((O=r._writableState)===null||O===void 0)&&O.errored))}var Vt={kDestroyed:Wa,isDisturbed:Af,kIsDisturbed:Va,isErrored:Ff,kIsErrored:za,isReadable:Za,kIsReadable:xi,kIsClosedPromise:gf,kControllerErrorFunction:yf,isClosed:Rf,isDestroyed:un,isDuplexNodeStream:_f,isFinished:Cf,isIterable:wf,isReadableNodeStream:sn,isReadableStream:Ga,isReadableEnded:Sf,isReadableFinished:Ya,isReadableErrored:xf,isNodeStream:Dt,isWebStream:vf,isWritable:Ha,isWritableNodeStream:ln,isWritableStream:Ka,isWritableEnded:$a,isWritableFinished:Ef,isWritableErrored:Tf,isServerRequest:kf,isServerResponse:Qa,willEmitClose:Pf,isTransformStream:Xa};const br=nr,{AbortError:qa,codes:Df}=ft,{ERR_INVALID_ARG_TYPE:If,ERR_STREAM_PREMATURE_CLOSE:es}=Df,{kEmptyObject:Ri,once:ki}=Ut,{validateAbortSignal:Lf,validateFunction:Mf,validateObject:jf,validateBoolean:Nf}=nn,{Promise:Bf,PromisePrototypeThen:Of}=tt,{isClosed:Uf,isReadable:ts,isReadableNodeStream:Pi,isReadableStream:Wf,isReadableFinished:rs,isReadableErrored:ns,isWritable:is,isWritableNodeStream:os,isWritableStream:zf,isWritableFinished:as,isWritableErrored:ss,isNodeStream:Vf,willEmitClose:Gf,kIsClosedPromise:Kf}=Vt;function Xf(r){return r.setHeader&&typeof r.abort=="function"}const Ai=()=>{};function ls(r,a,i){var c,y;if(arguments.length===2?(i=a,a=Ri):a==null?a=Ri:jf(a,"options"),Mf(i,"callback"),Lf(a.signal,"options.signal"),i=ki(i),Wf(r)||zf(r))return $f(r,a,i);if(!Vf(r))throw new If("stream",["ReadableStream","WritableStream","Stream"],r);const v=(c=a.readable)!==null&&c!==void 0?c:Pi(r),w=(y=a.writable)!==null&&y!==void 0?y:os(r),_=r._writableState,D=r._readableState,I=()=>{r.writable||$()};let O=Gf(r)&&Pi(r)===v&&os(r)===w,ee=as(r,!1);const $=()=>{ee=!0,r.destroyed&&(O=!1),!(O&&(!r.readable||v))&&(!v||re)&&i.call(r)};let re=rs(r,!1);const X=()=>{re=!0,r.destroyed&&(O=!1),!(O&&(!r.writable||w))&&(!w||ee)&&i.call(r)},we=ye=>{i.call(r,ye)};let me=Uf(r);const be=()=>{me=!0;const ye=ss(r)||ns(r);if(ye&&typeof ye!="boolean")return i.call(r,ye);if(v&&!re&&Pi(r,!0)&&!rs(r,!1))return i.call(r,new es);if(w&&!ee&&!as(r,!1))return i.call(r,new es);i.call(r)},Q=()=>{me=!0;const ye=ss(r)||ns(r);if(ye&&typeof ye!="boolean")return i.call(r,ye);i.call(r)},Fe=()=>{r.req.on("finish",$)};Xf(r)?(r.on("complete",$),O||r.on("abort",be),r.req?Fe():r.on("request",Fe)):w&&!_&&(r.on("end",I),r.on("close",I)),!O&&typeof r.aborted=="boolean"&&r.on("aborted",be),r.on("end",X),r.on("finish",$),a.error!==!1&&r.on("error",we),r.on("close",be),me?br.nextTick(be):_!=null&&_.errorEmitted||D!=null&&D.errorEmitted?O||br.nextTick(Q):(!v&&(!O||ts(r))&&(ee||is(r)===!1)||!w&&(!O||is(r))&&(re||ts(r)===!1)||D&&r.req&&r.aborted)&&br.nextTick(Q);const Xe=()=>{i=Ai,r.removeListener("aborted",be),r.removeListener("complete",$),r.removeListener("abort",be),r.removeListener("request",Fe),r.req&&r.req.removeListener("finish",$),r.removeListener("end",I),r.removeListener("close",I),r.removeListener("finish",$),r.removeListener("end",X),r.removeListener("error",we),r.removeListener("close",be)};if(a.signal&&!me){const ye=()=>{const Ne=i;Xe(),Ne.call(r,new qa(void 0,{cause:a.signal.reason}))};if(a.signal.aborted)br.nextTick(ye);else{const Ne=i;i=ki((...Be)=>{a.signal.removeEventListener("abort",ye),Ne.apply(r,Be)}),a.signal.addEventListener("abort",ye)}}return Xe}function $f(r,a,i){let c=!1,y=Ai;if(a.signal)if(y=()=>{c=!0,i.call(r,new qa(void 0,{cause:a.signal.reason}))},a.signal.aborted)br.nextTick(y);else{const w=i;i=ki((..._)=>{a.signal.removeEventListener("abort",y),w.apply(r,_)}),a.signal.addEventListener("abort",y)}const v=(...w)=>{c||br.nextTick(()=>i.apply(r,w))};return Of(r[Kf].promise,v,v),Ai}function Yf(r,a){var i;let c=!1;return a===null&&(a=Ri),(i=a)!==null&&i!==void 0&&i.cleanup&&(Nf(a.cleanup,"cleanup"),c=a.cleanup),new Bf((y,v)=>{const w=ls(r,a,_=>{c&&w(),_?v(_):y()})})}Si.exports=ls,Si.exports.finished=Yf;var Yt=Si.exports;const It=nr,{aggregateTwoErrors:Zf,codes:{ERR_MULTIPLE_CALLBACK:Hf},AbortError:Jf}=ft,{Symbol:us}=tt,{kDestroyed:Qf,isDestroyed:qf,isFinished:ed,isServerRequest:td}=Vt,cs=us("kDestroy"),Fi=us("kConstruct");function fs(r,a,i){r&&(a&&!a.errored&&(a.errored=r),i&&!i.errored&&(i.errored=r))}function rd(r,a){const i=this._readableState,c=this._writableState,y=c||i;return c!=null&&c.destroyed||i!=null&&i.destroyed?(typeof a=="function"&&a(),this):(fs(r,c,i),c&&(c.destroyed=!0),i&&(i.destroyed=!0),y.constructed?ds(this,r,a):this.once(cs,function(v){ds(this,Zf(v,r),a)}),this)}function ds(r,a,i){let c=!1;function y(v){if(c)return;c=!0;const w=r._readableState,_=r._writableState;fs(v,_,w),_&&(_.closed=!0),w&&(w.closed=!0),typeof i=="function"&&i(v),v?It.nextTick(nd,r,v):It.nextTick(hs,r)}try{r._destroy(a||null,y)}catch(v){y(v)}}function nd(r,a){Di(r,a),hs(r)}function hs(r){const a=r._readableState,i=r._writableState;i&&(i.closeEmitted=!0),a&&(a.closeEmitted=!0),(i!=null&&i.emitClose||a!=null&&a.emitClose)&&r.emit("close")}function Di(r,a){const i=r._readableState,c=r._writableState;c!=null&&c.errorEmitted||i!=null&&i.errorEmitted||(c&&(c.errorEmitted=!0),i&&(i.errorEmitted=!0),r.emit("error",a))}function id(){const r=this._readableState,a=this._writableState;r&&(r.constructed=!0,r.closed=!1,r.closeEmitted=!1,r.destroyed=!1,r.errored=null,r.errorEmitted=!1,r.reading=!1,r.ended=r.readable===!1,r.endEmitted=r.readable===!1),a&&(a.constructed=!0,a.destroyed=!1,a.closed=!1,a.closeEmitted=!1,a.errored=null,a.errorEmitted=!1,a.finalCalled=!1,a.prefinished=!1,a.ended=a.writable===!1,a.ending=a.writable===!1,a.finished=a.writable===!1)}function Ii(r,a,i){const c=r._readableState,y=r._writableState;if(y!=null&&y.destroyed||c!=null&&c.destroyed)return this;c!=null&&c.autoDestroy||y!=null&&y.autoDestroy?r.destroy(a):a&&(y&&!y.errored&&(y.errored=a),c&&!c.errored&&(c.errored=a),i?It.nextTick(Di,r,a):Di(r,a))}function od(r,a){if(typeof r._construct!="function")return;const i=r._readableState,c=r._writableState;i&&(i.constructed=!1),c&&(c.constructed=!1),r.once(Fi,a),!(r.listenerCount(Fi)>1)&&It.nextTick(ad,r)}function ad(r){let a=!1;function i(c){if(a){Ii(r,c??new Hf);return}a=!0;const y=r._readableState,v=r._writableState,w=v||y;y&&(y.constructed=!0),v&&(v.constructed=!0),w.destroyed?r.emit(cs,c):c?Ii(r,c,!0):It.nextTick(sd,r)}try{r._construct(c=>{It.nextTick(i,c)})}catch(c){It.nextTick(i,c)}}function sd(r){r.emit(Fi)}function ps(r){return r?.setHeader&&typeof r.abort=="function"}function ms(r){r.emit("close")}function ld(r,a){r.emit("error",a),It.nextTick(ms,r)}function ud(r,a){!r||qf(r)||(!a&&!ed(r)&&(a=new Jf),td(r)?(r.socket=null,r.destroy(a)):ps(r)?r.abort():ps(r.req)?r.req.abort():typeof r.destroy=="function"?r.destroy(a):typeof r.close=="function"?r.close():a?It.nextTick(ld,r,a):It.nextTick(ms,r),r.destroyed||(r[Qf]=!0))}var gr={construct:od,destroyer:ud,destroy:rd,undestroy:id,errorOrDestroy:Ii},Li={exports:{}},yr=typeof Reflect=="object"?Reflect:null,bs=yr&&typeof yr.apply=="function"?yr.apply:function(r,a,i){return Function.prototype.apply.call(r,a,i)},cn;yr&&typeof yr.ownKeys=="function"?cn=yr.ownKeys:Object.getOwnPropertySymbols?cn=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:cn=function(r){return Object.getOwnPropertyNames(r)};function cd(r){console&&console.warn&&console.warn(r)}var gs=Number.isNaN||function(r){return r!==r};function Ge(){Ge.init.call(this)}Li.exports=Ge,Li.exports.once=pd,Ge.EventEmitter=Ge,Ge.prototype._events=void 0,Ge.prototype._eventsCount=0,Ge.prototype._maxListeners=void 0;var ys=10;function fn(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Ge,"defaultMaxListeners",{enumerable:!0,get:function(){return ys},set:function(r){if(typeof r!="number"||r<0||gs(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");ys=r}}),Ge.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ge.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||gs(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function _s(r){return r._maxListeners===void 0?Ge.defaultMaxListeners:r._maxListeners}Ge.prototype.getMaxListeners=function(){return _s(this)},Ge.prototype.emit=function(r){for(var a=[],i=1;i<arguments.length;i++)a.push(arguments[i]);var c=r==="error",y=this._events;if(y!==void 0)c=c&&y.error===void 0;else if(!c)return!1;if(c){var v;if(a.length>0&&(v=a[0]),v instanceof Error)throw v;var w=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw w.context=v,w}var _=y[r];if(_===void 0)return!1;if(typeof _=="function")bs(_,this,a);else for(var D=_.length,I=Cs(_,D),i=0;i<D;++i)bs(I[i],this,a);return!0};function vs(r,a,i,c){var y,v,w;if(fn(i),v=r._events,v===void 0?(v=r._events=Object.create(null),r._eventsCount=0):(v.newListener!==void 0&&(r.emit("newListener",a,i.listener?i.listener:i),v=r._events),w=v[a]),w===void 0)w=v[a]=i,++r._eventsCount;else if(typeof w=="function"?w=v[a]=c?[i,w]:[w,i]:c?w.unshift(i):w.push(i),y=_s(r),y>0&&w.length>y&&!w.warned){w.warned=!0;var _=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(a)+" listeners added. Use emitter.setMaxListeners() to increase limit");_.name="MaxListenersExceededWarning",_.emitter=r,_.type=a,_.count=w.length,cd(_)}return r}Ge.prototype.addListener=function(r,a){return vs(this,r,a,!1)},Ge.prototype.on=Ge.prototype.addListener,Ge.prototype.prependListener=function(r,a){return vs(this,r,a,!0)};function fd(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ws(r,a,i){var c={fired:!1,wrapFn:void 0,target:r,type:a,listener:i},y=fd.bind(c);return y.listener=i,c.wrapFn=y,y}Ge.prototype.once=function(r,a){return fn(a),this.on(r,ws(this,r,a)),this},Ge.prototype.prependOnceListener=function(r,a){return fn(a),this.prependListener(r,ws(this,r,a)),this},Ge.prototype.removeListener=function(r,a){var i,c,y,v,w;if(fn(a),c=this._events,c===void 0)return this;if(i=c[r],i===void 0)return this;if(i===a||i.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete c[r],c.removeListener&&this.emit("removeListener",r,i.listener||a));else if(typeof i!="function"){for(y=-1,v=i.length-1;v>=0;v--)if(i[v]===a||i[v].listener===a){w=i[v].listener,y=v;break}if(y<0)return this;y===0?i.shift():dd(i,y),i.length===1&&(c[r]=i[0]),c.removeListener!==void 0&&this.emit("removeListener",r,w||a)}return this},Ge.prototype.off=Ge.prototype.removeListener,Ge.prototype.removeAllListeners=function(r){var a,i,c;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[r]),this;if(arguments.length===0){var y=Object.keys(i),v;for(c=0;c<y.length;++c)v=y[c],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=i[r],typeof a=="function")this.removeListener(r,a);else if(a!==void 0)for(c=a.length-1;c>=0;c--)this.removeListener(r,a[c]);return this};function Es(r,a,i){var c=r._events;if(c===void 0)return[];var y=c[a];return y===void 0?[]:typeof y=="function"?i?[y.listener||y]:[y]:i?hd(y):Cs(y,y.length)}Ge.prototype.listeners=function(r){return Es(this,r,!0)},Ge.prototype.rawListeners=function(r){return Es(this,r,!1)},Ge.listenerCount=function(r,a){return typeof r.listenerCount=="function"?r.listenerCount(a):Ss.call(r,a)},Ge.prototype.listenerCount=Ss;function Ss(r){var a=this._events;if(a!==void 0){var i=a[r];if(typeof i=="function")return 1;if(i!==void 0)return i.length}return 0}Ge.prototype.eventNames=function(){return this._eventsCount>0?cn(this._events):[]};function Cs(r,a){for(var i=new Array(a),c=0;c<a;++c)i[c]=r[c];return i}function dd(r,a){for(;a+1<r.length;a++)r[a]=r[a+1];r.pop()}function hd(r){for(var a=new Array(r.length),i=0;i<a.length;++i)a[i]=r[i].listener||r[i];return a}function pd(r,a){return new Promise(function(i,c){function y(w){r.removeListener(a,v),c(w)}function v(){typeof r.removeListener=="function"&&r.removeListener("error",y),i([].slice.call(arguments))}Ts(r,a,v,{once:!0}),a!=="error"&&md(r,y,{once:!0})})}function md(r,a,i){typeof r.on=="function"&&Ts(r,"error",a,i)}function Ts(r,a,i,c){if(typeof r.on=="function")c.once?r.once(a,i):r.on(a,i);else if(typeof r.addEventListener=="function")r.addEventListener(a,function y(v){c.once&&r.removeEventListener(a,y),i(v)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Mi=Li.exports;const{ArrayIsArray:bd,ObjectSetPrototypeOf:xs}=tt,{EventEmitter:dn}=Mi;function hn(r){dn.call(this,r)}xs(hn.prototype,dn.prototype),xs(hn,dn),hn.prototype.pipe=function(r,a){const i=this;function c(O){r.writable&&r.write(O)===!1&&i.pause&&i.pause()}i.on("data",c);function y(){i.readable&&i.resume&&i.resume()}r.on("drain",y),!r._isStdio&&(!a||a.end!==!1)&&(i.on("end",w),i.on("close",_));let v=!1;function w(){v||(v=!0,r.end())}function _(){v||(v=!0,typeof r.destroy=="function"&&r.destroy())}function D(O){I(),dn.listenerCount(this,"error")===0&&this.emit("error",O)}ji(i,"error",D),ji(r,"error",D);function I(){i.removeListener("data",c),r.removeListener("drain",y),i.removeListener("end",w),i.removeListener("close",_),i.removeListener("error",D),r.removeListener("error",D),i.removeListener("end",I),i.removeListener("close",I),r.removeListener("close",I)}return i.on("end",I),i.on("close",I),r.on("close",I),r.emit("pipe",i),r};function ji(r,a,i){if(typeof r.prependListener=="function")return r.prependListener(a,i);!r._events||!r._events[a]?r.on(a,i):bd(r._events[a])?r._events[a].unshift(i):r._events[a]=[i,r._events[a]]}var Ni={Stream:hn,prependListener:ji},Rs={exports:{}};(function(r){const{AbortError:a,codes:i}=ft,{isNodeStream:c,isWebStream:y,kControllerErrorFunction:v}=Vt,w=Yt,{ERR_INVALID_ARG_TYPE:_}=i,D=(I,O)=>{if(typeof I!="object"||!("aborted"in I))throw new _(O,"AbortSignal",I)};r.exports.addAbortSignal=function(I,O){if(D(I,"signal"),!c(O)&&!y(O))throw new _("stream",["ReadableStream","WritableStream","Stream"],O);return r.exports.addAbortSignalNoValidate(I,O)},r.exports.addAbortSignalNoValidate=function(I,O){if(typeof I!="object"||!("aborted"in I))return O;const ee=c(O)?()=>{O.destroy(new a(void 0,{cause:I.reason}))}:()=>{O[v](new a(void 0,{cause:I.reason}))};return I.aborted?ee():(I.addEventListener("abort",ee),w(O,()=>I.removeEventListener("abort",ee))),O}})(Rs);var pn=Rs.exports;const{StringPrototypeSlice:ks,SymbolIterator:gd,TypedArrayPrototypeSet:mn,Uint8Array:yd}=tt,{Buffer:Bi}=$t,{inspect:_d}=Ut;var vd=class{constructor(){this.head=null,this.tail=null,this.length=0}push(r){const a={data:r,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length}unshift(r){const a={data:r,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length}shift(){if(this.length===0)return;const r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}clear(){this.head=this.tail=null,this.length=0}join(r){if(this.length===0)return"";let a=this.head,i=""+a.data;for(;(a=a.next)!==null;)i+=r+a.data;return i}concat(r){if(this.length===0)return Bi.alloc(0);const a=Bi.allocUnsafe(r>>>0);let i=this.head,c=0;for(;i;)mn(a,i.data,c),c+=i.data.length,i=i.next;return a}consume(r,a){const i=this.head.data;if(r<i.length){const c=i.slice(0,r);return this.head.data=i.slice(r),c}return r===i.length?this.shift():a?this._getString(r):this._getBuffer(r)}first(){return this.head.data}*[gd](){for(let r=this.head;r;r=r.next)yield r.data}_getString(r){let a="",i=this.head,c=0;do{const y=i.data;if(r>y.length)a+=y,r-=y.length;else{r===y.length?(a+=y,++c,i.next?this.head=i.next:this.head=this.tail=null):(a+=ks(y,0,r),this.head=i,i.data=ks(y,r));break}++c}while((i=i.next)!==null);return this.length-=c,a}_getBuffer(r){const a=Bi.allocUnsafe(r),i=r;let c=this.head,y=0;do{const v=c.data;if(r>v.length)mn(a,v,i-r),r-=v.length;else{r===v.length?(mn(a,v,i-r),++y,c.next?this.head=c.next:this.head=this.tail=null):(mn(a,new yd(v.buffer,v.byteOffset,r),i-r),this.head=c,c.data=v.slice(r));break}++y}while((c=c.next)!==null);return this.length-=y,a}[Symbol.for("nodejs.util.inspect.custom")](r,a){return _d(this,{...a,depth:0,customInspect:!1})}};const{MathFloor:wd,NumberIsInteger:Ed}=tt,{ERR_INVALID_ARG_VALUE:Sd}=ft.codes;function Cd(r,a,i){return r.highWaterMark!=null?r.highWaterMark:a?r[i]:null}function Ps(r){return r?16:16*1024}function Td(r,a,i,c){const y=Cd(a,c,i);if(y!=null){if(!Ed(y)||y<0){const v=c?`options.${i}`:"options.highWaterMark";throw new Sd(v,y)}return wd(y)}return Ps(r.objectMode)}var Oi={getHighWaterMark:Td,getDefaultHighWaterMark:Ps},As={},Ui={exports:{}},Fs={};(function(r){var a=Ar,i=en,c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=_,r.SlowBuffer=Q,r.INSPECT_MAX_BYTES=50;var y=2147483647;r.kMaxLength=y,_.TYPED_ARRAY_SUPPORT=v(),!_.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v(){try{var u=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(u,h),u.foo()===42}catch{return!1}}Object.defineProperty(_.prototype,"parent",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.buffer}}),Object.defineProperty(_.prototype,"offset",{enumerable:!0,get:function(){if(_.isBuffer(this))return this.byteOffset}});function w(u){if(u>y)throw new RangeError('The value "'+u+'" is invalid for option "size"');var h=new Uint8Array(u);return Object.setPrototypeOf(h,_.prototype),h}function _(u,h,S){if(typeof u=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ee(u)}return D(u,h,S)}_.poolSize=8192;function D(u,h,S){if(typeof u=="string")return $(u,h);if(ArrayBuffer.isView(u))return X(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(F(u,ArrayBuffer)||u&&F(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(u,SharedArrayBuffer)||u&&F(u.buffer,SharedArrayBuffer)))return we(u,h,S);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var P=u.valueOf&&u.valueOf();if(P!=null&&P!==u)return _.from(P,h,S);var U=me(u);if(U)return U;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return _.from(u[Symbol.toPrimitive]("string"),h,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}_.from=function(u,h,S){return D(u,h,S)},Object.setPrototypeOf(_.prototype,Uint8Array.prototype),Object.setPrototypeOf(_,Uint8Array);function I(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}function O(u,h,S){return I(u),u<=0?w(u):h!==void 0?typeof S=="string"?w(u).fill(h,S):w(u).fill(h):w(u)}_.alloc=function(u,h,S){return O(u,h,S)};function ee(u){return I(u),w(u<0?0:be(u)|0)}_.allocUnsafe=function(u){return ee(u)},_.allocUnsafeSlow=function(u){return ee(u)};function $(u,h){if((typeof h!="string"||h==="")&&(h="utf8"),!_.isEncoding(h))throw new TypeError("Unknown encoding: "+h);var S=Fe(u,h)|0,P=w(S),U=P.write(u,h);return U!==S&&(P=P.slice(0,U)),P}function re(u){for(var h=u.length<0?0:be(u.length)|0,S=w(h),P=0;P<h;P+=1)S[P]=u[P]&255;return S}function X(u){if(F(u,Uint8Array)){var h=new Uint8Array(u);return we(h.buffer,h.byteOffset,h.byteLength)}return re(u)}function we(u,h,S){if(h<0||u.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<h+(S||0))throw new RangeError('"length" is outside of buffer bounds');var P;return h===void 0&&S===void 0?P=new Uint8Array(u):S===void 0?P=new Uint8Array(u,h):P=new Uint8Array(u,h,S),Object.setPrototypeOf(P,_.prototype),P}function me(u){if(_.isBuffer(u)){var h=be(u.length)|0,S=w(h);return S.length===0||u.copy(S,0,0,h),S}if(u.length!==void 0)return typeof u.length!="number"||N(u.length)?w(0):re(u);if(u.type==="Buffer"&&Array.isArray(u.data))return re(u.data)}function be(u){if(u>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return u|0}function Q(u){return+u!=u&&(u=0),_.alloc(+u)}_.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==_.prototype},_.compare=function(u,h){if(F(u,Uint8Array)&&(u=_.from(u,u.offset,u.byteLength)),F(h,Uint8Array)&&(h=_.from(h,h.offset,h.byteLength)),!_.isBuffer(u)||!_.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===h)return 0;for(var S=u.length,P=h.length,U=0,Y=Math.min(S,P);U<Y;++U)if(u[U]!==h[U]){S=u[U],P=h[U];break}return S<P?-1:P<S?1:0},_.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},_.concat=function(u,h){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return _.alloc(0);var S;if(h===void 0)for(h=0,S=0;S<u.length;++S)h+=u[S].length;var P=_.allocUnsafe(h),U=0;for(S=0;S<u.length;++S){var Y=u[S];if(F(Y,Uint8Array))U+Y.length>P.length?_.from(Y).copy(P,U):Uint8Array.prototype.set.call(P,Y,U);else if(_.isBuffer(Y))Y.copy(P,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=Y.length}return P};function Fe(u,h){if(_.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||F(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);var S=u.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&S===0)return 0;for(var U=!1;;)switch(h){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return rt(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return _t(u).length;default:if(U)return P?-1:rt(u).length;h=(""+h).toLowerCase(),U=!0}}_.byteLength=Fe;function Xe(u,h,S){var P=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,h>>>=0,S<=h))return"";for(u||(u="utf8");;)switch(u){case"hex":return te(this,h,S);case"utf8":case"utf-8":return le(this,h,S);case"ascii":return Se(this,h,S);case"latin1":case"binary":return j(this,h,S);case"base64":return Ie(this,h,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,h,S);default:if(P)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),P=!0}}_.prototype._isBuffer=!0;function ye(u,h,S){var P=u[h];u[h]=u[S],u[S]=P}_.prototype.swap16=function(){var u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var h=0;h<u;h+=2)ye(this,h,h+1);return this},_.prototype.swap32=function(){var u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var h=0;h<u;h+=4)ye(this,h,h+3),ye(this,h+1,h+2);return this},_.prototype.swap64=function(){var u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var h=0;h<u;h+=8)ye(this,h,h+7),ye(this,h+1,h+6),ye(this,h+2,h+5),ye(this,h+3,h+4);return this},_.prototype.toString=function(){var u=this.length;return u===0?"":arguments.length===0?le(this,0,u):Xe.apply(this,arguments)},_.prototype.toLocaleString=_.prototype.toString,_.prototype.equals=function(u){if(!_.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:_.compare(this,u)===0},_.prototype.inspect=function(){var u="",h=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(u+=" ... "),"<Buffer "+u+">"},c&&(_.prototype[c]=_.prototype.inspect),_.prototype.compare=function(u,h,S,P,U){if(F(u,Uint8Array)&&(u=_.from(u,u.offset,u.byteLength)),!_.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(h===void 0&&(h=0),S===void 0&&(S=u?u.length:0),P===void 0&&(P=0),U===void 0&&(U=this.length),h<0||S>u.length||P<0||U>this.length)throw new RangeError("out of range index");if(P>=U&&h>=S)return 0;if(P>=U)return-1;if(h>=S)return 1;if(h>>>=0,S>>>=0,P>>>=0,U>>>=0,this===u)return 0;for(var Y=U-P,se=S-h,Re=Math.min(Y,se),Ze=this.slice(P,U),T=u.slice(h,S),C=0;C<Re;++C)if(Ze[C]!==T[C]){Y=Ze[C],se=T[C];break}return Y<se?-1:se<Y?1:0};function Ne(u,h,S,P,U){if(u.length===0)return-1;if(typeof S=="string"?(P=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,N(S)&&(S=U?0:u.length-1),S<0&&(S=u.length+S),S>=u.length){if(U)return-1;S=u.length-1}else if(S<0)if(U)S=0;else return-1;if(typeof h=="string"&&(h=_.from(h,P)),_.isBuffer(h))return h.length===0?-1:Be(u,h,S,P,U);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?U?Uint8Array.prototype.indexOf.call(u,h,S):Uint8Array.prototype.lastIndexOf.call(u,h,S):Be(u,[h],S,P,U);throw new TypeError("val must be string, number or Buffer")}function Be(u,h,S,P,U){var Y=1,se=u.length,Re=h.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(u.length<2||h.length<2)return-1;Y=2,se/=2,Re/=2,S/=2}function Ze(g,k){return Y===1?g[k]:g.readUInt16BE(k*Y)}var T;if(U){var C=-1;for(T=S;T<se;T++)if(Ze(u,T)===Ze(h,C===-1?0:T-C)){if(C===-1&&(C=T),T-C+1===Re)return C*Y}else C!==-1&&(T-=T-C),C=-1}else for(S+Re>se&&(S=se-Re),T=S;T>=0;T--){for(var l=!0,f=0;f<Re;f++)if(Ze(u,T+f)!==Ze(h,f)){l=!1;break}if(l)return T}return-1}_.prototype.includes=function(u,h,S){return this.indexOf(u,h,S)!==-1},_.prototype.indexOf=function(u,h,S){return Ne(this,u,h,S,!0)},_.prototype.lastIndexOf=function(u,h,S){return Ne(this,u,h,S,!1)};function Ve(u,h,S,P){S=Number(S)||0;var U=u.length-S;P?(P=Number(P),P>U&&(P=U)):P=U;var Y=h.length;P>Y/2&&(P=Y/2);for(var se=0;se<P;++se){var Re=parseInt(h.substr(se*2,2),16);if(N(Re))return se;u[S+se]=Re}return se}function Ee(u,h,S,P){return ct(rt(h,u.length-S),u,S,P)}function ce(u,h,S,P){return ct(st(h),u,S,P)}function _e(u,h,S,P){return ct(_t(h),u,S,P)}function Oe(u,h,S,P){return ct(Mt(h,u.length-S),u,S,P)}_.prototype.write=function(u,h,S,P){if(h===void 0)P="utf8",S=this.length,h=0;else if(S===void 0&&typeof h=="string")P=h,S=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(S)?(S=S>>>0,P===void 0&&(P="utf8")):(P=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var U=this.length-h;if((S===void 0||S>U)&&(S=U),u.length>0&&(S<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");for(var Y=!1;;)switch(P){case"hex":return Ve(this,u,h,S);case"utf8":case"utf-8":return Ee(this,u,h,S);case"ascii":case"latin1":case"binary":return ce(this,u,h,S);case"base64":return _e(this,u,h,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oe(this,u,h,S);default:if(Y)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),Y=!0}},_.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ie(u,h,S){return h===0&&S===u.length?a.fromByteArray(u):a.fromByteArray(u.slice(h,S))}function le(u,h,S){S=Math.min(u.length,S);for(var P=[],U=h;U<S;){var Y=u[U],se=null,Re=Y>239?4:Y>223?3:Y>191?2:1;if(U+Re<=S){var Ze,T,C,l;switch(Re){case 1:Y<128&&(se=Y);break;case 2:Ze=u[U+1],(Ze&192)===128&&(l=(Y&31)<<6|Ze&63,l>127&&(se=l));break;case 3:Ze=u[U+1],T=u[U+2],(Ze&192)===128&&(T&192)===128&&(l=(Y&15)<<12|(Ze&63)<<6|T&63,l>2047&&(l<55296||l>57343)&&(se=l));break;case 4:Ze=u[U+1],T=u[U+2],C=u[U+3],(Ze&192)===128&&(T&192)===128&&(C&192)===128&&(l=(Y&15)<<18|(Ze&63)<<12|(T&63)<<6|C&63,l>65535&&l<1114112&&(se=l))}}se===null?(se=65533,Re=1):se>65535&&(se-=65536,P.push(se>>>10&1023|55296),se=56320|se&1023),P.push(se),U+=Re}return De(P)}var ae=4096;function De(u){var h=u.length;if(h<=ae)return String.fromCharCode.apply(String,u);for(var S="",P=0;P<h;)S+=String.fromCharCode.apply(String,u.slice(P,P+=ae));return S}function Se(u,h,S){var P="";S=Math.min(u.length,S);for(var U=h;U<S;++U)P+=String.fromCharCode(u[U]&127);return P}function j(u,h,S){var P="";S=Math.min(u.length,S);for(var U=h;U<S;++U)P+=String.fromCharCode(u[U]);return P}function te(u,h,S){var P=u.length;(!h||h<0)&&(h=0),(!S||S<0||S>P)&&(S=P);for(var U="",Y=h;Y<S;++Y)U+=Z[u[Y]];return U}function q(u,h,S){for(var P=u.slice(h,S),U="",Y=0;Y<P.length-1;Y+=2)U+=String.fromCharCode(P[Y]+P[Y+1]*256);return U}_.prototype.slice=function(u,h){var S=this.length;u=~~u,h=h===void 0?S:~~h,u<0?(u+=S,u<0&&(u=0)):u>S&&(u=S),h<0?(h+=S,h<0&&(h=0)):h>S&&(h=S),h<u&&(h=u);var P=this.subarray(u,h);return Object.setPrototypeOf(P,_.prototype),P};function ve(u,h,S){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+h>S)throw new RangeError("Trying to access beyond buffer length")}_.prototype.readUintLE=_.prototype.readUIntLE=function(u,h,S){u=u>>>0,h=h>>>0,S||ve(u,h,this.length);for(var P=this[u],U=1,Y=0;++Y<h&&(U*=256);)P+=this[u+Y]*U;return P},_.prototype.readUintBE=_.prototype.readUIntBE=function(u,h,S){u=u>>>0,h=h>>>0,S||ve(u,h,this.length);for(var P=this[u+--h],U=1;h>0&&(U*=256);)P+=this[u+--h]*U;return P},_.prototype.readUint8=_.prototype.readUInt8=function(u,h){return u=u>>>0,h||ve(u,1,this.length),this[u]},_.prototype.readUint16LE=_.prototype.readUInt16LE=function(u,h){return u=u>>>0,h||ve(u,2,this.length),this[u]|this[u+1]<<8},_.prototype.readUint16BE=_.prototype.readUInt16BE=function(u,h){return u=u>>>0,h||ve(u,2,this.length),this[u]<<8|this[u+1]},_.prototype.readUint32LE=_.prototype.readUInt32LE=function(u,h){return u=u>>>0,h||ve(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},_.prototype.readUint32BE=_.prototype.readUInt32BE=function(u,h){return u=u>>>0,h||ve(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},_.prototype.readIntLE=function(u,h,S){u=u>>>0,h=h>>>0,S||ve(u,h,this.length);for(var P=this[u],U=1,Y=0;++Y<h&&(U*=256);)P+=this[u+Y]*U;return U*=128,P>=U&&(P-=Math.pow(2,8*h)),P},_.prototype.readIntBE=function(u,h,S){u=u>>>0,h=h>>>0,S||ve(u,h,this.length);for(var P=h,U=1,Y=this[u+--P];P>0&&(U*=256);)Y+=this[u+--P]*U;return U*=128,Y>=U&&(Y-=Math.pow(2,8*h)),Y},_.prototype.readInt8=function(u,h){return u=u>>>0,h||ve(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},_.prototype.readInt16LE=function(u,h){u=u>>>0,h||ve(u,2,this.length);var S=this[u]|this[u+1]<<8;return S&32768?S|4294901760:S},_.prototype.readInt16BE=function(u,h){u=u>>>0,h||ve(u,2,this.length);var S=this[u+1]|this[u]<<8;return S&32768?S|4294901760:S},_.prototype.readInt32LE=function(u,h){return u=u>>>0,h||ve(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},_.prototype.readInt32BE=function(u,h){return u=u>>>0,h||ve(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},_.prototype.readFloatLE=function(u,h){return u=u>>>0,h||ve(u,4,this.length),i.read(this,u,!0,23,4)},_.prototype.readFloatBE=function(u,h){return u=u>>>0,h||ve(u,4,this.length),i.read(this,u,!1,23,4)},_.prototype.readDoubleLE=function(u,h){return u=u>>>0,h||ve(u,8,this.length),i.read(this,u,!0,52,8)},_.prototype.readDoubleBE=function(u,h){return u=u>>>0,h||ve(u,8,this.length),i.read(this,u,!1,52,8)};function ke(u,h,S,P,U,Y){if(!_.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>U||h<Y)throw new RangeError('"value" argument is out of bounds');if(S+P>u.length)throw new RangeError("Index out of range")}_.prototype.writeUintLE=_.prototype.writeUIntLE=function(u,h,S,P){if(u=+u,h=h>>>0,S=S>>>0,!P){var U=Math.pow(2,8*S)-1;ke(this,u,h,S,U,0)}var Y=1,se=0;for(this[h]=u&255;++se<S&&(Y*=256);)this[h+se]=u/Y&255;return h+S},_.prototype.writeUintBE=_.prototype.writeUIntBE=function(u,h,S,P){if(u=+u,h=h>>>0,S=S>>>0,!P){var U=Math.pow(2,8*S)-1;ke(this,u,h,S,U,0)}var Y=S-1,se=1;for(this[h+Y]=u&255;--Y>=0&&(se*=256);)this[h+Y]=u/se&255;return h+S},_.prototype.writeUint8=_.prototype.writeUInt8=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,1,255,0),this[h]=u&255,h+1},_.prototype.writeUint16LE=_.prototype.writeUInt16LE=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,2,65535,0),this[h]=u&255,this[h+1]=u>>>8,h+2},_.prototype.writeUint16BE=_.prototype.writeUInt16BE=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,2,65535,0),this[h]=u>>>8,this[h+1]=u&255,h+2},_.prototype.writeUint32LE=_.prototype.writeUInt32LE=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,4,4294967295,0),this[h+3]=u>>>24,this[h+2]=u>>>16,this[h+1]=u>>>8,this[h]=u&255,h+4},_.prototype.writeUint32BE=_.prototype.writeUInt32BE=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,4,4294967295,0),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4},_.prototype.writeIntLE=function(u,h,S,P){if(u=+u,h=h>>>0,!P){var U=Math.pow(2,8*S-1);ke(this,u,h,S,U-1,-U)}var Y=0,se=1,Re=0;for(this[h]=u&255;++Y<S&&(se*=256);)u<0&&Re===0&&this[h+Y-1]!==0&&(Re=1),this[h+Y]=(u/se>>0)-Re&255;return h+S},_.prototype.writeIntBE=function(u,h,S,P){if(u=+u,h=h>>>0,!P){var U=Math.pow(2,8*S-1);ke(this,u,h,S,U-1,-U)}var Y=S-1,se=1,Re=0;for(this[h+Y]=u&255;--Y>=0&&(se*=256);)u<0&&Re===0&&this[h+Y+1]!==0&&(Re=1),this[h+Y]=(u/se>>0)-Re&255;return h+S},_.prototype.writeInt8=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,1,127,-128),u<0&&(u=255+u+1),this[h]=u&255,h+1},_.prototype.writeInt16LE=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,2,32767,-32768),this[h]=u&255,this[h+1]=u>>>8,h+2},_.prototype.writeInt16BE=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,2,32767,-32768),this[h]=u>>>8,this[h+1]=u&255,h+2},_.prototype.writeInt32LE=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,4,2147483647,-2147483648),this[h]=u&255,this[h+1]=u>>>8,this[h+2]=u>>>16,this[h+3]=u>>>24,h+4},_.prototype.writeInt32BE=function(u,h,S){return u=+u,h=h>>>0,S||ke(this,u,h,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[h]=u>>>24,this[h+1]=u>>>16,this[h+2]=u>>>8,this[h+3]=u&255,h+4};function ot(u,h,S,P,U,Y){if(S+P>u.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function dt(u,h,S,P,U){return h=+h,S=S>>>0,U||ot(u,h,S,4),i.write(u,h,S,P,23,4),S+4}_.prototype.writeFloatLE=function(u,h,S){return dt(this,u,h,!0,S)},_.prototype.writeFloatBE=function(u,h,S){return dt(this,u,h,!1,S)};function at(u,h,S,P,U){return h=+h,S=S>>>0,U||ot(u,h,S,8),i.write(u,h,S,P,52,8),S+8}_.prototype.writeDoubleLE=function(u,h,S){return at(this,u,h,!0,S)},_.prototype.writeDoubleBE=function(u,h,S){return at(this,u,h,!1,S)},_.prototype.copy=function(u,h,S,P){if(!_.isBuffer(u))throw new TypeError("argument should be a Buffer");if(S||(S=0),!P&&P!==0&&(P=this.length),h>=u.length&&(h=u.length),h||(h=0),P>0&&P<S&&(P=S),P===S||u.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),u.length-h<P-S&&(P=u.length-h+S);var U=P-S;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,S,P):Uint8Array.prototype.set.call(u,this.subarray(S,P),h),U},_.prototype.fill=function(u,h,S,P){if(typeof u=="string"){if(typeof h=="string"?(P=h,h=0,S=this.length):typeof S=="string"&&(P=S,S=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!_.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(u.length===1){var U=u.charCodeAt(0);(P==="utf8"&&U<128||P==="latin1")&&(u=U)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(h<0||this.length<h||this.length<S)throw new RangeError("Out of range index");if(S<=h)return this;h=h>>>0,S=S===void 0?this.length:S>>>0,u||(u=0);var Y;if(typeof u=="number")for(Y=h;Y<S;++Y)this[Y]=u;else{var se=_.isBuffer(u)?u:_.from(u,P),Re=se.length;if(Re===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(Y=0;Y<S-h;++Y)this[Y+h]=se[Y%Re]}return this};var Ct=/[^+/0-9A-Za-z-_]/g;function mt(u){if(u=u.split("=")[0],u=u.trim().replace(Ct,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}function rt(u,h){h=h||1/0;for(var S,P=u.length,U=null,Y=[],se=0;se<P;++se){if(S=u.charCodeAt(se),S>55295&&S<57344){if(!U){if(S>56319){(h-=3)>-1&&Y.push(239,191,189);continue}else if(se+1===P){(h-=3)>-1&&Y.push(239,191,189);continue}U=S;continue}if(S<56320){(h-=3)>-1&&Y.push(239,191,189),U=S;continue}S=(U-55296<<10|S-56320)+65536}else U&&(h-=3)>-1&&Y.push(239,191,189);if(U=null,S<128){if((h-=1)<0)break;Y.push(S)}else if(S<2048){if((h-=2)<0)break;Y.push(S>>6|192,S&63|128)}else if(S<65536){if((h-=3)<0)break;Y.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((h-=4)<0)break;Y.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return Y}function st(u){for(var h=[],S=0;S<u.length;++S)h.push(u.charCodeAt(S)&255);return h}function Mt(u,h){for(var S,P,U,Y=[],se=0;se<u.length&&!((h-=2)<0);++se)S=u.charCodeAt(se),P=S>>8,U=S%256,Y.push(U),Y.push(P);return Y}function _t(u){return a.toByteArray(mt(u))}function ct(u,h,S,P){for(var U=0;U<P&&!(U+S>=h.length||U>=u.length);++U)h[U+S]=u[U];return U}function F(u,h){return u instanceof h||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===h.name}function N(u){return u!==u}var Z=function(){for(var u="0123456789abcdef",h=new Array(256),S=0;S<16;++S)for(var P=S*16,U=0;U<16;++U)h[P+U]=u[S]+u[U];return h}()})(Fs);(function(r,a){var i=Fs,c=i.Buffer;function y(w,_){for(var D in w)_[D]=w[D]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?r.exports=i:(y(i,a),a.Buffer=v);function v(w,_,D){return c(w,_,D)}v.prototype=Object.create(c.prototype),y(c,v),v.from=function(w,_,D){if(typeof w=="number")throw new TypeError("Argument must not be a number");return c(w,_,D)},v.alloc=function(w,_,D){if(typeof w!="number")throw new TypeError("Argument must be a number");var I=c(w);return _!==void 0?typeof D=="string"?I.fill(_,D):I.fill(_):I.fill(0),I},v.allocUnsafe=function(w){if(typeof w!="number")throw new TypeError("Argument must be a number");return c(w)},v.allocUnsafeSlow=function(w){if(typeof w!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(w)}})(Ui,Ui.exports);var xd=Ui.exports,Wi=xd.Buffer,Ds=Wi.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Rd(r){if(!r)return"utf8";for(var a;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(a)return;r=(""+r).toLowerCase(),a=!0}}function kd(r){var a=Rd(r);if(typeof a!="string"&&(Wi.isEncoding===Ds||!Ds(r)))throw new Error("Unknown encoding: "+r);return a||r}As.StringDecoder=Dr;function Dr(r){this.encoding=kd(r);var a;switch(this.encoding){case"utf16le":this.text=Ld,this.end=Md,a=4;break;case"utf8":this.fillLast=Fd,a=4;break;case"base64":this.text=jd,this.end=Nd,a=3;break;default:this.write=Bd,this.end=Od;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Wi.allocUnsafe(a)}Dr.prototype.write=function(r){if(r.length===0)return"";var a,i;if(this.lastNeed){if(a=this.fillLast(r),a===void 0)return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<r.length?a?a+this.text(r,i):this.text(r,i):a||""},Dr.prototype.end=Id,Dr.prototype.text=Dd,Dr.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function zi(r){return r<=127?0:r>>5===6?2:r>>4===14?3:r>>3===30?4:r>>6===2?-1:-2}function Pd(r,a,i){var c=a.length-1;if(c<i)return 0;var y=zi(a[c]);return y>=0?(y>0&&(r.lastNeed=y-1),y):--c<i||y===-2?0:(y=zi(a[c]),y>=0?(y>0&&(r.lastNeed=y-2),y):--c<i||y===-2?0:(y=zi(a[c]),y>=0?(y>0&&(y===2?y=0:r.lastNeed=y-3),y):0))}function Ad(r,a,i){if((a[0]&192)!==128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&a.length>1){if((a[1]&192)!==128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&a.length>2&&(a[2]&192)!==128)return r.lastNeed=2,"\uFFFD"}}function Fd(r){var a=this.lastTotal-this.lastNeed,i=Ad(this,r);if(i!==void 0)return i;if(this.lastNeed<=r.length)return r.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,a,0,r.length),this.lastNeed-=r.length}function Dd(r,a){var i=Pd(this,r,a);if(!this.lastNeed)return r.toString("utf8",a);this.lastTotal=i;var c=r.length-(i-this.lastNeed);return r.copy(this.lastChar,0,c),r.toString("utf8",a,c)}function Id(r){var a=r&&r.length?this.write(r):"";return this.lastNeed?a+"\uFFFD":a}function Ld(r,a){if((r.length-a)%2===0){var i=r.toString("utf16le",a);if(i){var c=i.charCodeAt(i.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",a,r.length-1)}function Md(r){var a=r&&r.length?this.write(r):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,i)}return a}function jd(r,a){var i=(r.length-a)%3;return i===0?r.toString("base64",a):(this.lastNeed=3-i,this.lastTotal=3,i===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",a,r.length-i))}function Nd(r){var a=r&&r.length?this.write(r):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function Bd(r){return r.toString(this.encoding)}function Od(r){return r&&r.length?this.write(r):""}const Is=nr,{PromisePrototypeThen:Ud,SymbolAsyncIterator:Ls,SymbolIterator:Ms}=tt,{Buffer:Wd}=$t,{ERR_INVALID_ARG_TYPE:zd,ERR_STREAM_NULL_VALUES:Vd}=ft.codes;function Gd(r,a,i){let c;if(typeof a=="string"||a instanceof Wd)return new r({objectMode:!0,...i,read(){this.push(a),this.push(null)}});let y;if(a&&a[Ls])y=!0,c=a[Ls]();else if(a&&a[Ms])y=!1,c=a[Ms]();else throw new zd("iterable",["Iterable"],a);const v=new r({objectMode:!0,highWaterMark:1,...i});let w=!1;v._read=function(){w||(w=!0,D())},v._destroy=function(I,O){Ud(_(I),()=>Is.nextTick(O,I),ee=>Is.nextTick(O,ee||I))};async function _(I){const O=I!=null,ee=typeof c.throw=="function";if(O&&ee){const{value:$,done:re}=await c.throw(I);if(await $,re)return}if(typeof c.return=="function"){const{value:$}=await c.return();await $}}async function D(){for(;;){try{const{value:I,done:O}=y?await c.next():c.next();if(O)v.push(null);else{const ee=I&&typeof I.then=="function"?await I:I;if(ee===null)throw w=!1,new Vd;if(v.push(ee))continue;w=!1}}catch(I){v.destroy(I)}break}}return v}var js=Gd,Vi,Ns;function bn(){if(Ns)return Vi;Ns=1;const r=nr,{ArrayPrototypeIndexOf:a,NumberIsInteger:i,NumberIsNaN:c,NumberParseInt:y,ObjectDefineProperties:v,ObjectKeys:w,ObjectSetPrototypeOf:_,Promise:D,SafeSet:I,SymbolAsyncIterator:O,Symbol:ee}=tt;Vi=q,q.ReadableState=te;const{EventEmitter:$}=Mi,{Stream:re,prependListener:X}=Ni,{Buffer:we}=$t,{addAbortSignal:me}=pn,be=Yt;let Q=Ut.debuglog("stream",T=>{Q=T});const Fe=vd,Xe=gr,{getHighWaterMark:ye,getDefaultHighWaterMark:Ne}=Oi,{aggregateTwoErrors:Be,codes:{ERR_INVALID_ARG_TYPE:Ve,ERR_METHOD_NOT_IMPLEMENTED:Ee,ERR_OUT_OF_RANGE:ce,ERR_STREAM_PUSH_AFTER_EOF:_e,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Oe}}=ft,{validateObject:Ie}=nn,le=ee("kPaused"),{StringDecoder:ae}=As,De=js;_(q.prototype,re.prototype),_(q,re);const Se=()=>{},{errorOrDestroy:j}=Xe;function te(T,C,l){typeof l!="boolean"&&(l=C instanceof Gt()),this.objectMode=!!(T&&T.objectMode),l&&(this.objectMode=this.objectMode||!!(T&&T.readableObjectMode)),this.highWaterMark=T?ye(this,T,"readableHighWaterMark",l):Ne(!1),this.buffer=new Fe,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[le]=null,this.errorEmitted=!1,this.emitClose=!T||T.emitClose!==!1,this.autoDestroy=!T||T.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=T&&T.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,T&&T.encoding&&(this.decoder=new ae(T.encoding),this.encoding=T.encoding)}function q(T){if(!(this instanceof q))return new q(T);const C=this instanceof Gt();this._readableState=new te(T,this,C),T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.construct=="function"&&(this._construct=T.construct),T.signal&&!C&&me(T.signal,this)),re.call(this,T),Xe.construct(this,()=>{this._readableState.needReadable&&st(this,this._readableState)})}q.prototype.destroy=Xe.destroy,q.prototype._undestroy=Xe.undestroy,q.prototype._destroy=function(T,C){C(T)},q.prototype[$.captureRejectionSymbol]=function(T){this.destroy(T)},q.prototype.push=function(T,C){return ve(this,T,C,!1)},q.prototype.unshift=function(T,C){return ve(this,T,C,!0)};function ve(T,C,l,f){Q("readableAddChunk",C);const g=T._readableState;let k;if(g.objectMode||(typeof C=="string"?(l=l||g.defaultEncoding,g.encoding!==l&&(f&&g.encoding?C=we.from(C,l).toString(g.encoding):(C=we.from(C,l),l=""))):C instanceof we?l="":re._isUint8Array(C)?(C=re._uint8ArrayToBuffer(C),l=""):C!=null&&(k=new Ve("chunk",["string","Buffer","Uint8Array"],C))),k)j(T,k);else if(C===null)g.reading=!1,Ct(T,g);else if(g.objectMode||C&&C.length>0)if(f)if(g.endEmitted)j(T,new Oe);else{if(g.destroyed||g.errored)return!1;ke(T,g,C,!0)}else if(g.ended)j(T,new _e);else{if(g.destroyed||g.errored)return!1;g.reading=!1,g.decoder&&!l?(C=g.decoder.write(C),g.objectMode||C.length!==0?ke(T,g,C,!1):st(T,g)):ke(T,g,C,!1)}else f||(g.reading=!1,st(T,g));return!g.ended&&(g.length<g.highWaterMark||g.length===0)}function ke(T,C,l,f){C.flowing&&C.length===0&&!C.sync&&T.listenerCount("data")>0?(C.multiAwaitDrain?C.awaitDrainWriters.clear():C.awaitDrainWriters=null,C.dataEmitted=!0,T.emit("data",l)):(C.length+=C.objectMode?1:l.length,f?C.buffer.unshift(l):C.buffer.push(l),C.needReadable&&mt(T)),st(T,C)}q.prototype.isPaused=function(){const T=this._readableState;return T[le]===!0||T.flowing===!1},q.prototype.setEncoding=function(T){const C=new ae(T);this._readableState.decoder=C,this._readableState.encoding=this._readableState.decoder.encoding;const l=this._readableState.buffer;let f="";for(const g of l)f+=C.write(g);return l.clear(),f!==""&&l.push(f),this._readableState.length=f.length,this};const ot=1073741824;function dt(T){if(T>ot)throw new ce("size","<= 1GiB",T);return T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++,T}function at(T,C){return T<=0||C.length===0&&C.ended?0:C.objectMode?1:c(T)?C.flowing&&C.length?C.buffer.first().length:C.length:T<=C.length?T:C.ended?C.length:0}q.prototype.read=function(T){Q("read",T),T===void 0?T=NaN:i(T)||(T=y(T,10));const C=this._readableState,l=T;if(T>C.highWaterMark&&(C.highWaterMark=dt(T)),T!==0&&(C.emittedReadable=!1),T===0&&C.needReadable&&((C.highWaterMark!==0?C.length>=C.highWaterMark:C.length>0)||C.ended))return Q("read: emitReadable",C.length,C.ended),C.length===0&&C.ended?U(this):mt(this),null;if(T=at(T,C),T===0&&C.ended)return C.length===0&&U(this),null;let f=C.needReadable;if(Q("need readable",f),(C.length===0||C.length-T<C.highWaterMark)&&(f=!0,Q("length less than watermark",f)),C.ended||C.reading||C.destroyed||C.errored||!C.constructed)f=!1,Q("reading, ended or constructing",f);else if(f){Q("do read"),C.reading=!0,C.sync=!0,C.length===0&&(C.needReadable=!0);try{this._read(C.highWaterMark)}catch(k){j(this,k)}C.sync=!1,C.reading||(T=at(l,C))}let g;return T>0?g=P(T,C):g=null,g===null?(C.needReadable=C.length<=C.highWaterMark,T=0):(C.length-=T,C.multiAwaitDrain?C.awaitDrainWriters.clear():C.awaitDrainWriters=null),C.length===0&&(C.ended||(C.needReadable=!0),l!==T&&C.ended&&U(this)),g!==null&&!C.errorEmitted&&!C.closeEmitted&&(C.dataEmitted=!0,this.emit("data",g)),g};function Ct(T,C){if(Q("onEofChunk"),!C.ended){if(C.decoder){const l=C.decoder.end();l&&l.length&&(C.buffer.push(l),C.length+=C.objectMode?1:l.length)}C.ended=!0,C.sync?mt(T):(C.needReadable=!1,C.emittedReadable=!0,rt(T))}}function mt(T){const C=T._readableState;Q("emitReadable",C.needReadable,C.emittedReadable),C.needReadable=!1,C.emittedReadable||(Q("emitReadable",C.flowing),C.emittedReadable=!0,r.nextTick(rt,T))}function rt(T){const C=T._readableState;Q("emitReadable_",C.destroyed,C.length,C.ended),!C.destroyed&&!C.errored&&(C.length||C.ended)&&(T.emit("readable"),C.emittedReadable=!1),C.needReadable=!C.flowing&&!C.ended&&C.length<=C.highWaterMark,u(T)}function st(T,C){!C.readingMore&&C.constructed&&(C.readingMore=!0,r.nextTick(Mt,T,C))}function Mt(T,C){for(;!C.reading&&!C.ended&&(C.length<C.highWaterMark||C.flowing&&C.length===0);){const l=C.length;if(Q("maybeReadMore read 0"),T.read(0),l===C.length)break}C.readingMore=!1}q.prototype._read=function(T){throw new Ee("_read()")},q.prototype.pipe=function(T,C){const l=this,f=this._readableState;f.pipes.length===1&&(f.multiAwaitDrain||(f.multiAwaitDrain=!0,f.awaitDrainWriters=new I(f.awaitDrainWriters?[f.awaitDrainWriters]:[]))),f.pipes.push(T),Q("pipe count=%d opts=%j",f.pipes.length,C);const g=(!C||C.end!==!1)&&T!==r.stdout&&T!==r.stderr?L:lr;f.endEmitted?r.nextTick(g):l.once("end",g),T.on("unpipe",k);function k(Ae,vt){Q("onunpipe"),Ae===l&&vt&&vt.hasUnpiped===!1&&(vt.hasUnpiped=!0,We())}function L(){Q("onend"),T.end()}let z,ne=!1;function We(){Q("cleanup"),T.removeListener("close",$e),T.removeListener("finish",Nr),z&&T.removeListener("drain",z),T.removeListener("error",Me),T.removeListener("unpipe",k),l.removeListener("end",L),l.removeListener("end",lr),l.removeListener("data",ze),ne=!0,z&&f.awaitDrainWriters&&(!T._writableState||T._writableState.needDrain)&&z()}function Qe(){ne||(f.pipes.length===1&&f.pipes[0]===T?(Q("false write response, pause",0),f.awaitDrainWriters=T,f.multiAwaitDrain=!1):f.pipes.length>1&&f.pipes.includes(T)&&(Q("false write response, pause",f.awaitDrainWriters.size),f.awaitDrainWriters.add(T)),l.pause()),z||(z=_t(l,T),T.on("drain",z))}l.on("data",ze);function ze(Ae){Q("ondata");const vt=T.write(Ae);Q("dest.write",vt),vt===!1&&Qe()}function Me(Ae){if(Q("onerror",Ae),lr(),T.removeListener("error",Me),T.listenerCount("error")===0){const vt=T._writableState||T._readableState;vt&&!vt.errorEmitted?j(T,Ae):T.emit("error",Ae)}}X(T,"error",Me);function $e(){T.removeListener("finish",Nr),lr()}T.once("close",$e);function Nr(){Q("onfinish"),T.removeListener("close",$e),lr()}T.once("finish",Nr);function lr(){Q("unpipe"),l.unpipe(T)}return T.emit("pipe",l),T.writableNeedDrain===!0?f.flowing&&Qe():f.flowing||(Q("pipe resume"),l.resume()),T};function _t(T,C){return function(){const l=T._readableState;l.awaitDrainWriters===C?(Q("pipeOnDrain",1),l.awaitDrainWriters=null):l.multiAwaitDrain&&(Q("pipeOnDrain",l.awaitDrainWriters.size),l.awaitDrainWriters.delete(C)),(!l.awaitDrainWriters||l.awaitDrainWriters.size===0)&&T.listenerCount("data")&&T.resume()}}q.prototype.unpipe=function(T){const C=this._readableState,l={hasUnpiped:!1};if(C.pipes.length===0)return this;if(!T){const g=C.pipes;C.pipes=[],this.pause();for(let k=0;k<g.length;k++)g[k].emit("unpipe",this,{hasUnpiped:!1});return this}const f=a(C.pipes,T);return f===-1?this:(C.pipes.splice(f,1),C.pipes.length===0&&this.pause(),T.emit("unpipe",this,l),this)},q.prototype.on=function(T,C){const l=re.prototype.on.call(this,T,C),f=this._readableState;return T==="data"?(f.readableListening=this.listenerCount("readable")>0,f.flowing!==!1&&this.resume()):T==="readable"&&!f.endEmitted&&!f.readableListening&&(f.readableListening=f.needReadable=!0,f.flowing=!1,f.emittedReadable=!1,Q("on readable",f.length,f.reading),f.length?mt(this):f.reading||r.nextTick(F,this)),l},q.prototype.addListener=q.prototype.on,q.prototype.removeListener=function(T,C){const l=re.prototype.removeListener.call(this,T,C);return T==="readable"&&r.nextTick(ct,this),l},q.prototype.off=q.prototype.removeListener,q.prototype.removeAllListeners=function(T){const C=re.prototype.removeAllListeners.apply(this,arguments);return(T==="readable"||T===void 0)&&r.nextTick(ct,this),C};function ct(T){const C=T._readableState;C.readableListening=T.listenerCount("readable")>0,C.resumeScheduled&&C[le]===!1?C.flowing=!0:T.listenerCount("data")>0?T.resume():C.readableListening||(C.flowing=null)}function F(T){Q("readable nexttick read 0"),T.read(0)}q.prototype.resume=function(){const T=this._readableState;return T.flowing||(Q("resume"),T.flowing=!T.readableListening,N(this,T)),T[le]=!1,this};function N(T,C){C.resumeScheduled||(C.resumeScheduled=!0,r.nextTick(Z,T,C))}function Z(T,C){Q("resume",C.reading),C.reading||T.read(0),C.resumeScheduled=!1,T.emit("resume"),u(T),C.flowing&&!C.reading&&T.read(0)}q.prototype.pause=function(){return Q("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Q("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[le]=!0,this};function u(T){const C=T._readableState;for(Q("flow",C.flowing);C.flowing&&T.read()!==null;);}q.prototype.wrap=function(T){let C=!1;T.on("data",f=>{!this.push(f)&&T.pause&&(C=!0,T.pause())}),T.on("end",()=>{this.push(null)}),T.on("error",f=>{j(this,f)}),T.on("close",()=>{this.destroy()}),T.on("destroy",()=>{this.destroy()}),this._read=()=>{C&&T.resume&&(C=!1,T.resume())};const l=w(T);for(let f=1;f<l.length;f++){const g=l[f];this[g]===void 0&&typeof T[g]=="function"&&(this[g]=T[g].bind(T))}return this},q.prototype[O]=function(){return h(this)},q.prototype.iterator=function(T){return T!==void 0&&Ie(T,"options"),h(this,T)};function h(T,C){typeof T.read!="function"&&(T=q.wrap(T,{objectMode:!0}));const l=S(T,C);return l.stream=T,l}async function*S(T,C){let l=Se;function f(L){this===T?(l(),l=Se):l=L}T.on("readable",f);let g;const k=be(T,{writable:!1},L=>{g=L?Be(g,L):null,l(),l=Se});try{for(;;){const L=T.destroyed?null:T.read();if(L!==null)yield L;else{if(g)throw g;if(g===null)return;await new D(f)}}}catch(L){throw g=Be(g,L),g}finally{(g||C?.destroyOnReturn!==!1)&&(g===void 0||T._readableState.autoDestroy)?Xe.destroyer(T,null):(T.off("readable",f),k())}}v(q.prototype,{readable:{__proto__:null,get(){const T=this._readableState;return!!T&&T.readable!==!1&&!T.destroyed&&!T.errorEmitted&&!T.endEmitted},set(T){this._readableState&&(this._readableState.readable=!!T)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(T){this._readableState&&(this._readableState.flowing=T)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(T){this._readableState&&(this._readableState.destroyed=T)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),v(te.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[le]!==!1},set(T){this[le]=!!T}}}),q._fromList=P;function P(T,C){if(C.length===0)return null;let l;return C.objectMode?l=C.buffer.shift():!T||T>=C.length?(C.decoder?l=C.buffer.join(""):C.buffer.length===1?l=C.buffer.first():l=C.buffer.concat(C.length),C.buffer.clear()):l=C.buffer.consume(T,C.decoder),l}function U(T){const C=T._readableState;Q("endReadable",C.endEmitted),C.endEmitted||(C.ended=!0,r.nextTick(Y,C,T))}function Y(T,C){if(Q("endReadableNT",T.endEmitted,T.length),!T.errored&&!T.closeEmitted&&!T.endEmitted&&T.length===0){if(T.endEmitted=!0,C.emit("end"),C.writable&&C.allowHalfOpen===!1)r.nextTick(se,C);else if(T.autoDestroy){const l=C._writableState;(!l||l.autoDestroy&&(l.finished||l.writable===!1))&&C.destroy()}}}function se(T){T.writable&&!T.writableEnded&&!T.destroyed&&T.end()}q.from=function(T,C){return De(q,T,C)};let Re;function Ze(){return Re===void 0&&(Re={}),Re}return q.fromWeb=function(T,C){return Ze().newStreamReadableFromReadableStream(T,C)},q.toWeb=function(T,C){return Ze().newReadableStreamFromStreamReadable(T,C)},q.wrap=function(T,C){var l,f;return new q({objectMode:(l=(f=T.readableObjectMode)!==null&&f!==void 0?f:T.objectMode)!==null&&l!==void 0?l:!0,...C,destroy(g,k){Xe.destroyer(T,g),k(g)}}).wrap(T)},Vi}var Gi,Bs;function Os(){if(Bs)return Gi;Bs=1;const r=nr,{ArrayPrototypeSlice:a,Error:i,FunctionPrototypeSymbolHasInstance:c,ObjectDefineProperty:y,ObjectDefineProperties:v,ObjectSetPrototypeOf:w,StringPrototypeToLowerCase:_,Symbol:D,SymbolHasInstance:I}=tt;Gi=ae,ae.WritableState=Ie;const{EventEmitter:O}=Mi,ee=Ni.Stream,{Buffer:$}=$t,re=gr,{addAbortSignal:X}=pn,{getHighWaterMark:we,getDefaultHighWaterMark:me}=Oi,{ERR_INVALID_ARG_TYPE:be,ERR_METHOD_NOT_IMPLEMENTED:Q,ERR_MULTIPLE_CALLBACK:Fe,ERR_STREAM_CANNOT_PIPE:Xe,ERR_STREAM_DESTROYED:ye,ERR_STREAM_ALREADY_FINISHED:Ne,ERR_STREAM_NULL_VALUES:Be,ERR_STREAM_WRITE_AFTER_END:Ve,ERR_UNKNOWN_ENCODING:Ee}=ft.codes,{errorOrDestroy:ce}=re;w(ae.prototype,ee.prototype),w(ae,ee);function _e(){}const Oe=D("kOnFinished");function Ie(F,N,Z){typeof Z!="boolean"&&(Z=N instanceof Gt()),this.objectMode=!!(F&&F.objectMode),Z&&(this.objectMode=this.objectMode||!!(F&&F.writableObjectMode)),this.highWaterMark=F?we(this,F,"writableHighWaterMark",Z):me(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const u=!!(F&&F.decodeStrings===!1);this.decodeStrings=!u,this.defaultEncoding=F&&F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=q.bind(void 0,N),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,le(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!F||F.emitClose!==!1,this.autoDestroy=!F||F.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Oe]=[]}function le(F){F.buffered=[],F.bufferedIndex=0,F.allBuffers=!0,F.allNoop=!0}Ie.prototype.getBuffer=function(){return a(this.buffered,this.bufferedIndex)},y(Ie.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ae(F){const N=this instanceof Gt();if(!N&&!c(ae,this))return new ae(F);this._writableState=new Ie(F,this,N),F&&(typeof F.write=="function"&&(this._write=F.write),typeof F.writev=="function"&&(this._writev=F.writev),typeof F.destroy=="function"&&(this._destroy=F.destroy),typeof F.final=="function"&&(this._final=F.final),typeof F.construct=="function"&&(this._construct=F.construct),F.signal&&X(F.signal,this)),ee.call(this,F),re.construct(this,()=>{const Z=this._writableState;Z.writing||dt(this,Z),rt(this,Z)})}y(ae,I,{__proto__:null,value:function(F){return c(this,F)?!0:this!==ae?!1:F&&F._writableState instanceof Ie}}),ae.prototype.pipe=function(){ce(this,new Xe)};function De(F,N,Z,u){const h=F._writableState;if(typeof Z=="function")u=Z,Z=h.defaultEncoding;else{if(!Z)Z=h.defaultEncoding;else if(Z!=="buffer"&&!$.isEncoding(Z))throw new Ee(Z);typeof u!="function"&&(u=_e)}if(N===null)throw new Be;if(!h.objectMode)if(typeof N=="string")h.decodeStrings!==!1&&(N=$.from(N,Z),Z="buffer");else if(N instanceof $)Z="buffer";else if(ee._isUint8Array(N))N=ee._uint8ArrayToBuffer(N),Z="buffer";else throw new be("chunk",["string","Buffer","Uint8Array"],N);let S;return h.ending?S=new Ve:h.destroyed&&(S=new ye("write")),S?(r.nextTick(u,S),ce(F,S,!0),S):(h.pendingcb++,Se(F,h,N,Z,u))}ae.prototype.write=function(F,N,Z){return De(this,F,N,Z)===!0},ae.prototype.cork=function(){this._writableState.corked++},ae.prototype.uncork=function(){const F=this._writableState;F.corked&&(F.corked--,F.writing||dt(this,F))},ae.prototype.setDefaultEncoding=function(F){if(typeof F=="string"&&(F=_(F)),!$.isEncoding(F))throw new Ee(F);return this._writableState.defaultEncoding=F,this};function Se(F,N,Z,u,h){const S=N.objectMode?1:Z.length;N.length+=S;const P=N.length<N.highWaterMark;return P||(N.needDrain=!0),N.writing||N.corked||N.errored||!N.constructed?(N.buffered.push({chunk:Z,encoding:u,callback:h}),N.allBuffers&&u!=="buffer"&&(N.allBuffers=!1),N.allNoop&&h!==_e&&(N.allNoop=!1)):(N.writelen=S,N.writecb=h,N.writing=!0,N.sync=!0,F._write(Z,u,N.onwrite),N.sync=!1),P&&!N.errored&&!N.destroyed}function j(F,N,Z,u,h,S,P){N.writelen=u,N.writecb=P,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new ye("write")):Z?F._writev(h,N.onwrite):F._write(h,S,N.onwrite),N.sync=!1}function te(F,N,Z,u){--N.pendingcb,u(Z),ot(N),ce(F,Z)}function q(F,N){const Z=F._writableState,u=Z.sync,h=Z.writecb;if(typeof h!="function"){ce(F,new Fe);return}Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0,N?(Z.errored||(Z.errored=N),F._readableState&&!F._readableState.errored&&(F._readableState.errored=N),u?r.nextTick(te,F,Z,N,h):te(F,Z,N,h)):(Z.buffered.length>Z.bufferedIndex&&dt(F,Z),u?Z.afterWriteTickInfo!==null&&Z.afterWriteTickInfo.cb===h?Z.afterWriteTickInfo.count++:(Z.afterWriteTickInfo={count:1,cb:h,stream:F,state:Z},r.nextTick(ve,Z.afterWriteTickInfo)):ke(F,Z,1,h))}function ve({stream:F,state:N,count:Z,cb:u}){return N.afterWriteTickInfo=null,ke(F,N,Z,u)}function ke(F,N,Z,u){for(!N.ending&&!F.destroyed&&N.length===0&&N.needDrain&&(N.needDrain=!1,F.emit("drain"));Z-- >0;)N.pendingcb--,u();N.destroyed&&ot(N),rt(F,N)}function ot(F){if(F.writing)return;for(let h=F.bufferedIndex;h<F.buffered.length;++h){var N;const{chunk:S,callback:P}=F.buffered[h],U=F.objectMode?1:S.length;F.length-=U,P((N=F.errored)!==null&&N!==void 0?N:new ye("write"))}const Z=F[Oe].splice(0);for(let h=0;h<Z.length;h++){var u;Z[h]((u=F.errored)!==null&&u!==void 0?u:new ye("end"))}le(F)}function dt(F,N){if(N.corked||N.bufferProcessing||N.destroyed||!N.constructed)return;const{buffered:Z,bufferedIndex:u,objectMode:h}=N,S=Z.length-u;if(!S)return;let P=u;if(N.bufferProcessing=!0,S>1&&F._writev){N.pendingcb-=S-1;const U=N.allNoop?_e:se=>{for(let Re=P;Re<Z.length;++Re)Z[Re].callback(se)},Y=N.allNoop&&P===0?Z:a(Z,P);Y.allBuffers=N.allBuffers,j(F,N,!0,N.length,Y,"",U),le(N)}else{do{const{chunk:U,encoding:Y,callback:se}=Z[P];Z[P++]=null;const Re=h?1:U.length;j(F,N,!1,Re,U,Y,se)}while(P<Z.length&&!N.writing);P===Z.length?le(N):P>256?(Z.splice(0,P),N.bufferedIndex=0):N.bufferedIndex=P}N.bufferProcessing=!1}ae.prototype._write=function(F,N,Z){if(this._writev)this._writev([{chunk:F,encoding:N}],Z);else throw new Q("_write()")},ae.prototype._writev=null,ae.prototype.end=function(F,N,Z){const u=this._writableState;typeof F=="function"?(Z=F,F=null,N=null):typeof N=="function"&&(Z=N,N=null);let h;if(F!=null){const S=De(this,F,N);S instanceof i&&(h=S)}return u.corked&&(u.corked=1,this.uncork()),h||(!u.errored&&!u.ending?(u.ending=!0,rt(this,u,!0),u.ended=!0):u.finished?h=new Ne("end"):u.destroyed&&(h=new ye("end"))),typeof Z=="function"&&(h||u.finished?r.nextTick(Z,h):u[Oe].push(Z)),this};function at(F){return F.ending&&!F.destroyed&&F.constructed&&F.length===0&&!F.errored&&F.buffered.length===0&&!F.finished&&!F.writing&&!F.errorEmitted&&!F.closeEmitted}function Ct(F,N){let Z=!1;function u(h){if(Z){ce(F,h??Fe());return}if(Z=!0,N.pendingcb--,h){const S=N[Oe].splice(0);for(let P=0;P<S.length;P++)S[P](h);ce(F,h,N.sync)}else at(N)&&(N.prefinished=!0,F.emit("prefinish"),N.pendingcb++,r.nextTick(st,F,N))}N.sync=!0,N.pendingcb++;try{F._final(u)}catch(h){u(h)}N.sync=!1}function mt(F,N){!N.prefinished&&!N.finalCalled&&(typeof F._final=="function"&&!N.destroyed?(N.finalCalled=!0,Ct(F,N)):(N.prefinished=!0,F.emit("prefinish")))}function rt(F,N,Z){at(N)&&(mt(F,N),N.pendingcb===0&&(Z?(N.pendingcb++,r.nextTick((u,h)=>{at(h)?st(u,h):h.pendingcb--},F,N)):at(N)&&(N.pendingcb++,st(F,N))))}function st(F,N){N.pendingcb--,N.finished=!0;const Z=N[Oe].splice(0);for(let u=0;u<Z.length;u++)Z[u]();if(F.emit("finish"),N.autoDestroy){const u=F._readableState;(!u||u.autoDestroy&&(u.endEmitted||u.readable===!1))&&F.destroy()}}v(ae.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(F){this._writableState&&(this._writableState.destroyed=F)}},writable:{__proto__:null,get(){const F=this._writableState;return!!F&&F.writable!==!1&&!F.destroyed&&!F.errored&&!F.ending&&!F.ended},set(F){this._writableState&&(this._writableState.writable=!!F)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const F=this._writableState;return F?!F.destroyed&&!F.ending&&F.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Mt=re.destroy;ae.prototype.destroy=function(F,N){const Z=this._writableState;return!Z.destroyed&&(Z.bufferedIndex<Z.buffered.length||Z[Oe].length)&&r.nextTick(ot,Z),Mt.call(this,F,N),this},ae.prototype._undestroy=re.undestroy,ae.prototype._destroy=function(F,N){N(F)},ae.prototype[O.captureRejectionSymbol]=function(F){this.destroy(F)};let _t;function ct(){return _t===void 0&&(_t={}),_t}return ae.fromWeb=function(F,N){return ct().newStreamWritableFromWritableStream(F,N)},ae.toWeb=function(F){return ct().newWritableStreamFromStreamWritable(F)},Gi}var Ki,Us;function Kd(){if(Us)return Ki;Us=1;const r=nr,a=$t,{isReadable:i,isWritable:c,isIterable:y,isNodeStream:v,isReadableNodeStream:w,isWritableNodeStream:_,isDuplexNodeStream:D}=Vt,I=Yt,{AbortError:O,codes:{ERR_INVALID_ARG_TYPE:ee,ERR_INVALID_RETURN_VALUE:$}}=ft,{destroyer:re}=gr,X=Gt(),we=bn(),{createDeferredPromise:me}=Ut,be=js,Q=globalThis.Blob||a.Blob,Fe=typeof Q<"u"?function(Ee){return Ee instanceof Q}:function(Ee){return!1},Xe=globalThis.AbortController||gi().AbortController,{FunctionPrototypeCall:ye}=tt;class Ne extends X{constructor(ce){super(ce),ce?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),ce?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Ki=function Ee(ce,_e){if(D(ce))return ce;if(w(ce))return Ve({readable:ce});if(_(ce))return Ve({writable:ce});if(v(ce))return Ve({writable:!1,readable:!1});if(typeof ce=="function"){const{value:Ie,write:le,final:ae,destroy:De}=Be(ce);if(y(Ie))return be(Ne,Ie,{objectMode:!0,write:le,final:ae,destroy:De});const Se=Ie?.then;if(typeof Se=="function"){let j;const te=ye(Se,Ie,q=>{if(q!=null)throw new $("nully","body",q)},q=>{re(j,q)});return j=new Ne({objectMode:!0,readable:!1,write:le,final(q){ae(async()=>{try{await te,r.nextTick(q,null)}catch(ve){r.nextTick(q,ve)}})},destroy:De})}throw new $("Iterable, AsyncIterable or AsyncFunction",_e,Ie)}if(Fe(ce))return Ee(ce.arrayBuffer());if(y(ce))return be(Ne,ce,{objectMode:!0,writable:!1});if(typeof ce?.writable=="object"||typeof ce?.readable=="object"){const Ie=ce!=null&&ce.readable?w(ce?.readable)?ce?.readable:Ee(ce.readable):void 0,le=ce!=null&&ce.writable?_(ce?.writable)?ce?.writable:Ee(ce.writable):void 0;return Ve({readable:Ie,writable:le})}const Oe=ce?.then;if(typeof Oe=="function"){let Ie;return ye(Oe,ce,le=>{le!=null&&Ie.push(le),Ie.push(null)},le=>{re(Ie,le)}),Ie=new Ne({objectMode:!0,writable:!1,read(){}})}throw new ee(_e,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],ce)};function Be(Ee){let{promise:ce,resolve:_e}=me();const Oe=new Xe,Ie=Oe.signal;return{value:Ee(async function*(){for(;;){const le=ce;ce=null;const{chunk:ae,done:De,cb:Se}=await le;if(r.nextTick(Se),De)return;if(Ie.aborted)throw new O(void 0,{cause:Ie.reason});({promise:ce,resolve:_e}=me()),yield ae}}(),{signal:Ie}),write(le,ae,De){const Se=_e;_e=null,Se({chunk:le,done:!1,cb:De})},final(le){const ae=_e;_e=null,ae({done:!0,cb:le})},destroy(le,ae){Oe.abort(),ae(le)}}}function Ve(Ee){const ce=Ee.readable&&typeof Ee.readable.read!="function"?we.wrap(Ee.readable):Ee.readable,_e=Ee.writable;let Oe=!!i(ce),Ie=!!c(_e),le,ae,De,Se,j;function te(q){const ve=Se;Se=null,ve?ve(q):q&&j.destroy(q)}return j=new Ne({readableObjectMode:!!(ce!=null&&ce.readableObjectMode),writableObjectMode:!!(_e!=null&&_e.writableObjectMode),readable:Oe,writable:Ie}),Ie&&(I(_e,q=>{Ie=!1,q&&re(ce,q),te(q)}),j._write=function(q,ve,ke){_e.write(q,ve)?ke():le=ke},j._final=function(q){_e.end(),ae=q},_e.on("drain",function(){if(le){const q=le;le=null,q()}}),_e.on("finish",function(){if(ae){const q=ae;ae=null,q()}})),Oe&&(I(ce,q=>{Oe=!1,q&&re(ce,q),te(q)}),ce.on("readable",function(){if(De){const q=De;De=null,q()}}),ce.on("end",function(){j.push(null)}),j._read=function(){for(;;){const q=ce.read();if(q===null){De=j._read;return}if(!j.push(q))return}}),j._destroy=function(q,ve){!q&&Se!==null&&(q=new O),De=null,le=null,ae=null,Se===null?ve(q):(Se=ve,re(_e,q),re(ce,q))},j}return Ki}var Xi,Ws;function Gt(){if(Ws)return Xi;Ws=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:a,ObjectKeys:i,ObjectSetPrototypeOf:c}=tt;Xi=w;const y=bn(),v=Os();c(w.prototype,y.prototype),c(w,y);{const O=i(v.prototype);for(let ee=0;ee<O.length;ee++){const $=O[ee];w.prototype[$]||(w.prototype[$]=v.prototype[$])}}function w(O){if(!(this instanceof w))return new w(O);y.call(this,O),v.call(this,O),O?(this.allowHalfOpen=O.allowHalfOpen!==!1,O.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),O.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(w.prototype,{writable:{__proto__:null,...a(v.prototype,"writable")},writableHighWaterMark:{__proto__:null,...a(v.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...a(v.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...a(v.prototype,"writableBuffer")},writableLength:{__proto__:null,...a(v.prototype,"writableLength")},writableFinished:{__proto__:null,...a(v.prototype,"writableFinished")},writableCorked:{__proto__:null,...a(v.prototype,"writableCorked")},writableEnded:{__proto__:null,...a(v.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...a(v.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(O){this._readableState&&this._writableState&&(this._readableState.destroyed=O,this._writableState.destroyed=O)}}});let _;function D(){return _===void 0&&(_={}),_}w.fromWeb=function(O,ee){return D().newStreamDuplexFromReadableWritablePair(O,ee)},w.toWeb=function(O){return D().newReadableWritablePairFromDuplex(O)};let I;return w.from=function(O){return I||(I=Kd()),I(O,"body")},Xi}const{ObjectSetPrototypeOf:zs,Symbol:Xd}=tt;var Vs=Kt;const{ERR_METHOD_NOT_IMPLEMENTED:$d}=ft.codes,$i=Gt(),{getHighWaterMark:Yd}=Oi;zs(Kt.prototype,$i.prototype),zs(Kt,$i);const Ir=Xd("kCallback");function Kt(r){if(!(this instanceof Kt))return new Kt(r);const a=r?Yd(this,r,"readableHighWaterMark",!0):null;a===0&&(r={...r,highWaterMark:null,readableHighWaterMark:a,writableHighWaterMark:r.writableHighWaterMark||0}),$i.call(this,r),this._readableState.sync=!1,this[Ir]=null,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",Zd)}function Yi(r){typeof this._flush=="function"&&!this.destroyed?this._flush((a,i)=>{if(a){r?r(a):this.destroy(a);return}i!=null&&this.push(i),this.push(null),r&&r()}):(this.push(null),r&&r())}function Zd(){this._final!==Yi&&Yi.call(this)}Kt.prototype._final=Yi,Kt.prototype._transform=function(r,a,i){throw new $d("_transform()")},Kt.prototype._write=function(r,a,i){const c=this._readableState,y=this._writableState,v=c.length;this._transform(r,a,(w,_)=>{if(w){i(w);return}_!=null&&this.push(_),y.ended||v===c.length||c.length<c.highWaterMark?i():this[Ir]=i})},Kt.prototype._read=function(){if(this[Ir]){const r=this[Ir];this[Ir]=null,r()}};const{ObjectSetPrototypeOf:Gs}=tt;var Ks=_r;const Zi=Vs;Gs(_r.prototype,Zi.prototype),Gs(_r,Zi);function _r(r){if(!(this instanceof _r))return new _r(r);Zi.call(this,r)}_r.prototype._transform=function(r,a,i){i(null,r)};const Lr=nr,{ArrayIsArray:Hd,Promise:Jd,SymbolAsyncIterator:Qd}=tt,gn=Yt,{once:qd}=Ut,eh=gr,Xs=Gt(),{aggregateTwoErrors:th,codes:{ERR_INVALID_ARG_TYPE:Hi,ERR_INVALID_RETURN_VALUE:Ji,ERR_MISSING_ARGS:rh,ERR_STREAM_DESTROYED:nh,ERR_STREAM_PREMATURE_CLOSE:ih},AbortError:oh}=ft,{validateFunction:ah,validateAbortSignal:sh}=nn,{isIterable:ir,isReadable:Qi,isReadableNodeStream:yn,isNodeStream:$s,isTransformStream:vr,isWebStream:lh,isReadableStream:qi,isReadableEnded:uh}=Vt,ch=globalThis.AbortController||gi().AbortController;let eo,to;function Ys(r,a,i){let c=!1;r.on("close",()=>{c=!0});const y=gn(r,{readable:a,writable:i},v=>{c=!v});return{destroy:v=>{c||(c=!0,eh.destroyer(r,v||new nh("pipe")))},cleanup:y}}function fh(r){return ah(r[r.length-1],"streams[stream.length - 1]"),r.pop()}function ro(r){if(ir(r))return r;if(yn(r))return dh(r);throw new Hi("val",["Readable","Iterable","AsyncIterable"],r)}async function*dh(r){to||(to=bn()),yield*to.prototype[Qd].call(r)}async function _n(r,a,i,{end:c}){let y,v=null;const w=I=>{if(I&&(y=I),v){const O=v;v=null,O()}},_=()=>new Jd((I,O)=>{y?O(y):v=()=>{y?O(y):I()}});a.on("drain",w);const D=gn(a,{readable:!1},w);try{a.writableNeedDrain&&await _();for await(const I of r)a.write(I)||await _();c&&a.end(),await _(),i()}catch(I){i(y!==I?th(y,I):I)}finally{D(),a.off("drain",w)}}async function no(r,a,i,{end:c}){vr(a)&&(a=a.writable);const y=a.getWriter();try{for await(const v of r)await y.ready,y.write(v).catch(()=>{});await y.ready,c&&await y.close(),i()}catch(v){try{await y.abort(v),i(v)}catch(w){i(w)}}}function hh(...r){return Zs(r,qd(fh(r)))}function Zs(r,a,i){if(r.length===1&&Hd(r[0])&&(r=r[0]),r.length<2)throw new rh("streams");const c=new ch,y=c.signal,v=i?.signal,w=[];sh(v,"options.signal");function _(){re(new oh)}v?.addEventListener("abort",_);let D,I;const O=[];let ee=0;function $(be){re(be,--ee===0)}function re(be,Q){if(be&&(!D||D.code==="ERR_STREAM_PREMATURE_CLOSE")&&(D=be),!(!D&&!Q)){for(;O.length;)O.shift()(D);v?.removeEventListener("abort",_),c.abort(),Q&&(D||w.forEach(Fe=>Fe()),Lr.nextTick(a,D,I))}}let X;for(let be=0;be<r.length;be++){const Q=r[be],Fe=be<r.length-1,Xe=be>0,ye=Fe||i?.end!==!1,Ne=be===r.length-1;if($s(Q)){let Be=function(Ve){Ve&&Ve.name!=="AbortError"&&Ve.code!=="ERR_STREAM_PREMATURE_CLOSE"&&$(Ve)};if(ye){const{destroy:Ve,cleanup:Ee}=Ys(Q,Fe,Xe);O.push(Ve),Qi(Q)&&Ne&&w.push(Ee)}Q.on("error",Be),Qi(Q)&&Ne&&w.push(()=>{Q.removeListener("error",Be)})}if(be===0)if(typeof Q=="function"){if(X=Q({signal:y}),!ir(X))throw new Ji("Iterable, AsyncIterable or Stream","source",X)}else ir(Q)||yn(Q)||vr(Q)?X=Q:X=Xs.from(Q);else if(typeof Q=="function"){if(vr(X)){var we;X=ro((we=X)===null||we===void 0?void 0:we.readable)}else X=ro(X);if(X=Q(X,{signal:y}),Fe){if(!ir(X,!0))throw new Ji("AsyncIterable",`transform[${be-1}]`,X)}else{var me;eo||(eo=Ks);const Be=new eo({objectMode:!0}),Ve=(me=X)===null||me===void 0?void 0:me.then;if(typeof Ve=="function")ee++,Ve.call(X,_e=>{I=_e,_e!=null&&Be.write(_e),ye&&Be.end(),Lr.nextTick($)},_e=>{Be.destroy(_e),Lr.nextTick($,_e)});else if(ir(X,!0))ee++,_n(X,Be,$,{end:ye});else if(qi(X)||vr(X)){const _e=X.readable||X;ee++,_n(_e,Be,$,{end:ye})}else throw new Ji("AsyncIterable or Promise","destination",X);X=Be;const{destroy:Ee,cleanup:ce}=Ys(X,!1,!0);O.push(Ee),Ne&&w.push(ce)}}else if($s(Q)){if(yn(X)){ee+=2;const Be=ph(X,Q,$,{end:ye});Qi(Q)&&Ne&&w.push(Be)}else if(vr(X)||qi(X)){const Be=X.readable||X;ee++,_n(Be,Q,$,{end:ye})}else if(ir(X))ee++,_n(X,Q,$,{end:ye});else throw new Hi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=Q}else if(lh(Q)){if(yn(X))ee++,no(ro(X),Q,$,{end:ye});else if(qi(X)||ir(X))ee++,no(X,Q,$,{end:ye});else if(vr(X))ee++,no(X.readable,Q,$,{end:ye});else throw new Hi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],X);X=Q}else X=Xs.from(Q)}return(y!=null&&y.aborted||v!=null&&v.aborted)&&Lr.nextTick(_),X}function ph(r,a,i,{end:c}){let y=!1;if(a.on("close",()=>{y||i(new ih)}),r.pipe(a,{end:!1}),c){let v=function(){y=!0,a.end()};uh(r)?Lr.nextTick(v):r.once("end",v)}else i();return gn(r,{readable:!0,writable:!1},v=>{const w=r._readableState;v&&v.code==="ERR_STREAM_PREMATURE_CLOSE"&&w&&w.ended&&!w.errored&&!w.errorEmitted?r.once("end",i).once("error",i):i(v)}),gn(a,{readable:!1,writable:!0},i)}var io={pipelineImpl:Zs,pipeline:hh};const{pipeline:mh}=io,vn=Gt(),{destroyer:bh}=gr,{isNodeStream:wn,isReadable:Hs,isWritable:Js,isWebStream:oo,isTransformStream:or,isWritableStream:Qs,isReadableStream:qs}=Vt,{AbortError:gh,codes:{ERR_INVALID_ARG_VALUE:el,ERR_MISSING_ARGS:yh}}=ft,_h=Yt;var tl=function(...r){if(r.length===0)throw new yh("streams");if(r.length===1)return vn.from(r[0]);const a=[...r];if(typeof r[0]=="function"&&(r[0]=vn.from(r[0])),typeof r[r.length-1]=="function"){const $=r.length-1;r[$]=vn.from(r[$])}for(let $=0;$<r.length;++$)if(!(!wn(r[$])&&!oo(r[$]))){if($<r.length-1&&!(Hs(r[$])||qs(r[$])||or(r[$])))throw new el(`streams[${$}]`,a[$],"must be readable");if($>0&&!(Js(r[$])||Qs(r[$])||or(r[$])))throw new el(`streams[${$}]`,a[$],"must be writable")}let i,c,y,v,w;function _($){const re=v;v=null,re?re($):$?w.destroy($):!ee&&!O&&w.destroy()}const D=r[0],I=mh(r,_),O=!!(Js(D)||Qs(D)||or(D)),ee=!!(Hs(I)||qs(I)||or(I));if(w=new vn({writableObjectMode:!!(D!=null&&D.writableObjectMode),readableObjectMode:!!(I!=null&&I.writableObjectMode),writable:O,readable:ee}),O){if(wn(D))w._write=function(re,X,we){D.write(re,X)?we():i=we},w._final=function(re){D.end(),c=re},D.on("drain",function(){if(i){const re=i;i=null,re()}});else if(oo(D)){const re=(or(D)?D.writable:D).getWriter();w._write=async function(X,we,me){try{await re.ready,re.write(X).catch(()=>{}),me()}catch(be){me(be)}},w._final=async function(X){try{await re.ready,re.close().catch(()=>{}),c=X}catch(we){X(we)}}}const $=or(I)?I.readable:I;_h($,()=>{if(c){const re=c;c=null,re()}})}if(ee){if(wn(I))I.on("readable",function(){if(y){const $=y;y=null,$()}}),I.on("end",function(){w.push(null)}),w._read=function(){for(;;){const $=I.read();if($===null){y=w._read;return}if(!w.push($))return}};else if(oo(I)){const $=(or(I)?I.readable:I).getReader();w._read=async function(){for(;;)try{const{value:re,done:X}=await $.read();if(!w.push(re))return;if(X){w.push(null);return}}catch{return}}}}return w._destroy=function($,re){!$&&v!==null&&($=new gh),y=null,i=null,c=null,v===null?re($):(v=re,wn(I)&&bh(I,$))},w};const rl=globalThis.AbortController||gi().AbortController,{codes:{ERR_INVALID_ARG_VALUE:vh,ERR_INVALID_ARG_TYPE:Mr,ERR_MISSING_ARGS:wh,ERR_OUT_OF_RANGE:Eh},AbortError:Lt}=ft,{validateAbortSignal:ar,validateInteger:Sh,validateObject:sr}=nn,Ch=tt.Symbol("kWeak"),{finished:Th}=Yt,xh=tl,{addAbortSignalNoValidate:Rh}=pn,{isWritable:kh,isNodeStream:Ph}=Vt,{ArrayPrototypePush:Ah,MathFloor:Fh,Number:Dh,NumberIsNaN:Ih,Promise:nl,PromiseReject:il,PromisePrototypeThen:Lh,Symbol:ol}=tt,En=ol("kEmpty"),al=ol("kEof");function Mh(r,a){if(a!=null&&sr(a,"options"),a?.signal!=null&&ar(a.signal,"options.signal"),Ph(r)&&!kh(r))throw new vh("stream",r,"must be writable");const i=xh(this,r);return a!=null&&a.signal&&Rh(a.signal,i),i}function Sn(r,a){if(typeof r!="function")throw new Mr("fn",["Function","AsyncFunction"],r);a!=null&&sr(a,"options"),a?.signal!=null&&ar(a.signal,"options.signal");let i=1;return a?.concurrency!=null&&(i=Fh(a.concurrency)),Sh(i,"concurrency",1),async function*(){var c,y;const v=new rl,w=this,_=[],D=v.signal,I={signal:D},O=()=>v.abort();a!=null&&(c=a.signal)!==null&&c!==void 0&&c.aborted&&O(),a==null||(y=a.signal)===null||y===void 0||y.addEventListener("abort",O);let ee,$,re=!1;function X(){re=!0}async function we(){try{for await(let Q of w){var me;if(re)return;if(D.aborted)throw new Lt;try{Q=r(Q,I)}catch(Fe){Q=il(Fe)}Q!==En&&(typeof((me=Q)===null||me===void 0?void 0:me.catch)=="function"&&Q.catch(X),_.push(Q),ee&&(ee(),ee=null),!re&&_.length&&_.length>=i&&await new nl(Fe=>{$=Fe}))}_.push(al)}catch(Q){const Fe=il(Q);Lh(Fe,void 0,X),_.push(Fe)}finally{var be;re=!0,ee&&(ee(),ee=null),a==null||(be=a.signal)===null||be===void 0||be.removeEventListener("abort",O)}}we();try{for(;;){for(;_.length>0;){const me=await _[0];if(me===al)return;if(D.aborted)throw new Lt;me!==En&&(yield me),_.shift(),$&&($(),$=null)}await new nl(me=>{ee=me})}}finally{v.abort(),re=!0,$&&($(),$=null)}}.call(this)}function jh(r=void 0){return r!=null&&sr(r,"options"),r?.signal!=null&&ar(r.signal,"options.signal"),async function*(){let a=0;for await(const c of this){var i;if(r!=null&&(i=r.signal)!==null&&i!==void 0&&i.aborted)throw new Lt({cause:r.signal.reason});yield[a++,c]}}.call(this)}async function sl(r,a=void 0){for await(const i of ao.call(this,r,a))return!0;return!1}async function Nh(r,a=void 0){if(typeof r!="function")throw new Mr("fn",["Function","AsyncFunction"],r);return!await sl.call(this,async(...i)=>!await r(...i),a)}async function Bh(r,a){for await(const i of ao.call(this,r,a))return i}async function Oh(r,a){if(typeof r!="function")throw new Mr("fn",["Function","AsyncFunction"],r);async function i(c,y){return await r(c,y),En}for await(const c of Sn.call(this,i,a));}function ao(r,a){if(typeof r!="function")throw new Mr("fn",["Function","AsyncFunction"],r);async function i(c,y){return await r(c,y)?c:En}return Sn.call(this,i,a)}class Uh extends wh{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Wh(r,a,i){var c;if(typeof r!="function")throw new Mr("reducer",["Function","AsyncFunction"],r);i!=null&&sr(i,"options"),i?.signal!=null&&ar(i.signal,"options.signal");let y=arguments.length>1;if(i!=null&&(c=i.signal)!==null&&c!==void 0&&c.aborted){const I=new Lt(void 0,{cause:i.signal.reason});throw this.once("error",()=>{}),await Th(this.destroy(I)),I}const v=new rl,w=v.signal;if(i!=null&&i.signal){const I={once:!0,[Ch]:this};i.signal.addEventListener("abort",()=>v.abort(),I)}let _=!1;try{for await(const I of this){var D;if(_=!0,i!=null&&(D=i.signal)!==null&&D!==void 0&&D.aborted)throw new Lt;y?a=await r(a,I,{signal:w}):(a=I,y=!0)}if(!_&&!y)throw new Uh}finally{v.abort()}return a}async function zh(r){r!=null&&sr(r,"options"),r?.signal!=null&&ar(r.signal,"options.signal");const a=[];for await(const c of this){var i;if(r!=null&&(i=r.signal)!==null&&i!==void 0&&i.aborted)throw new Lt(void 0,{cause:r.signal.reason});Ah(a,c)}return a}function Vh(r,a){const i=Sn.call(this,r,a);return async function*(){for await(const c of i)yield*c}.call(this)}function ll(r){if(r=Dh(r),Ih(r))return 0;if(r<0)throw new Eh("number",">= 0",r);return r}function Gh(r,a=void 0){return a!=null&&sr(a,"options"),a?.signal!=null&&ar(a.signal,"options.signal"),r=ll(r),async function*(){var i;if(a!=null&&(i=a.signal)!==null&&i!==void 0&&i.aborted)throw new Lt;for await(const y of this){var c;if(a!=null&&(c=a.signal)!==null&&c!==void 0&&c.aborted)throw new Lt;r--<=0&&(yield y)}}.call(this)}function Kh(r,a=void 0){return a!=null&&sr(a,"options"),a?.signal!=null&&ar(a.signal,"options.signal"),r=ll(r),async function*(){var i;if(a!=null&&(i=a.signal)!==null&&i!==void 0&&i.aborted)throw new Lt;for await(const y of this){var c;if(a!=null&&(c=a.signal)!==null&&c!==void 0&&c.aborted)throw new Lt;if(r-- >0)yield y;else return}}.call(this)}bi.streamReturningOperators={asIndexedPairs:jh,drop:Gh,filter:ao,flatMap:Vh,map:Sn,take:Kh,compose:Mh},bi.promiseReturningOperators={every:Nh,forEach:Oh,reduce:Wh,toArray:zh,some:sl,find:Bh};var so,ul;function cl(){if(ul)return so;ul=1;const{ArrayPrototypePop:r,Promise:a}=tt,{isIterable:i,isNodeStream:c,isWebStream:y}=Vt,{pipelineImpl:v}=io,{finished:w}=Yt;dl();function _(...D){return new a((I,O)=>{let ee,$;const re=D[D.length-1];if(re&&typeof re=="object"&&!c(re)&&!i(re)&&!y(re)){const X=r(D);ee=X.signal,$=X.end}v(D,(X,we)=>{X?O(X):I(we)},{signal:ee,end:$})})}return so={finished:w,pipeline:_},so}var fl;function dl(){if(fl)return pi.exports;fl=1;const{Buffer:r}=$t,{ObjectDefineProperty:a,ObjectKeys:i,ReflectApply:c}=tt,{promisify:{custom:y}}=Ut,{streamReturningOperators:v,promiseReturningOperators:w}=bi,{codes:{ERR_ILLEGAL_CONSTRUCTOR:_}}=ft,D=tl,{pipeline:I}=io,{destroyer:O}=gr,ee=Yt,$=cl(),re=Vt,X=pi.exports=Ni.Stream;X.isDisturbed=re.isDisturbed,X.isErrored=re.isErrored,X.isReadable=re.isReadable,X.Readable=bn();for(const me of i(v)){let be=function(...Fe){if(new.target)throw _();return X.Readable.from(c(Q,this,Fe))};const Q=v[me];a(be,"name",{__proto__:null,value:Q.name}),a(be,"length",{__proto__:null,value:Q.length}),a(X.Readable.prototype,me,{__proto__:null,value:be,enumerable:!1,configurable:!0,writable:!0})}for(const me of i(w)){let be=function(...Fe){if(new.target)throw _();return c(Q,this,Fe)};const Q=w[me];a(be,"name",{__proto__:null,value:Q.name}),a(be,"length",{__proto__:null,value:Q.length}),a(X.Readable.prototype,me,{__proto__:null,value:be,enumerable:!1,configurable:!0,writable:!0})}X.Writable=Os(),X.Duplex=Gt(),X.Transform=Vs,X.PassThrough=Ks,X.pipeline=I;const{addAbortSignal:we}=pn;return X.addAbortSignal=we,X.finished=ee,X.destroy=O,X.compose=D,a(X,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return $}}),a(I,y,{__proto__:null,enumerable:!0,get(){return $.pipeline}}),a(ee,y,{__proto__:null,enumerable:!0,get(){return $.finished}}),X.Stream=X,X._isUint8Array=function(me){return me instanceof Uint8Array},X._uint8ArrayToBuffer=function(me){return r.from(me.buffer,me.byteOffset,me.byteLength)},pi.exports}(function(r){const a=dl(),i=cl(),c=a.Readable.destroy;r.exports=a.Readable,r.exports._uint8ArrayToBuffer=a._uint8ArrayToBuffer,r.exports._isUint8Array=a._isUint8Array,r.exports.isDisturbed=a.isDisturbed,r.exports.isErrored=a.isErrored,r.exports.isReadable=a.isReadable,r.exports.Readable=a.Readable,r.exports.Writable=a.Writable,r.exports.Duplex=a.Duplex,r.exports.Transform=a.Transform,r.exports.PassThrough=a.PassThrough,r.exports.addAbortSignal=a.addAbortSignal,r.exports.finished=a.finished,r.exports.destroy=a.destroy,r.exports.destroy=c,r.exports.pipeline=a.pipeline,r.exports.compose=a.compose,Object.defineProperty(a,"promises",{configurable:!0,enumerable:!0,get(){return i}}),r.exports.Stream=a.Stream,r.exports.default=r.exports})(va);var lo=va.exports;class Xh{constructor(a){fe(this,"_module"),this._module=a}allocate(a){const i=this._module.canvas.getContext("webgl2"),c=i.createTexture();i.bindTexture(i.TEXTURE_2D,c),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),a&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,a),i.bindTexture(i.TEXTURE_2D,null);const y=this._module.GL.getNewId(this._module.GL.textures);return this._module.GL.textures[y]=c,{id:y}}release(a){const i=typeof a=="number"?a:a.id;this._module.canvas.getContext("webgl2").deleteTexture(this._module.GL.textures[i]),this._module.GL.textures[i]=null}}class $h{constructor(a){fe(this,"_module"),this._module=a}allocate(a){const i=this._module._malloc(a);return{buffer:()=>this._module.HEAPU8.buffer,byteOffset:i,byteLength:a}}release(a){const i=typeof a=="number"?a:a.byteOffset;this._module._free(i)}}async function hl(r,a){let i=new $h(r),c=new Xh(r);const y={width:a.displayWidth,height:a.displayHeight},v=i.allocate(a.allocationSize({rect:y})),w=a instanceof Jr?v:new DataView(v.buffer(),v.byteOffset,v.byteLength),_=a.texture?c.allocate(a.texture).id:0,D=a.horizontalFlip;switch(a.format){case"RGB":case"RGBA":case"BGR":case"BGRA":const I=a.format;return a.copyTo(w).then(()=>r.FrameData.makeFromBpc8WithTexID(_,v.byteOffset,()=>{i.release(v),c.release(_)},y.width,y.height,r.CameraOrientation.DEG_0,r.PixelFormat[I],D,0));case"NV12":return a.copyTo(w).then(O=>r.FrameData.makeFromYuvNV12(v.byteOffset+O[0].offset,v.byteOffset+O[1].offset,()=>{i.release(v)},y.width,y.height,r.CameraOrientation.DEG_0,D,0));case"I420":return a.copyTo(w).then(O=>r.FrameData.makeFromYuvI420(v.byteOffset+O[0].offset,v.byteOffset+O[1].offset,v.byteOffset+O[2].offset,()=>{i.release(v)},y.width,y.height,r.CameraOrientation.DEG_0,D,0));default:throw new Error("Unknown video frame format")}}const uo=class ti extends Rr{constructor(a,i){super(),fe(this,"readable"),fe(this,"_sdk"),fe(this,"fps",30),this._sdk=a,this.readable=new lo.Readable({read:async()=>{const c=ui(ti.PRODUCED_EVENT),{done:y,value:v}=await i.next(this.fps),w=ci(c);if(y){this.readable.push(null),this.dispatchEvent(new CustomEvent(ti.EMPTIED_EVENT));return}if(this.readable.destroyed){v.close();return}const _=v,D=hl(this._sdk,_);this.readable.push({frame:_,frameDataPromise:D}),this.dispatchEvent(new CustomEvent(ti.PRODUCED_EVENT,{detail:w}))},objectMode:!0,highWaterMark:1})}pipe(a){return this.readable.pipe(a)}unpipe(){return this.readable.unpipe()}destroy(){this.removeAllEventListeners(),this.readable.unpipe(),this.readable.destroy()}};fe(uo,"EMPTIED_EVENT","emptied"),fe(uo,"PRODUCED_EVENT","produced");let jr=uo;const pl=class Lo extends Rr{constructor(a,i,c,y){super(),fe(this,"_sdk"),fe(this,"_effectPlayer"),fe(this,"_processor"),fe(this,"_lastFrame",null),fe(this,"transform"),this._sdk=a,this._effectPlayer=i;const v=this._sdk.ProcessorConfiguration.create();switch(c){case"image":v.setUseOfflineMode(!0),v.setUseFutureFilter(!1),v.setUseFutureInterpolate(!1);break;case"video":v.setUseOfflineMode(!1),v.setUseFutureFilter(!1),v.setUseFutureInterpolate(!1);break;case"stream":default:v.setUseOfflineMode(!1),v.setUseFutureFilter(y.useFutureFilter),v.setUseFutureInterpolate(y.useFutureInterpolate);break}this._processor=c==="image"?this._sdk.FrameProcessor.createPhotoProcessor(v):this._sdk.FrameProcessor.createRealtimeProcessor(this._sdk.RealtimeProcessorMode.SYNC,v),v.delete(),this._effectPlayer.setFrameProcessor(this._processor),this.transform=new lo.Transform({transform:async({frame:w,frameDataPromise:_},D,I)=>{this._lastFrame?.close(),this._lastFrame=w;const O=await _;if(this.transform.destroyed){O.delete();return}const ee=this._process(O);this.transform.push({frame:{width:w.displayWidth,height:w.displayHeight},result:ee}),I()},flush:w=>{},objectMode:!0,highWaterMark:1})}_process(a){const i=ui(Lo.PROCESSED_EVENT),c=(this._processor.push(a),this._processor.pop()),y=ci(i);return a.delete(),this.dispatchEvent(new CustomEvent(Lo.PROCESSED_EVENT,{detail:y})),c}async rerun(){if(!this._lastFrame||this.transform.destroyed)return!1;const a={width:this._lastFrame.displayWidth,height:this._lastFrame.displayHeight},i=await hl(this._sdk,this._lastFrame);if(this.transform.destroyed)return i.delete(),!1;const c=this._process(i);return this.transform.push({frame:a,result:c}),!0}pipe(a){return this.transform.pipe(a)}unpipe(){return this.transform.unpipe()}destroy(){this.removeAllEventListeners(),this._processor.delete(),this._lastFrame&&(this._lastFrame.close(),this._lastFrame=null),this.transform.unpipe(),this.transform.destroy()}};fe(pl,"PROCESSED_EVENT","processed");let co=pl;const Yh=typeof devicePixelRatio<"u"?devicePixelRatio:1,ml=class Mo extends Rr{constructor(a,i,c=Yh){super(),fe(this,"writable"),fe(this,"fps",30),fe(this,"_sdk"),fe(this,"_effectPlayer"),fe(this,"_effectManager"),fe(this,"_lastResult",null),fe(this,"_preferences"),fe(this,"_width",0),fe(this,"_height",0),fe(this,"_then",0),this._sdk=a,this._effectPlayer=i,this._effectManager=i.effectManager(),this._preferences={devicePixelRatio:c},this.writable=new lo.Writable({write:async(y,v,w)=>{this._lastResult?.result.delete(),this._lastResult=y,await new Promise(xr),this._render(y),w()},objectMode:!0})}get frameSize(){return{width:this._width,height:this._height}}get renderSize(){return{width:this._sdk.canvas.width,height:this._sdk.canvas.height}}updateSurfaceSize(){this._width=this._height=0}_render({frame:a,result:i}){if(i.isDeleted())return;const c=i.frameData;if(this._width!==a.width||this._height!==a.height){this._width=a.width,this._height=a.height;const{width:w,height:_}=Zh(a.width,a.height,this._preferences.devicePixelRatio);this._sdk.setCanvasSize(w,_),this._effectManager.setEffectSize(w,_),this._effectPlayer.surfaceChanged(w,_)}const y=ui(Mo.RENDERED_EVENT);this._effectPlayer.drawWithExternalFrameData(c),c.delete();const v=ci(y);this._sdk.ctx.bindFramebuffer(this._sdk.ctx.READ_FRAMEBUFFER,null),this.dispatchEvent(new CustomEvent(Mo.RENDERED_EVENT,{detail:v}))}async rerun(){if(!this._lastResult)return!1;let a=0;const i=this._then,c=1e3/this.fps,y=.1*c;for(;(a=await new Promise(xr))-i<c-y;);return this._then=a,this._render(this._lastResult),!0}destroy(){this.removeAllEventListeners(),this._effectManager.delete(),this._lastResult&&(this._lastResult.result.delete(),this._lastResult=null),this.writable.end(),this.writable.destroy()}};fe(ml,"RENDERED_EVENT","rendered");let fo=ml;function Zh(r,a,i){const c=Math.round(self.devicePixelRatio),[y,v]=[screen.width*c,screen.height*c],w=Math.max(1,y/r),_=Math.max(1,v/a),D=Math.max(w,_);i=Math.min(i,D);const I=r*i,O=a*i;return{width:I,height:O}}const Cn=class ri extends Rr{constructor(a,i,c){super(),fe(this,"_sdk"),fe(this,"_effectPlayer"),fe(this,"_state",lt.Paused),fe(this,"_producer"),fe(this,"_processor"),fe(this,"_renderer"),fe(this,"_preferences",{fps:30,idleOnEmpty:!0,useFutureFilter:!0,useFutureInterpolate:!1}),this._sdk=a,this._effectPlayer=i,this._preferences.useFutureFilter=c.useFutureFilter,this._preferences.useFutureInterpolate=c.useFutureInterpolate,this._producer=new jr(a,async function*(){}()),this._processor=new co(a,i,"stream",this._preferences),this._renderer=new fo(a,i,c.devicePixelRatio),this._renderer.addEventListener(fo.RENDERED_EVENT,({detail:y})=>this.dispatchEvent(new CustomEvent(ri.FRAME_RENDERED_EVENT,{detail:y})))}get state(){return this._state}get frameSize(){return this._renderer.frameSize}get preferences(){return this._preferences}use(a,i){const c=this._sdk,y=this._effectPlayer;this._producer.destroy(),this._processor.destroy(),this._producer=new jr(c,a[Symbol.asyncIterator](i)),this._producer.addEventListener(jr.PRODUCED_EVENT,({detail:v})=>this.dispatchEvent(new CustomEvent(ri.FRAME_RECEIVED_EVENT,{detail:v}))),this._processor=new co(c,y,a.kind,this._preferences),this._processor.addEventListener(co.PROCESSED_EVENT,({detail:v})=>this.dispatchEvent(new CustomEvent(ri.FRAME_PROCESSED_EVENT,{detail:v}))),this._producer.addEventListener(jr.EMPTIED_EVENT,()=>this._state=lt.Idle,{once:!0}),this._producer.addEventListener(jr.EMPTIED_EVENT,()=>{this._renderer.addEventListener(fo.RENDERED_EVENT,async()=>{for(;this._state===lt.Idle&&!this._preferences.idleOnEmpty;)if(!await this._renderer.rerun())return},{once:!0})},{once:!0}),this._state===lt.Idle&&(this._state=lt.Running),this._state===lt.Running&&this._producer.pipe(this._processor.transform).pipe(this._renderer.writable)}run({fps:a=this._preferences.fps,idleOnEmpty:i=!0}){Object.assign(this._preferences,{fps:a,idleOnEmpty:i}),this._producer.fps=a,this._renderer.fps=a,!(this._state===lt.Running||this._state===lt.Idle)&&(this._producer.pipe(this._processor.transform).pipe(this._renderer.writable),this._state=lt.Running)}pause(){this._state!==lt.Paused&&(this._producer.unpipe(),this._processor.unpipe(),this._state=lt.Paused)}async rerun(){this._state===lt.Idle&&await this._processor.rerun()}async rerender(){this._state===lt.Idle&&await this._renderer.rerun()}destroy(){this.pause(),this._producer.destroy(),this._processor.destroy(),this._renderer.destroy()}updateSurfaceSize(){this._renderer.updateSurfaceSize()}};fe(Cn,"FRAME_RECEIVED_EVENT","framereceived"),fe(Cn,"FRAME_PROCESSED_EVENT","frameprocessed"),fe(Cn,"FRAME_RENDERED_EVENT","framerendered");let Tn=Cn;class bl{constructor(a){fe(this,"_fd"),fe(this,"_cache",new Map),this._fd=a}get(a){if(Array.isArray(a))return a.map(w=>this.get(w));const i=a.split("."),c=i.length;let y=c,v=this._fd;for(let w=!1;!w&&y>0;--y){const _=i.slice(0,y).join(".");this._cache.has(_)&&(w=!0,v=this._cache.get(_),++y)}for(;v!=null&&y<c;++y){const w=i[y];let _=v[w];if(typeof _>"u"){const I="get"+w[0].toUpperCase()+w.slice(1);_=v[I]}if(typeof _>"u"&&ba(v)){const I=parseInt(w);isNaN(I)||(_=v.get(I))}if(typeof _=="function")try{_=_.apply(v)}catch{_=void 0}const D=i.slice(0,y+1).join(".");if(a===D&&ba(_)){const I=_;_=new Array(I.size());for(let O=0,ee=I.size();O<ee;++O)_[O]=I.get(O)}this._cache.set(D,v=_)}return y===c?v:void 0}addTimestampUs(a){this._fd.addTimestampUs(a)}}class gl{constructor(a){fe(this,"_module"),this._module=a}exists(a){try{return this._module.FS.lstat(a),!0}catch(i){if(i.errno===44||i.code==="ENOENT")return!1;throw i}}writeFile(a,i){const c=a.split("/");c[0]===""&&c.shift(),c.length>1&&c.reduce((y,v)=>(this.exists(y)||this._module.FS.mkdir(y),`${y}/${v}`)),!(a.endsWith("/")&&i.length===0)&&this._module.FS.writeFile(a,i)}}var Hh=Object.defineProperty,Jh=Object.getOwnPropertyDescriptor,Qh=(r,a,i,c)=>{for(var y=c>1?void 0:c?Jh(a,i):a,v=r.length-1,w;v>=0;v--)(w=r[v])&&(y=(c?w(a,i,y):w(y))||y);return c&&y&&Hh(a,i,y),y};const yl={useFutureFilter:!0,useFutureInterpolate:!1,logger:console},_l=(Ye=class extends Rr{constructor(r,a={}){super(),fe(this,"_sdk"),fe(this,"_effectPlayer"),fe(this,"_effectManager"),fe(this,"_pipeline"),fe(this,"_preferences"),this._sdk=r,this._preferences={...yl,...a};const i=this._sdk.EffectPlayerConfiguration.create(this._sdk.canvas.width,this._sdk.canvas.height);this._effectPlayer=this._sdk.EffectPlayer.create(i),i.delete(),this._effectManager=this._effectPlayer.effectManager(),this._effectPlayer.surfaceCreated(this._sdk.canvas.width,this._sdk.canvas.height),this._effectPlayer.addFrameDataListener(c=>{this.dispatchEvent(new CustomEvent(Ye.FRAME_DATA_EVENT,{detail:new bl(c)}))}),this._effectManager.addEffectActivatedListener(()=>{const c=this._effectManager.current();this.dispatchEvent(new CustomEvent(Ye.EFFECT_ACTIVATED_EVENT,{detail:c}))}),this._effectManager.addEffectEventListener(async c=>{c===dc&&(await new Promise(y=>Ko(y)),this._pipeline.rerun())}),this._pipeline=new Tn(this._sdk,this._effectPlayer,this._preferences),this._pipeline.addEventListener(Tn.FRAME_RECEIVED_EVENT,({detail:c})=>this.dispatchEvent(new CustomEvent(Ye.FRAME_RECEIVED_EVENT,{detail:c}))),this._pipeline.addEventListener(Tn.FRAME_PROCESSED_EVENT,({detail:c})=>this.dispatchEvent(new CustomEvent(Ye.FRAME_PROCESSED_EVENT,{detail:c}))),this._pipeline.addEventListener(Tn.FRAME_RENDERED_EVENT,({detail:c})=>this.dispatchEvent(new CustomEvent(Ye.FRAME_RENDERED_EVENT,{detail:c}))),this.canvas.addEventListener("webglcontextlost",async c=>{c.preventDefault(),this._effectPlayer.playbackStop(),this.pause(),this._effectPlayer.surfaceDestroyed()}),this.canvas.addEventListener("webglcontextrestored",()=>{_a(this._sdk.ctx),this._effectPlayer.surfaceCreated(this._sdk.canvas.width,this._sdk.canvas.height),this._pipeline.updateSurfaceSize(),this.play(),this._effectPlayer.playbackPlay()}),this.setVolume(0)}static async create(r){const a=await ya(r);return new this(a,r)}get canvas(){return this._sdk.canvas}get frameSize(){return this._pipeline.frameSize}get preferences(){return{...this._preferences,pauseOnEmpty:this._pipeline.preferences.idleOnEmpty}}get isPlaying(){return this._pipeline.state===lt.Running}use(r,a){this._pipeline.use(r,a)}async addModule(...r){await Promise.all(r.map(a=>a._bind({FS:new gl(this._sdk)})))}async applyEffect(r){const a=this,i=r.name;return await r._bind({FS:new gl(this._sdk),evalJs:this._evalJs.bind(this),callJsMethod:this._callJsMethod.bind(this)}),new Promise(c=>{this.addEventListener(Ye.EFFECT_ACTIVATED_EVENT,y,{once:!0}),this.addEventListener(Ye.EFFECT_ACTIVATED_EVENT,v);try{this._effectManager.load(i)}catch(w){this.removeEventListener(Ye.EFFECT_ACTIVATED_EVENT,y),this.removeEventListener(Ye.EFFECT_ACTIVATED_EVENT,v),r._unbind(),this.clearEffect(),this._preferences.logger.warn?.("The effect was force cleared due to the exception:"),this._preferences.logger.error?.(w)}function y({detail:w}){c(w)}function v({detail:w}){w.url()!==`/${i}/`&&(a.removeEventListener(Ye.EFFECT_ACTIVATED_EVENT,v),r._unbind())}})}async clearEffect(){return new Promise(r=>{this.addEventListener(Ye.EFFECT_ACTIVATED_EVENT,()=>r(),{once:!0}),this._effectManager.load("")})}callJsMethod(r,a=""){return this._callJsMethod(r,a)}setVolume(r){this._effectManager.setEffectVolume(r),this.dispatchEvent(new CustomEvent("volumechange",{detail:r}))}play(r={}){this._pipeline.run({fps:r.fps,idleOnEmpty:r.pauseOnEmpty})}pause(){this._pipeline.pause()}async destroy(){this.pause(),this.removeAllEventListeners(),await this.clearEffect(),this._pipeline.destroy(),this._effectPlayer.surfaceDestroyed(),this._effectManager.delete(),this._effectPlayer.delete();for(const r in this)r.startsWith("_")&&Object.defineProperty(this,r,{get(){throw new Error("The player is destroyed.")},set(){throw new Error("The player is destroyed.")}})}async _evalJs(r){return new Promise(async a=>{const i=this._effectManager.current().evalJsSync(r);await this._pipeline.rerender(),a(i)})}async _callJsMethod(r,a=""){this._effectManager.current().callJsMethod(r,a),await this._pipeline.rerender()}},fe(Ye,"FRAME_RECEIVED_EVENT","framereceived"),fe(Ye,"FRAME_PROCESSED_EVENT","frameprocessed"),fe(Ye,"FRAME_RENDERED_EVENT","framerendered"),fe(Ye,"FRAME_DATA_EVENT","framedata"),fe(Ye,"EFFECT_ACTIVATED_EVENT","effectactivated"),Ye);Qh([$o("Please, use Effect.evalJs() instead.")],_l.prototype,"callJsMethod",1);let qh=_l;const xn=r=>{if(!(r&&"canvas"in r))throw new Error(`The "player" must be a Player instance, but "${r}" is received. Make sure you haven't forgot to place "await" before Player.create() call.`)},ho=new WeakMap,ep={render:(r,a)=>{xn(r);const i=typeof a=="string"?document.querySelector(a):a;if(!(i instanceof HTMLElement))throw new Error("Target container is not a DOM element");if(i instanceof HTMLMediaElement||i instanceof HTMLCanvasElement)throw new Error("Target container must be a plain html element like `div`");ho.set(i,r),i.appendChild(r.canvas);const{pauseOnEmpty:c}=r.preferences;r.play({pauseOnEmpty:c})},unmount:r=>{const a=typeof r=="string"?document.querySelector(r):r;if(!(a instanceof HTMLElement))throw new Error("Target container is not a DOM element");const i=ho.get(a);i&&a.removeChild(i.canvas),ho.delete(a)}};class tp{constructor(a){fe(this,"_player"),xn(a),this._player=a}async takePhoto(a){const i=this._player.canvas,{width:c,height:y}=this._player.frameSize,v=rp(i,a?.width??c,a?.height??y);return await new Promise((w,_)=>v.toBlob(D=>D?w(D):_(new Error("Unexpected error: Unable to create Blob")),a?.type??"image/jpeg",a?.quality))}}const rp=(r,a=r.width,i=r.height)=>{if(a!==r.width||i!==r.height){const c=np(a,i);return c.getContext("2d").drawImage(r,0,0,c.width,c.height),c}return r},np=(r,a)=>{let i;return Zo?(i=new OffscreenCanvas(r,a),i.toBlob=function(c,y,v){this.convertToBlob({type:y,quality:v}).then(c).catch(w=>c(null))}):(i=document.createElement("canvas"),i.width=r,i.height=a),i},ip=typeof MediaStream<"u"?MediaStream:class{constructor(){throw new Error("The environment does not support MediaStream API")}},vl=class ni extends ip{constructor(a){xn(a),super();const i=ni.cache.get(a);if(!i||!i.active){let c=a.canvas;if(((c.getContext("webgl2")||c.getContext("webgl")).getContextAttributes()||{}).alpha){const y=c,v=(c=document.createElement("canvas")).getContext("2d",{alpha:!1});a.addEventListener("framerendered",()=>{v.canvas.width=y.width,v.canvas.height=y.height,v.drawImage(y,0,0,y.width,y.height)})}c.captureStream().getTracks().forEach(y=>this.addTrack(y)),ni.cache.set(a,this)}return ni.cache.get(a)}getVideoTrack(a=0){return this.getVideoTracks()[a]}getAudioTrack(a=0){return this.getAudioTracks()[a]}stop(){this.getTracks().forEach(a=>a.stop())}};fe(vl,"cache",new WeakMap);let op=vl;const ap=typeof MediaRecorder<"u"?MediaRecorder:class{constructor(){throw new Error("The environment does not support MediaRecorder API")}};class sp extends ap{constructor(a,i){xn(a);const c=a.canvas.captureStream();super(c,i)}async stop(){return new Promise((a,i)=>{const c=v=>{super.removeEventListener("dataavailable",c),super.removeEventListener("error",y),a(v.data)},y=v=>{super.removeEventListener("dataavailable",c),super.removeEventListener("error",y),i(v)};super.addEventListener("dataavailable",c),super.addEventListener("error",y),super.stop()})}}const lp="1.14.2-2-g141ef90bf0";je.Dom=ep,je.Effect=da,je.FrameData=bl,je.Image=qo,je.ImageCapture=tp,je.MediaStream=Qr,je.MediaStreamCapture=op,je.Module=Ju,je.Player=qh,je.VERSION=lp,je.Video=ia,je.VideoRecorder=sp,je.Webcam=zu,je.createSDK=ya,je.defaultPlayerOptions=yl,je.defaultVideoConstraints=qr,je.defaultVideoOptions=na,je.isBrowserSupported=Yo,je.isSimdSupported=ha,je.timers=gu,je.utils=Vu,Object.defineProperty(je,Symbol.toStringTag,{value:"Module"})});
